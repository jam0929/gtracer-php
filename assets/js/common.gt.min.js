
// @fileRef modernizr.js 
;window.Modernizr=function(a,b,c){function A(a){j.cssText=a}function B(a,b){return A(n.join(a+";")+(b||""))}function C(a,b){return typeof a===b}function D(a,b){return!!~(""+a).indexOf(b)}function E(a,b){for(var d in a){var e=a[d];if(!D(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function F(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:C(f,"function")?f.bind(d||b):f}return!1}function G(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return C(b,"string")||C(b,"undefined")?E(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),F(e,b,c))}var d="2.7.0",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={},s={},t={},u=[],v=u.slice,w,x=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},y={}.hasOwnProperty,z;!C(y,"undefined")&&!C(y.call,"undefined")?z=function(a,b){return y.call(a,b)}:z=function(a,b){return b in a&&C(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=v.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(v.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(v.call(arguments)))};return e}),r.flexbox=function(){return G("flexWrap")},r.flexboxlegacy=function(){return G("boxDirection")},r.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:x(["@media (",n.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c},r.rgba=function(){return A("background-color:rgba(150,255,150,.5)"),D(j.backgroundColor,"rgba")},r.hsla=function(){return A("background-color:hsla(120,40%,100%,.5)"),D(j.backgroundColor,"rgba")||D(j.backgroundColor,"hsla")},r.multiplebgs=function(){return A("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(j.background)},r.backgroundsize=function(){return G("backgroundSize")},r.borderimage=function(){return G("borderImage")},r.borderradius=function(){return G("borderRadius")},r.boxshadow=function(){return G("boxShadow")},r.textshadow=function(){return b.createElement("div").style.textShadow===""},r.opacity=function(){return B("opacity:.55"),/^0.55$/.test(j.opacity)},r.cssanimations=function(){return G("animationName")},r.csscolumns=function(){return G("columnCount")},r.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return A((a+"-webkit- ".split(" ").join(b+a)+n.join(c+a)).slice(0,-a.length)),D(j.backgroundImage,"gradient")},r.cssreflections=function(){return G("boxReflect")},r.csstransforms=function(){return!!G("transform")},r.csstransforms3d=function(){var a=!!G("perspective");return a&&"webkitPerspective"in g.style&&x("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},r.csstransitions=function(){return G("transition")},r.fontface=function(){var a;return x('@font-face {font-family:"font";src:url("https://")}',function(c,d){var e=b.getElementById("smodernizr"),f=e.sheet||e.styleSheet,g=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"";a=/src/i.test(g)&&g.indexOf(d.split(" ")[0])===0}),a},r.generatedcontent=function(){var a;return x(["#",h,"{font:0/0 a}#",h,':after{content:"',l,'";visibility:hidden;font:3px/1 a}'].join(""),function(b){a=b.offsetHeight>=3}),a};for(var H in r)z(r,H)&&(w=H.toLowerCase(),e[w]=r[H](),u.push((e[w]?"":"no-")+w));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)z(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},A(""),i=k=null,function(a,b){function l(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function m(){var a=s.elements;return typeof a=="string"?a.split(" "):a}function n(a){var b=j[a[h]];return b||(b={},i++,a[h]=i,j[i]=b),b}function o(a,c,d){c||(c=b);if(k)return c.createElement(a);d||(d=n(c));var g;return d.cache[a]?g=d.cache[a].cloneNode():f.test(a)?g=(d.cache[a]=d.createElem(a)).cloneNode():g=d.createElem(a),g.canHaveChildren&&!e.test(a)&&!g.tagUrn?d.frag.appendChild(g):g}function p(a,c){a||(a=b);if(k)return a.createDocumentFragment();c=c||n(a);var d=c.frag.cloneNode(),e=0,f=m(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function q(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return s.shivMethods?o(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+m().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(s,b.frag)}function r(a){a||(a=b);var c=n(a);return s.shivCSS&&!g&&!c.hasCSS&&(c.hasCSS=!!l(a,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),k||q(a,c),a}var c="3.7.0",d=a.html5||{},e=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g,h="_html5shiv",i=0,j={},k;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",g="hidden"in a,k=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){g=!0,k=!0}})();var s={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:c,shivCSS:d.shivCSS!==!1,supportsUnknownElements:k,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:r,createElement:o,createDocumentFragment:p};a.html5=s,r(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.testProp=function(a){return E([a])},e.testAllProps=G,e.testStyles=x,e.prefixed=function(a,b,c){return b?G(a,b,c):G(a,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+u.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};

// @fileRef excanvas.js 
if(!document.createElement('canvas').getContext){(function(){var m=Math;var mr=m.round;var ms=m.sin;var mc=m.cos;var abs=m.abs;var sqrt=m.sqrt;var Z=10;var Z2=Z/2;var IE_VERSION=+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1];function getContext(){return this.context_||(this.context_=new CanvasRenderingContext2D_(this));}
var slice=Array.prototype.slice;function bind(f,obj,var_args){var a=slice.call(arguments,2);return function(){return f.apply(obj,a.concat(slice.call(arguments)));};}
function encodeHtmlAttribute(s){return String(s).replace(/&/g,'&amp;').replace(/"/g,'&quot;');}
function addNamespace(doc,prefix,urn){if(!doc.namespaces[prefix]){doc.namespaces.add(prefix,urn,'#default#VML');}}
function addNamespacesAndStylesheet(doc){addNamespace(doc,'g_vml_','urn:schemas-microsoft-com:vml');addNamespace(doc,'g_o_','urn:schemas-microsoft-com:office:office');if(!doc.styleSheets['ex_canvas_']){var ss=doc.createStyleSheet();ss.owningElement.id='ex_canvas_';ss.cssText='canvas{display:inline-block;overflow:hidden;'+'text-align:left;width:300px;height:150px}';}}
addNamespacesAndStylesheet(document);var G_vmlCanvasManager_={init:function(opt_doc){var doc=opt_doc||document;doc.createElement('canvas');doc.attachEvent('onreadystatechange',bind(this.init_,this,doc));},init_:function(doc){var els=doc.getElementsByTagName('canvas');for(var i=0;i<els.length;i++){this.initElement(els[i]);}},initElement:function(el){if(!el.getContext){el.getContext=getContext;addNamespacesAndStylesheet(el.ownerDocument);el.innerHTML='';el.attachEvent('onpropertychange',onPropertyChange);el.attachEvent('onresize',onResize);var attrs=el.attributes;if(attrs.width&&attrs.width.specified){el.style.width=attrs.width.nodeValue+'px';}else{el.width=el.clientWidth;}
if(attrs.height&&attrs.height.specified){el.style.height=attrs.height.nodeValue+'px';}else{el.height=el.clientHeight;}}
return el;}};function onPropertyChange(e){var el=e.srcElement;switch(e.propertyName){case'width':el.getContext().clearRect();el.style.width=el.attributes.width.nodeValue+'px';el.firstChild.style.width=el.clientWidth+'px';break;case'height':el.getContext().clearRect();el.style.height=el.attributes.height.nodeValue+'px';el.firstChild.style.height=el.clientHeight+'px';break;}}
function onResize(e){var el=e.srcElement;if(el.firstChild){el.firstChild.style.width=el.clientWidth+'px';el.firstChild.style.height=el.clientHeight+'px';}}
G_vmlCanvasManager_.init();var decToHex=[];for(var i=0;i<16;i++){for(var j=0;j<16;j++){decToHex[i*16+j]=i.toString(16)+j.toString(16);}}
function createMatrixIdentity(){return[[1,0,0],[0,1,0],[0,0,1]];}
function matrixMultiply(m1,m2){var result=createMatrixIdentity();for(var x=0;x<3;x++){for(var y=0;y<3;y++){var sum=0;for(var z=0;z<3;z++){sum+=m1[x][z]*m2[z][y];}
result[x][y]=sum;}}
return result;}
function copyState(o1,o2){o2.fillStyle=o1.fillStyle;o2.lineCap=o1.lineCap;o2.lineJoin=o1.lineJoin;o2.lineWidth=o1.lineWidth;o2.miterLimit=o1.miterLimit;o2.shadowBlur=o1.shadowBlur;o2.shadowColor=o1.shadowColor;o2.shadowOffsetX=o1.shadowOffsetX;o2.shadowOffsetY=o1.shadowOffsetY;o2.strokeStyle=o1.strokeStyle;o2.globalAlpha=o1.globalAlpha;o2.font=o1.font;o2.textAlign=o1.textAlign;o2.textBaseline=o1.textBaseline;o2.arcScaleX_=o1.arcScaleX_;o2.arcScaleY_=o1.arcScaleY_;o2.lineScale_=o1.lineScale_;}
var colorData={aliceblue:'#F0F8FF',antiquewhite:'#FAEBD7',aquamarine:'#7FFFD4',azure:'#F0FFFF',beige:'#F5F5DC',bisque:'#FFE4C4',black:'#000000',blanchedalmond:'#FFEBCD',blueviolet:'#8A2BE2',brown:'#A52A2A',burlywood:'#DEB887',cadetblue:'#5F9EA0',chartreuse:'#7FFF00',chocolate:'#D2691E',coral:'#FF7F50',cornflowerblue:'#6495ED',cornsilk:'#FFF8DC',crimson:'#DC143C',cyan:'#00FFFF',darkblue:'#00008B',darkcyan:'#008B8B',darkgoldenrod:'#B8860B',darkgray:'#A9A9A9',darkgreen:'#006400',darkgrey:'#A9A9A9',darkkhaki:'#BDB76B',darkmagenta:'#8B008B',darkolivegreen:'#556B2F',darkorange:'#FF8C00',darkorchid:'#9932CC',darkred:'#8B0000',darksalmon:'#E9967A',darkseagreen:'#8FBC8F',darkslateblue:'#483D8B',darkslategray:'#2F4F4F',darkslategrey:'#2F4F4F',darkturquoise:'#00CED1',darkviolet:'#9400D3',deeppink:'#FF1493',deepskyblue:'#00BFFF',dimgray:'#696969',dimgrey:'#696969',dodgerblue:'#1E90FF',firebrick:'#B22222',floralwhite:'#FFFAF0',forestgreen:'#228B22',gainsboro:'#DCDCDC',ghostwhite:'#F8F8FF',gold:'#FFD700',goldenrod:'#DAA520',grey:'#808080',greenyellow:'#ADFF2F',honeydew:'#F0FFF0',hotpink:'#FF69B4',indianred:'#CD5C5C',indigo:'#4B0082',ivory:'#FFFFF0',khaki:'#F0E68C',lavender:'#E6E6FA',lavenderblush:'#FFF0F5',lawngreen:'#7CFC00',lemonchiffon:'#FFFACD',lightblue:'#ADD8E6',lightcoral:'#F08080',lightcyan:'#E0FFFF',lightgoldenrodyellow:'#FAFAD2',lightgreen:'#90EE90',lightgrey:'#D3D3D3',lightpink:'#FFB6C1',lightsalmon:'#FFA07A',lightseagreen:'#20B2AA',lightskyblue:'#87CEFA',lightslategray:'#778899',lightslategrey:'#778899',lightsteelblue:'#B0C4DE',lightyellow:'#FFFFE0',limegreen:'#32CD32',linen:'#FAF0E6',magenta:'#FF00FF',mediumaquamarine:'#66CDAA',mediumblue:'#0000CD',mediumorchid:'#BA55D3',mediumpurple:'#9370DB',mediumseagreen:'#3CB371',mediumslateblue:'#7B68EE',mediumspringgreen:'#00FA9A',mediumturquoise:'#48D1CC',mediumvioletred:'#C71585',midnightblue:'#191970',mintcream:'#F5FFFA',mistyrose:'#FFE4E1',moccasin:'#FFE4B5',navajowhite:'#FFDEAD',oldlace:'#FDF5E6',olivedrab:'#6B8E23',orange:'#FFA500',orangered:'#FF4500',orchid:'#DA70D6',palegoldenrod:'#EEE8AA',palegreen:'#98FB98',paleturquoise:'#AFEEEE',palevioletred:'#DB7093',papayawhip:'#FFEFD5',peachpuff:'#FFDAB9',peru:'#CD853F',pink:'#FFC0CB',plum:'#DDA0DD',powderblue:'#B0E0E6',rosybrown:'#BC8F8F',royalblue:'#4169E1',saddlebrown:'#8B4513',salmon:'#FA8072',sandybrown:'#F4A460',seagreen:'#2E8B57',seashell:'#FFF5EE',sienna:'#A0522D',skyblue:'#87CEEB',slateblue:'#6A5ACD',slategray:'#708090',slategrey:'#708090',snow:'#FFFAFA',springgreen:'#00FF7F',steelblue:'#4682B4',tan:'#D2B48C',thistle:'#D8BFD8',tomato:'#FF6347',turquoise:'#40E0D0',violet:'#EE82EE',wheat:'#F5DEB3',whitesmoke:'#F5F5F5',yellowgreen:'#9ACD32'};function getRgbHslContent(styleString){var start=styleString.indexOf('(',3);var end=styleString.indexOf(')',start+1);var parts=styleString.substring(start+1,end).split(',');if(parts.length!=4||styleString.charAt(3)!='a'){parts[3]=1;}
return parts;}
function percent(s){return parseFloat(s)/100;}
function clamp(v,min,max){return Math.min(max,Math.max(min,v));}
function hslToRgb(parts){var r,g,b,h,s,l;h=parseFloat(parts[0])/360%360;if(h<0)
h++;s=clamp(percent(parts[1]),0,1);l=clamp(percent(parts[2]),0,1);if(s==0){r=g=b=l;}else{var q=l<0.5?l*(1+s):l+s-l*s;var p=2*l-q;r=hueToRgb(p,q,h+1/3);g=hueToRgb(p,q,h);b=hueToRgb(p,q,h-1/3);}
return'#'+decToHex[Math.floor(r*255)]+
decToHex[Math.floor(g*255)]+
decToHex[Math.floor(b*255)];}
function hueToRgb(m1,m2,h){if(h<0)
h++;if(h>1)
h--;if(6*h<1)
return m1+(m2-m1)*6*h;else if(2*h<1)
return m2;else if(3*h<2)
return m1+(m2-m1)*(2/3-h)*6;else
return m1;}
var processStyleCache={};function processStyle(styleString){if(styleString in processStyleCache){return processStyleCache[styleString];}
var str,alpha=1;styleString=String(styleString);if(styleString.charAt(0)=='#'){str=styleString;}else if(/^rgb/.test(styleString)){var parts=getRgbHslContent(styleString);var str='#',n;for(var i=0;i<3;i++){if(parts[i].indexOf('%')!=-1){n=Math.floor(percent(parts[i])*255);}else{n=+parts[i];}
str+=decToHex[clamp(n,0,255)];}
alpha=+parts[3];}else if(/^hsl/.test(styleString)){var parts=getRgbHslContent(styleString);str=hslToRgb(parts);alpha=parts[3];}else{str=colorData[styleString]||styleString;}
return processStyleCache[styleString]={color:str,alpha:alpha};}
var DEFAULT_STYLE={style:'normal',variant:'normal',weight:'normal',size:10,family:'sans-serif'};var fontStyleCache={};function processFontStyle(styleString){if(fontStyleCache[styleString]){return fontStyleCache[styleString];}
var el=document.createElement('div');var style=el.style;try{style.font=styleString;}catch(ex){}
return fontStyleCache[styleString]={style:style.fontStyle||DEFAULT_STYLE.style,variant:style.fontVariant||DEFAULT_STYLE.variant,weight:style.fontWeight||DEFAULT_STYLE.weight,size:style.fontSize||DEFAULT_STYLE.size,family:style.fontFamily||DEFAULT_STYLE.family};}
function getComputedStyle(style,element){var computedStyle={};for(var p in style){computedStyle[p]=style[p];}
var canvasFontSize=parseFloat(element.currentStyle.fontSize),fontSize=parseFloat(style.size);if(typeof style.size=='number'){computedStyle.size=style.size;}else if(style.size.indexOf('px')!=-1){computedStyle.size=fontSize;}else if(style.size.indexOf('em')!=-1){computedStyle.size=canvasFontSize*fontSize;}else if(style.size.indexOf('%')!=-1){computedStyle.size=(canvasFontSize/100)*fontSize;}else if(style.size.indexOf('pt')!=-1){computedStyle.size=fontSize/.75;}else{computedStyle.size=canvasFontSize;}
computedStyle.size*=0.981;return computedStyle;}
function buildStyle(style){return style.style+' '+style.variant+' '+style.weight+' '+
style.size+'px '+style.family;}
var lineCapMap={'butt':'flat','round':'round'};function processLineCap(lineCap){return lineCapMap[lineCap]||'square';}
function CanvasRenderingContext2D_(canvasElement){this.m_=createMatrixIdentity();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle='#000';this.fillStyle='#000';this.lineWidth=1;this.lineJoin='miter';this.lineCap='butt';this.miterLimit=Z*1;this.globalAlpha=1;this.font='10px sans-serif';this.textAlign='left';this.textBaseline='alphabetic';this.canvas=canvasElement;var cssText='width:'+canvasElement.clientWidth+'px;height:'+
canvasElement.clientHeight+'px;overflow:hidden;position:absolute';var el=canvasElement.ownerDocument.createElement('div');el.style.cssText=cssText;canvasElement.appendChild(el);var overlayEl=el.cloneNode(false);overlayEl.style.backgroundColor='red';overlayEl.style.filter='alpha(opacity=0)';canvasElement.appendChild(overlayEl);this.element_=el;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1;}
var contextPrototype=CanvasRenderingContext2D_.prototype;contextPrototype.clearRect=function(){if(this.textMeasureEl_){this.textMeasureEl_.removeNode(true);this.textMeasureEl_=null;}
this.element_.innerHTML='';};contextPrototype.beginPath=function(){this.currentPath_=[];};contextPrototype.moveTo=function(aX,aY){var p=getCoords(this,aX,aY);this.currentPath_.push({type:'moveTo',x:p.x,y:p.y});this.currentX_=p.x;this.currentY_=p.y;};contextPrototype.lineTo=function(aX,aY){var p=getCoords(this,aX,aY);this.currentPath_.push({type:'lineTo',x:p.x,y:p.y});this.currentX_=p.x;this.currentY_=p.y;};contextPrototype.bezierCurveTo=function(aCP1x,aCP1y,aCP2x,aCP2y,aX,aY){var p=getCoords(this,aX,aY);var cp1=getCoords(this,aCP1x,aCP1y);var cp2=getCoords(this,aCP2x,aCP2y);bezierCurveTo(this,cp1,cp2,p);};function bezierCurveTo(self,cp1,cp2,p){self.currentPath_.push({type:'bezierCurveTo',cp1x:cp1.x,cp1y:cp1.y,cp2x:cp2.x,cp2y:cp2.y,x:p.x,y:p.y});self.currentX_=p.x;self.currentY_=p.y;}
contextPrototype.quadraticCurveTo=function(aCPx,aCPy,aX,aY){var cp=getCoords(this,aCPx,aCPy);var p=getCoords(this,aX,aY);var cp1={x:this.currentX_+2.0/3.0*(cp.x-this.currentX_),y:this.currentY_+2.0/3.0*(cp.y-this.currentY_)};var cp2={x:cp1.x+(p.x-this.currentX_)/3.0,y:cp1.y+(p.y-this.currentY_)/3.0};bezierCurveTo(this,cp1,cp2,p);};contextPrototype.arc=function(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise){aRadius*=Z;var arcType=aClockwise?'at':'wa';var xStart=aX+mc(aStartAngle)*aRadius-Z2;var yStart=aY+ms(aStartAngle)*aRadius-Z2;var xEnd=aX+mc(aEndAngle)*aRadius-Z2;var yEnd=aY+ms(aEndAngle)*aRadius-Z2;if(xStart==xEnd&&!aClockwise){xStart+=0.125;}
var p=getCoords(this,aX,aY);var pStart=getCoords(this,xStart,yStart);var pEnd=getCoords(this,xEnd,yEnd);this.currentPath_.push({type:arcType,x:p.x,y:p.y,radius:aRadius,xStart:pStart.x,yStart:pStart.y,xEnd:pEnd.x,yEnd:pEnd.y});};contextPrototype.rect=function(aX,aY,aWidth,aHeight){this.moveTo(aX,aY);this.lineTo(aX+aWidth,aY);this.lineTo(aX+aWidth,aY+aHeight);this.lineTo(aX,aY+aHeight);this.closePath();};contextPrototype.strokeRect=function(aX,aY,aWidth,aHeight){var oldPath=this.currentPath_;this.beginPath();this.moveTo(aX,aY);this.lineTo(aX+aWidth,aY);this.lineTo(aX+aWidth,aY+aHeight);this.lineTo(aX,aY+aHeight);this.closePath();this.stroke();this.currentPath_=oldPath;};contextPrototype.fillRect=function(aX,aY,aWidth,aHeight){var oldPath=this.currentPath_;this.beginPath();this.moveTo(aX,aY);this.lineTo(aX+aWidth,aY);this.lineTo(aX+aWidth,aY+aHeight);this.lineTo(aX,aY+aHeight);this.closePath();this.fill();this.currentPath_=oldPath;};contextPrototype.createLinearGradient=function(aX0,aY0,aX1,aY1){var gradient=new CanvasGradient_('gradient');gradient.x0_=aX0;gradient.y0_=aY0;gradient.x1_=aX1;gradient.y1_=aY1;return gradient;};contextPrototype.createRadialGradient=function(aX0,aY0,aR0,aX1,aY1,aR1){var gradient=new CanvasGradient_('gradientradial');gradient.x0_=aX0;gradient.y0_=aY0;gradient.r0_=aR0;gradient.x1_=aX1;gradient.y1_=aY1;gradient.r1_=aR1;return gradient;};contextPrototype.drawImage=function(image,var_args){var dx,dy,dw,dh,sx,sy,sw,sh;var oldRuntimeWidth=image.runtimeStyle.width;var oldRuntimeHeight=image.runtimeStyle.height;image.runtimeStyle.width='auto';image.runtimeStyle.height='auto';var w=image.width;var h=image.height;image.runtimeStyle.width=oldRuntimeWidth;image.runtimeStyle.height=oldRuntimeHeight;if(arguments.length==3){dx=arguments[1];dy=arguments[2];sx=sy=0;sw=dw=w;sh=dh=h;}else if(arguments.length==5){dx=arguments[1];dy=arguments[2];dw=arguments[3];dh=arguments[4];sx=sy=0;sw=w;sh=h;}else if(arguments.length==9){sx=arguments[1];sy=arguments[2];sw=arguments[3];sh=arguments[4];dx=arguments[5];dy=arguments[6];dw=arguments[7];dh=arguments[8];}else{throw Error('Invalid number of arguments');}
var d=getCoords(this,dx,dy);var w2=sw/2;var h2=sh/2;var vmlStr=[];var W=10;var H=10;vmlStr.push(' <g_vml_:group',' coordsize="',Z*W,',',Z*H,'"',' coordorigin="0,0"',' style="width:',W,'px;height:',H,'px;position:absolute;');if(this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var filter=[];filter.push('M11=',this.m_[0][0],',','M12=',this.m_[1][0],',','M21=',this.m_[0][1],',','M22=',this.m_[1][1],',','Dx=',mr(d.x/Z),',','Dy=',mr(d.y/Z),'');var max=d;var c2=getCoords(this,dx+dw,dy);var c3=getCoords(this,dx,dy+dh);var c4=getCoords(this,dx+dw,dy+dh);max.x=m.max(max.x,c2.x,c3.x,c4.x);max.y=m.max(max.y,c2.y,c3.y,c4.y);vmlStr.push('padding:0 ',mr(max.x/Z),'px ',mr(max.y/Z),'px 0;filter:progid:DXImageTransform.Microsoft.Matrix(',filter.join(''),", sizingmethod='clip');");}else{vmlStr.push('top:',mr(d.y/Z),'px;left:',mr(d.x/Z),'px;');}
vmlStr.push(' ">','<g_vml_:image src="',image.src,'"',' style="width:',Z*dw,'px;',' height:',Z*dh,'px"',' cropleft="',sx/w,'"',' croptop="',sy/h,'"',' cropright="',(w-sx-sw)/w,'"',' cropbottom="',(h-sy-sh)/h,'"',' />','</g_vml_:group>');this.element_.insertAdjacentHTML('BeforeEnd',vmlStr.join(''));};contextPrototype.stroke=function(aFill){var W=10;var H=10;var chunkSize=5000;var min={x:null,y:null};var max={x:null,y:null};for(var j=0;j<this.currentPath_.length;j+=chunkSize){var lineStr=[];var lineOpen=false;lineStr.push('<g_vml_:shape',' filled="',!!aFill,'"',' style="position:absolute;width:',W,'px;height:',H,'px;"',' coordorigin="0,0"',' coordsize="',Z*W,',',Z*H,'"',' stroked="',!aFill,'"',' path="');var newSeq=false;for(var i=j;i<Math.min(j+chunkSize,this.currentPath_.length);i++){if(i%chunkSize==0&&i>0){lineStr.push(' m ',mr(this.currentPath_[i-1].x),',',mr(this.currentPath_[i-1].y));}
var p=this.currentPath_[i];var c;switch(p.type){case'moveTo':c=p;lineStr.push(' m ',mr(p.x),',',mr(p.y));break;case'lineTo':lineStr.push(' l ',mr(p.x),',',mr(p.y));break;case'close':lineStr.push(' x ');p=null;break;case'bezierCurveTo':lineStr.push(' c ',mr(p.cp1x),',',mr(p.cp1y),',',mr(p.cp2x),',',mr(p.cp2y),',',mr(p.x),',',mr(p.y));break;case'at':case'wa':lineStr.push(' ',p.type,' ',mr(p.x-this.arcScaleX_*p.radius),',',mr(p.y-this.arcScaleY_*p.radius),' ',mr(p.x+this.arcScaleX_*p.radius),',',mr(p.y+this.arcScaleY_*p.radius),' ',mr(p.xStart),',',mr(p.yStart),' ',mr(p.xEnd),',',mr(p.yEnd));break;}
if(p){if(min.x==null||p.x<min.x){min.x=p.x;}
if(max.x==null||p.x>max.x){max.x=p.x;}
if(min.y==null||p.y<min.y){min.y=p.y;}
if(max.y==null||p.y>max.y){max.y=p.y;}}}
lineStr.push(' ">');if(!aFill){appendStroke(this,lineStr);}else{appendFill(this,lineStr,min,max);}
lineStr.push('</g_vml_:shape>');this.element_.insertAdjacentHTML('beforeEnd',lineStr.join(''));}};function appendStroke(ctx,lineStr){var a=processStyle(ctx.strokeStyle);var color=a.color;var opacity=a.alpha*ctx.globalAlpha;var lineWidth=ctx.lineScale_*ctx.lineWidth;if(lineWidth<1){opacity*=lineWidth;}
lineStr.push('<g_vml_:stroke',' opacity="',opacity,'"',' joinstyle="',ctx.lineJoin,'"',' miterlimit="',ctx.miterLimit,'"',' endcap="',processLineCap(ctx.lineCap),'"',' weight="',lineWidth,'px"',' color="',color,'" />');}
function appendFill(ctx,lineStr,min,max){var fillStyle=ctx.fillStyle;var arcScaleX=ctx.arcScaleX_;var arcScaleY=ctx.arcScaleY_;var width=max.x-min.x;var height=max.y-min.y;if(fillStyle instanceof CanvasGradient_){var angle=0;var focus={x:0,y:0};var shift=0;var expansion=1;if(fillStyle.type_=='gradient'){var x0=fillStyle.x0_/arcScaleX;var y0=fillStyle.y0_/arcScaleY;var x1=fillStyle.x1_/arcScaleX;var y1=fillStyle.y1_/arcScaleY;var p0=getCoords(ctx,x0,y0);var p1=getCoords(ctx,x1,y1);var dx=p1.x-p0.x;var dy=p1.y-p0.y;angle=Math.atan2(dx,dy)*180/Math.PI;if(angle<0){angle+=360;}
if(angle<1e-6){angle=0;}}else{var p0=getCoords(ctx,fillStyle.x0_,fillStyle.y0_);focus={x:(p0.x-min.x)/width,y:(p0.y-min.y)/height};width/=arcScaleX*Z;height/=arcScaleY*Z;var dimension=m.max(width,height);shift=2*fillStyle.r0_/dimension;expansion=2*fillStyle.r1_/dimension-shift;}
var stops=fillStyle.colors_;stops.sort(function(cs1,cs2){return cs1.offset-cs2.offset;});var length=stops.length;var color1=stops[0].color;var color2=stops[length-1].color;var opacity1=stops[0].alpha*ctx.globalAlpha;var opacity2=stops[length-1].alpha*ctx.globalAlpha;var colors=[];for(var i=0;i<length;i++){var stop=stops[i];colors.push(stop.offset*expansion+shift+' '+stop.color);}
lineStr.push('<g_vml_:fill type="',fillStyle.type_,'"',' method="none" focus="100%"',' color="',color1,'"',' color2="',color2,'"',' colors="',colors.join(','),'"',' opacity="',opacity2,'"',' g_o_:opacity2="',opacity1,'"',' angle="',angle,'"',' focusposition="',focus.x,',',focus.y,'" />');}else if(fillStyle instanceof CanvasPattern_){if(width&&height){var deltaLeft=-min.x;var deltaTop=-min.y;lineStr.push('<g_vml_:fill',' position="',deltaLeft/width*arcScaleX*arcScaleX,',',deltaTop/height*arcScaleY*arcScaleY,'"',' type="tile"',' src="',fillStyle.src_,'" />');}}else{var a=processStyle(ctx.fillStyle);var color=a.color;var opacity=a.alpha*ctx.globalAlpha;lineStr.push('<g_vml_:fill color="',color,'" opacity="',opacity,'" />');}}
contextPrototype.fill=function(){this.stroke(true);};contextPrototype.closePath=function(){this.currentPath_.push({type:'close'});};function getCoords(ctx,aX,aY){var m=ctx.m_;return{x:Z*(aX*m[0][0]+aY*m[1][0]+m[2][0])-Z2,y:Z*(aX*m[0][1]+aY*m[1][1]+m[2][1])-Z2};};contextPrototype.save=function(){var o={};copyState(this,o);this.aStack_.push(o);this.mStack_.push(this.m_);this.m_=matrixMultiply(createMatrixIdentity(),this.m_);};contextPrototype.restore=function(){if(this.aStack_.length){copyState(this.aStack_.pop(),this);this.m_=this.mStack_.pop();}};function matrixIsFinite(m){return isFinite(m[0][0])&&isFinite(m[0][1])&&isFinite(m[1][0])&&isFinite(m[1][1])&&isFinite(m[2][0])&&isFinite(m[2][1]);}
function setM(ctx,m,updateLineScale){if(!matrixIsFinite(m)){return;}
ctx.m_=m;if(updateLineScale){var det=m[0][0]*m[1][1]-m[0][1]*m[1][0];ctx.lineScale_=sqrt(abs(det));}}
contextPrototype.translate=function(aX,aY){var m1=[[1,0,0],[0,1,0],[aX,aY,1]];setM(this,matrixMultiply(m1,this.m_),false);};contextPrototype.rotate=function(aRot){var c=mc(aRot);var s=ms(aRot);var m1=[[c,s,0],[-s,c,0],[0,0,1]];setM(this,matrixMultiply(m1,this.m_),false);};contextPrototype.scale=function(aX,aY){this.arcScaleX_*=aX;this.arcScaleY_*=aY;var m1=[[aX,0,0],[0,aY,0],[0,0,1]];setM(this,matrixMultiply(m1,this.m_),true);};contextPrototype.transform=function(m11,m12,m21,m22,dx,dy){var m1=[[m11,m12,0],[m21,m22,0],[dx,dy,1]];setM(this,matrixMultiply(m1,this.m_),true);};contextPrototype.setTransform=function(m11,m12,m21,m22,dx,dy){var m=[[m11,m12,0],[m21,m22,0],[dx,dy,1]];setM(this,m,true);};contextPrototype.drawText_=function(text,x,y,maxWidth,stroke){var m=this.m_,delta=1000,left=0,right=delta,offset={x:0,y:0},lineStr=[];var fontStyle=getComputedStyle(processFontStyle(this.font),this.element_);var fontStyleString=buildStyle(fontStyle);var elementStyle=this.element_.currentStyle;var textAlign=this.textAlign.toLowerCase();switch(textAlign){case'left':case'center':case'right':break;case'end':textAlign=elementStyle.direction=='ltr'?'right':'left';break;case'start':textAlign=elementStyle.direction=='rtl'?'right':'left';break;default:textAlign='left';}
switch(this.textBaseline){case'hanging':case'top':offset.y=fontStyle.size/1.75;break;case'middle':break;default:case null:case'alphabetic':case'ideographic':case'bottom':offset.y=-fontStyle.size/2.25;break;}
switch(textAlign){case'right':left=delta;right=0.05;break;case'center':left=right=delta/2;break;}
var d=getCoords(this,x+offset.x,y+offset.y);lineStr.push('<g_vml_:line from="',-left,' 0" to="',right,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!stroke,'" stroked="',!!stroke,'" style="position:absolute;width:1px;height:1px;">');if(stroke){appendStroke(this,lineStr);}else{appendFill(this,lineStr,{x:-left,y:0},{x:right,y:fontStyle.size});}
var skewM=m[0][0].toFixed(3)+','+m[1][0].toFixed(3)+','+
m[0][1].toFixed(3)+','+m[1][1].toFixed(3)+',0,0';var skewOffset=mr(d.x/Z)+','+mr(d.y/Z);lineStr.push('<g_vml_:skew on="t" matrix="',skewM,'" ',' offset="',skewOffset,'" origin="',left,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',encodeHtmlAttribute(text),'" style="v-text-align:',textAlign,';font:',encodeHtmlAttribute(fontStyleString),'" /></g_vml_:line>');this.element_.insertAdjacentHTML('beforeEnd',lineStr.join(''));};contextPrototype.fillText=function(text,x,y,maxWidth){this.drawText_(text,x,y,maxWidth,false);};contextPrototype.strokeText=function(text,x,y,maxWidth){this.drawText_(text,x,y,maxWidth,true);};contextPrototype.measureText=function(text){if(!this.textMeasureEl_){var s='<span style="position:absolute;'+'top:-20000px;left:0;padding:0;margin:0;border:none;'+'white-space:pre;"></span>';this.element_.insertAdjacentHTML('beforeEnd',s);this.textMeasureEl_=this.element_.lastChild;}
var doc=this.element_.ownerDocument;this.textMeasureEl_.innerHTML='';this.textMeasureEl_.style.font=this.font;this.textMeasureEl_.appendChild(doc.createTextNode(text));return{width:this.textMeasureEl_.offsetWidth};};contextPrototype.clip=function(){};contextPrototype.arcTo=function(){};contextPrototype.createPattern=function(image,repetition){return new CanvasPattern_(image,repetition);};function CanvasGradient_(aType){this.type_=aType;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[];}
CanvasGradient_.prototype.addColorStop=function(aOffset,aColor){aColor=processStyle(aColor);this.colors_.push({offset:aOffset,color:aColor.color,alpha:aColor.alpha});};function CanvasPattern_(image,repetition){assertImageIsValid(image);switch(repetition){case'repeat':case null:case'':this.repetition_='repeat';break
case'repeat-x':case'repeat-y':case'no-repeat':this.repetition_=repetition;break;default:throwException('SYNTAX_ERR');}
this.src_=image.src;this.width_=image.width;this.height_=image.height;}
function throwException(s){throw new DOMException_(s);}
function assertImageIsValid(img){if(!img||img.nodeType!=1||img.tagName!='IMG'){throwException('TYPE_MISMATCH_ERR');}
if(img.readyState!='complete'){throwException('INVALID_STATE_ERR');}}
function DOMException_(s){this.code=this[s];this.message=s+': DOM Exception '+this.code;}
var p=DOMException_.prototype=new Error;p.INDEX_SIZE_ERR=1;p.DOMSTRING_SIZE_ERR=2;p.HIERARCHY_REQUEST_ERR=3;p.WRONG_DOCUMENT_ERR=4;p.INVALID_CHARACTER_ERR=5;p.NO_DATA_ALLOWED_ERR=6;p.NO_MODIFICATION_ALLOWED_ERR=7;p.NOT_FOUND_ERR=8;p.NOT_SUPPORTED_ERR=9;p.INUSE_ATTRIBUTE_ERR=10;p.INVALID_STATE_ERR=11;p.SYNTAX_ERR=12;p.INVALID_MODIFICATION_ERR=13;p.NAMESPACE_ERR=14;p.INVALID_ACCESS_ERR=15;p.VALIDATION_ERR=16;p.TYPE_MISMATCH_ERR=17;G_vmlCanvasManager=G_vmlCanvasManager_;CanvasRenderingContext2D=CanvasRenderingContext2D_;CanvasGradient=CanvasGradient_;CanvasPattern=CanvasPattern_;DOMException=DOMException_;})();}

// @fileRef breakpoints.js 
(function($){var lastSize=0;var interval=null;$.fn.resetBreakpoints=function(){$(window).unbind('resize');if(interval){clearInterval(interval);}
lastSize=0;};$.fn.setBreakpoints=function(settings){var options=jQuery.extend({distinct:true,breakpoints:new Array(320,480,768,1024)},settings);interval=setInterval(function(){var w=$(window).width();var done=false;for(var bp in options.breakpoints.sort(function(a,b){return(b-a)})){if(!done&&w>=options.breakpoints[bp]&&lastSize<options.breakpoints[bp]){if(options.distinct){for(var x in options.breakpoints.sort(function(a,b){return(b-a)})){if($('body').hasClass('breakpoint-'+options.breakpoints[x])){$('body').removeClass('breakpoint-'+options.breakpoints[x]);$(window).trigger('exitBreakpoint'+options.breakpoints[x]);}}
done=true;}
$('body').addClass('breakpoint-'+options.breakpoints[bp]);$(window).trigger('enterBreakpoint'+options.breakpoints[bp]);}
if(w<options.breakpoints[bp]&&lastSize>=options.breakpoints[bp]){$('body').removeClass('breakpoint-'+options.breakpoints[bp]);$(window).trigger('exitBreakpoint'+options.breakpoints[bp]);}
if(options.distinct&&w>=options.breakpoints[bp]&&w<options.breakpoints[bp-1]&&lastSize>w&&lastSize>0&&!$('body').hasClass('breakpoint-'+options.breakpoints[bp])){$('body').addClass('breakpoint-'+options.breakpoints[bp]);$(window).trigger('enterBreakpoint'+options.breakpoints[bp]);}}
if(lastSize!=w){lastSize=w;}},250);};})(jQuery);

// @fileRef preload.pace.init.js 
(function($)
{if($('html').is('.ie.lt-ie9'))
{$('.container-fluid').css('visibility','visible').show();$('.pace').hide();return;}
Pace.once('done',function()
{$('.container-fluid').css('visibility','visible').show();$(window).trigger('load');});})(jQuery);

// @fileRef sidebar.main.init.js 
(function($)
{if(!Modernizr.touch&&$('#menu').is(':visible'))
$('.container-fluid').removeClass('menu-hidden');if(Modernizr.touch)
$('#menu').removeClass('hidden-xs');window.toggleMenuHidden=function()
{if($('.menu-right-visible').length)
$('body').removeClass('menu-right-visible');$('.container-fluid').toggleClass('menu-hidden');$('body').toggleClass('menu-left-visible');$('#menu').removeClass('hidden-xs');resizeNiceScroll();}
$('.navbar.main .btn-navbar, #menu .btn-navbar').click(function()
{toggleMenuHidden();});$('[data-toggle="navbar-color"] a').on('click',function(e){e.preventDefault();if($(this).is('.active'))
return;if($(this).is('.color-white'))
$('.navbar.main').removeClass('navbar-inverse navbar-blue navbar-primary');if($(this).is('.bg-primary'))
{$('.navbar.main').removeClass('navbar-inverse navbar-blue').addClass('navbar-primary');$('#menu').addClass('sidebar-brand-primary');}
else
$('#menu').removeClass('sidebar-brand-primary');if($(this).is('.color-blue'))
{$('.navbar.main').removeClass('navbar-inverse navbar-primary').addClass('navbar-blue');$('#menu').addClass('sidebar-blue');$('html').addClass('layout-blue');}
if($(this).is('.color-inverse'))
{$('.navbar.main').removeClass('navbar-blue navbar-primary').addClass('navbar-inverse');$('#menu').removeClass('sidebar-blue');$('html').removeClass('layout-blue');}
$(this).parent().find('.active').removeClass('active');$(this).addClass('active');});if($('.sidebar-blue').length)
{$('html').addClass('layout-blue');$('.navbar.main').removeClass('navbar-inverse').addClass('navbar-blue');$('#toggleNavbarColor a.color').removeClass('active').find('.color-blue').addClass('active');}
if($('.sidebar-blue.sidebar-brand-primary').length)
{$('.navbar.main').removeClass('navbar-blue').addClass('navbar-primary');$('#toggleNavbarColor a.color').removeClass('active').find('.bg-primary').addClass('active');}})(jQuery);

// @fileRef sidebar.collapse.init.js 
(function($)
{$('ul.collapse').on('show.bs.collapse',function(e)
{e.stopPropagation();if($(this).closest('#menu').length)
{var t=$(this).parents('.hasSubmenu').length;if(t!=1)return;var a=$('#menu > div > ul > li.hasSubmenu.active > ul').not(this);a.removeClass('in').addClass('collapse').removeAttr('style').closest('.hasSubmenu.active').removeClass('active');}}).on('shown.bs.collapse',function(e)
{e.stopPropagation();if($(this).closest('#menu').length)
$('#menu *').getNiceScroll().resize();});$('#menu_switch').on('change',function(){var w=$(this).parents('#menu'),w_fusion=w.find('#sidebar-fusion-wrapper'),nav=$(this).val();if(w_fusion.length)
{w_fusion.find('> ul').addClass('hide');w_fusion.find('#'+nav).removeClass('hide');$('#menu *').getNiceScroll().resize();}});$('.btn-avatar [data-toggle="tab"]').on('show.bs.tab',function(e){e.stopPropagation();$('.btn-avatar [data-toggle="tab"]').parent().removeClass('active');});})(jQuery);

// @fileRef bootstrap-select.js 
!function($){'use strict';$.expr[':'].icontains=function(obj,index,meta){return $(obj).text().toUpperCase().indexOf(meta[3].toUpperCase())>=0;};var Selectpicker=function(element,options,e){if(e){e.stopPropagation();e.preventDefault();}
this.$element=$(element);this.$newElement=null;this.$button=null;this.$menu=null;this.options=$.extend({},$.fn.selectpicker.defaults,this.$element.data(),typeof options=='object'&&options);if(this.options.title===null){this.options.title=this.$element.attr('title');}
this.val=Selectpicker.prototype.val;this.render=Selectpicker.prototype.render;this.refresh=Selectpicker.prototype.refresh;this.setStyle=Selectpicker.prototype.setStyle;this.selectAll=Selectpicker.prototype.selectAll;this.deselectAll=Selectpicker.prototype.deselectAll;this.init();};Selectpicker.prototype={constructor:Selectpicker,init:function(){this.$element.hide();this.multiple=this.$element.prop('multiple');var id=this.$element.attr('id');this.$newElement=this.createView();this.$element.after(this.$newElement);this.$menu=this.$newElement.find('> .dropdown-menu');this.$button=this.$newElement.find('> button');this.$searchbox=this.$newElement.find('input');if(id!==undefined){var that=this;this.$button.attr('data-id',id);$('label[for="'+id+'"]').click(function(e){e.preventDefault();that.$button.focus();});}
this.checkDisabled();this.clickListener();if(this.options.liveSearch){this.liveSearchListener();}
this.render();this.liHeight();this.setStyle();this.setWidth();if(this.options.container){this.selectPosition();}
this.$menu.data('this',this);this.$newElement.data('this',this);},createDropdown:function(){var multiple=this.multiple?' show-tick':'';var header=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+'</div>':'';var searchbox=this.options.liveSearch?'<div class="bootstrap-select-searchbox"><input type="text" class="input-block-level form-control" /></div>':'';var drop='<div class="btn-group bootstrap-select'+multiple+'">'+'<button type="button" class="btn dropdown-toggle selectpicker" data-toggle="dropdown">'+'<span class="filter-option pull-left"></span>&nbsp;'+'<span class="caret"></span>'+'</button>'+'<div class="dropdown-menu open">'+
header+
searchbox+'<ul class="dropdown-menu inner selectpicker" role="menu">'+'</ul>'+'</div>'+'</div>';return $(drop);},createView:function(){var $drop=this.createDropdown();var $li=this.createLi();$drop.find('ul').append($li);return $drop;},reloadLi:function(){this.destroyLi();var $li=this.createLi();this.$menu.find('ul').append($li);},destroyLi:function(){this.$menu.find('li').remove();},createLi:function(){var that=this,_liA=[],_liHtml='';this.$element.find('option').each(function(){var $this=$(this);var optionClass=$this.attr('class')||'';var inline=$this.attr('style')||'';var text=$this.data('content')?$this.data('content'):$this.html();var subtext=$this.data('subtext')!==undefined?'<small class="muted text-muted">'+$this.data('subtext')+'</small>':'';var icon=$this.data('icon')!==undefined?'<i class="'+that.options.iconBase+' '+$this.data('icon')+'"></i> ':'';if(icon!==''&&($this.is(':disabled')||$this.parent().is(':disabled'))){icon='<span>'+icon+'</span>';}
if(!$this.data('content')){text=icon+'<span class="text">'+text+subtext+'</span>';}
if(that.options.hideDisabled&&($this.is(':disabled')||$this.parent().is(':disabled'))){_liA.push('<a style="min-height: 0; padding: 0"></a>');}else if($this.parent().is('optgroup')&&$this.data('divider')!==true){if($this.index()===0){var label=$this.parent().attr('label');var labelSubtext=$this.parent().data('subtext')!==undefined?'<small class="muted text-muted">'+$this.parent().data('subtext')+'</small>':'';var labelIcon=$this.parent().data('icon')?'<i class="'+$this.parent().data('icon')+'"></i> ':'';label=labelIcon+'<span class="text">'+label+labelSubtext+'</span>';if($this[0].index!==0){_liA.push('<div class="div-contain"><div class="divider"></div></div>'+'<dt>'+label+'</dt>'+
that.createA(text,'opt '+optionClass,inline));}else{_liA.push('<dt>'+label+'</dt>'+
that.createA(text,'opt '+optionClass,inline));}}else{_liA.push(that.createA(text,'opt '+optionClass,inline));}}else if($this.data('divider')===true){_liA.push('<div class="div-contain"><div class="divider"></div></div>');}else if($(this).data('hidden')===true){_liA.push('');}else{_liA.push(that.createA(text,optionClass,inline));}});$.each(_liA,function(i,item){_liHtml+='<li rel='+i+'>'+item+'</li>';});if(!this.multiple&&this.$element.find('option:selected').length===0&&!this.options.title){this.$element.find('option').eq(0).prop('selected',true).attr('selected','selected');}
return $(_liHtml);},createA:function(text,classes,inline){return'<a tabindex="0" class="'+classes+'" style="'+inline+'">'+
text+'<i class="'+this.options.iconBase+' '+this.options.tickIcon+' icon-ok check-mark"></i>'+'</a>';},render:function(){var that=this;this.$element.find('option').each(function(index){that.setDisabled(index,$(this).is(':disabled')||$(this).parent().is(':disabled'));that.setSelected(index,$(this).is(':selected'));});this.tabIndex();var selectedItems=this.$element.find('option:selected').map(function(){var $this=$(this);var icon=$this.data('icon')&&that.options.showIcon?'<i class="'+that.options.iconBase+' '+$this.data('icon')+'"></i> ':'';var subtext;if(that.options.showSubtext&&$this.attr('data-subtext')&&!that.multiple){subtext=' <small class="muted text-muted">'+$this.data('subtext')+'</small>';}else{subtext='';}
if($this.data('content')&&that.options.showContent){return $this.data('content');}else if($this.attr('title')!==undefined){return $this.attr('title');}else{return icon+$this.html()+subtext;}}).toArray();var title=!this.multiple?selectedItems[0]:selectedItems.join(this.options.multipleSeparator);if(this.multiple&&this.options.selectedTextFormat.indexOf('count')>-1){var max=this.options.selectedTextFormat.split('>');var notDisabled=this.options.hideDisabled?':not([disabled])':'';if((max.length>1&&selectedItems.length>max[1])||(max.length==1&&selectedItems.length>=2)){title=this.options.countSelectedText.replace('{0}',selectedItems.length).replace('{1}',this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])'+notDisabled).length);}}
if(!title){title=this.options.title!==undefined?this.options.title:this.options.noneSelectedText;}
this.$button.attr('title',$.trim(title));this.$newElement.find('.filter-option').html(title);},setStyle:function(style,status){if(this.$element.attr('class')){this.$newElement.addClass(this.$element.attr('class').replace(/selectpicker|mobile-device/gi,''));}
var buttonClass=style?style:this.options.style;if(status=='add'){this.$button.addClass(buttonClass);}else if(status=='remove'){this.$button.removeClass(buttonClass);}else{this.$button.removeClass(this.options.style);this.$button.addClass(buttonClass);}},liHeight:function(){var $selectClone=this.$menu.parent().clone().appendTo('body'),$menuClone=$selectClone.addClass('open').find('> .dropdown-menu'),liHeight=$menuClone.find('li > a').outerHeight(),headerHeight=this.options.header?$menuClone.find('.popover-title').outerHeight():0,searchHeight=this.options.liveSearch?$menuClone.find('.bootstrap-select-searchbox').outerHeight():0;$selectClone.remove();this.$newElement.data('liHeight',liHeight).data('headerHeight',headerHeight).data('searchHeight',searchHeight);},setSize:function(){var that=this,menu=this.$menu,menuInner=menu.find('.inner'),selectHeight=this.$newElement.outerHeight(),liHeight=this.$newElement.data('liHeight'),headerHeight=this.$newElement.data('headerHeight'),searchHeight=this.$newElement.data('searchHeight'),divHeight=menu.find('li .divider').outerHeight(true),menuPadding=parseInt(menu.css('padding-top'))+
parseInt(menu.css('padding-bottom'))+
parseInt(menu.css('border-top-width'))+
parseInt(menu.css('border-bottom-width')),notDisabled=this.options.hideDisabled?':not(.disabled)':'',$window=$(window),menuExtras=menuPadding+parseInt(menu.css('margin-top'))+parseInt(menu.css('margin-bottom'))+2,menuHeight,selectOffsetTop,selectOffsetBot,posVert=function(){selectOffsetTop=that.$newElement.offset().top-$window.scrollTop();selectOffsetBot=$window.height()-selectOffsetTop-selectHeight;};posVert();if(this.options.header)menu.css('padding-top',0);if(this.options.size=='auto'){var getSize=function(){var minHeight;posVert();menuHeight=selectOffsetBot-menuExtras;if(that.options.dropupAuto){that.$newElement.toggleClass('dropup',(selectOffsetTop>selectOffsetBot)&&((menuHeight-menuExtras)<menu.height()));}
if(that.$newElement.hasClass('dropup')){menuHeight=selectOffsetTop-menuExtras;}
if((menu.find('li').length+menu.find('dt').length)>3){minHeight=liHeight*3+menuExtras-2;}else{minHeight=0;}
menu.css({'max-height':menuHeight+'px','overflow':'hidden','min-height':minHeight+'px'});menuInner.css({'max-height':menuHeight-headerHeight-searchHeight-menuPadding+'px','overflow-y':'auto','min-height':minHeight-menuPadding+'px'});};getSize();$(window).resize(getSize);$(window).scroll(getSize);}else if(this.options.size&&this.options.size!='auto'&&menu.find('li'+notDisabled).length>this.options.size){var optIndex=menu.find('li'+notDisabled+' > *').filter(':not(.div-contain)').slice(0,this.options.size).last().parent().index();var divLength=menu.find('li').slice(0,optIndex+1).find('.div-contain').length;menuHeight=liHeight*this.options.size+divLength*divHeight+menuPadding;if(that.options.dropupAuto){this.$newElement.toggleClass('dropup',(selectOffsetTop>selectOffsetBot)&&(menuHeight<menu.height()));}
menu.css({'max-height':menuHeight+headerHeight+searchHeight+'px','overflow':'hidden'});menuInner.css({'max-height':menuHeight-menuPadding+'px','overflow-y':'auto'});}},setWidth:function(){if(this.options.width=='auto'){this.$menu.css('min-width','0');var selectClone=this.$newElement.clone().appendTo('body');var ulWidth=selectClone.find('> .dropdown-menu').css('width');selectClone.remove();this.$newElement.css('width',ulWidth);}else if(this.options.width=='fit'){this.$menu.css('min-width','');this.$newElement.css('width','').addClass('fit-width');}else if(this.options.width){this.$menu.css('min-width','');this.$newElement.css('width',this.options.width);}else{this.$menu.css('min-width','');this.$newElement.css('width','');}
if(this.$newElement.hasClass('fit-width')&&this.options.width!=='fit'){this.$newElement.removeClass('fit-width');}},selectPosition:function(){var that=this,drop='<div />',$drop=$(drop),pos,actualHeight,getPlacement=function($element){$drop.addClass($element.attr('class')).toggleClass('dropup',$element.hasClass('dropup'));pos=$element.offset();actualHeight=$element.hasClass('dropup')?0:$element[0].offsetHeight;$drop.css({'top':pos.top+actualHeight,'left':pos.left,'width':$element[0].offsetWidth,'position':'absolute'});};this.$newElement.on('click',function(){getPlacement($(this));$drop.appendTo(that.options.container);$drop.toggleClass('open',!$(this).hasClass('open'));$drop.append(that.$menu);});$(window).resize(function(){getPlacement(that.$newElement);});$(window).on('scroll',function(){getPlacement(that.$newElement);});$('html').on('click',function(e){if($(e.target).closest(that.$newElement).length<1){$drop.removeClass('open');}});},mobile:function(){this.$element.addClass('mobile-device').appendTo(this.$newElement);if(this.options.container)this.$menu.hide();},refresh:function(){this.reloadLi();this.render();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight();},update:function(){this.reloadLi();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight();},setSelected:function(index,selected){this.$menu.find('li').eq(index).toggleClass('selected',selected);},setDisabled:function(index,disabled){if(disabled){this.$menu.find('li').eq(index).addClass('disabled').find('a').attr('href','#').attr('tabindex',-1);}else{this.$menu.find('li').eq(index).removeClass('disabled').find('a').removeAttr('href').attr('tabindex',0);}},isDisabled:function(){return this.$element.is(':disabled');},checkDisabled:function(){var that=this;if(this.isDisabled()){this.$button.addClass('disabled').attr('tabindex',-1);}else{if(this.$button.hasClass('disabled')){this.$button.removeClass('disabled');}
if(this.$button.attr('tabindex')==-1){if(!this.$element.data('tabindex'))this.$button.removeAttr('tabindex');}}
this.$button.click(function(){return!that.isDisabled();});},tabIndex:function(){if(this.$element.is('[tabindex]')){this.$element.data('tabindex',this.$element.attr('tabindex'));this.$button.attr('tabindex',this.$element.data('tabindex'));}},clickListener:function(){var that=this;$('body').on('touchstart.dropdown','.dropdown-menu',function(e){e.stopPropagation();});this.$newElement.on('click',function(){that.setSize();if(!that.options.liveSearch&&!that.multiple){setTimeout(function(){that.$menu.find('.selected a').focus();},10);}});this.$menu.on('click','li a',function(e){var clickedIndex=$(this).parent().index(),prevValue=that.$element.val(),prevIndex=that.$element.prop('selectedIndex');if(that.multiple){e.stopPropagation();}
e.preventDefault();if(!that.isDisabled()&&!$(this).parent().hasClass('disabled')){var $options=that.$element.find('option');var $option=$options.eq(clickedIndex);if(!that.multiple){$options.prop('selected',false);$option.prop('selected',true);}
else{var state=$option.prop('selected');$option.prop('selected',!state);}
if(!that.multiple){that.$button.focus();}else if(that.options.liveSearch){that.$searchbox.focus();}
if((prevValue!=that.$element.val()&&that.multiple)||(prevIndex!=that.$element.prop('selectedIndex')&&!that.multiple)){that.$element.change();}}});this.$menu.on('click','li.disabled a, li dt, li .div-contain, .popover-title, .popover-title :not(.close)',function(e){if(e.target==this){e.preventDefault();e.stopPropagation();if(!that.options.liveSearch){that.$button.focus();}else{that.$searchbox.focus();}}});this.$menu.on('click','.popover-title .close',function(){that.$button.focus();});this.$searchbox.on('click',function(e){e.stopPropagation();});this.$element.change(function(){that.render();});},liveSearchListener:function(){var that=this,no_results=$('<li class="no-results"></li>');this.$newElement.on('click.dropdown.data-api',function(){that.$menu.find('.active').removeClass('active');if(!!that.$searchbox.val()){that.$searchbox.val('');that.$menu.find('li').show();if(!!no_results.parent().length)no_results.remove();}
if(!that.multiple)that.$menu.find('.selected').addClass('active');setTimeout(function(){that.$searchbox.focus();},10);});this.$searchbox.on('input propertychange',function(){if(that.$searchbox.val()){that.$menu.find('li').show().not(':icontains('+that.$searchbox.val()+')').hide();if(!that.$menu.find('li').filter(':visible:not(.no-results)').length){if(!!no_results.parent().length)no_results.remove();no_results.html('No results match "'+that.$searchbox.val()+'"').show();that.$menu.find('li').last().after(no_results);}else if(!!no_results.parent().length){no_results.remove();}}else{that.$menu.find('li').show();if(!!no_results.parent().length)no_results.remove();}
that.$menu.find('li.active').removeClass('active');that.$menu.find('li').filter(':visible:not(.divider)').eq(0).addClass('active').find('a').focus();$(this).focus();});this.$menu.on('mouseenter','a',function(e){that.$menu.find('.active').removeClass('active');$(e.currentTarget).parent().not('.disabled').addClass('active');});this.$menu.on('mouseleave','a',function(){that.$menu.find('.active').removeClass('active');});},val:function(value){if(value!==undefined){this.$element.val(value);this.$element.change();return this.$element;}else{return this.$element.val();}},selectAll:function(){this.$element.find('option').prop('selected',true).attr('selected','selected');this.render();},deselectAll:function(){this.$element.find('option').prop('selected',false).removeAttr('selected');this.render();},keydown:function(e){var $this,$items,$parent,index,next,first,last,prev,nextPrev,that,prevIndex,isActive,keyCodeMap={32:' ',48:'0',49:'1',50:'2',51:'3',52:'4',53:'5',54:'6',55:'7',56:'8',57:'9',59:';',65:'a',66:'b',67:'c',68:'d',69:'e',70:'f',71:'g',72:'h',73:'i',74:'j',75:'k',76:'l',77:'m',78:'n',79:'o',80:'p',81:'q',82:'r',83:'s',84:'t',85:'u',86:'v',87:'w',88:'x',89:'y',90:'z',96:'0',97:'1',98:'2',99:'3',100:'4',101:'5',102:'6',103:'7',104:'8',105:'9'};$this=$(this);$parent=$this.parent();if($this.is('input'))$parent=$this.parent().parent();that=$parent.data('this');if(that.options.liveSearch)$parent=$this.parent().parent();if(that.options.container)$parent=that.$menu;$items=$('[role=menu] li:not(.divider) a',$parent);isActive=that.$menu.parent().hasClass('open');if(that.options.liveSearch){if(/(^9$|27)/.test(e.keyCode)&&isActive&&that.$menu.find('.active').length===0){e.preventDefault();that.$menu.parent().removeClass('open');that.$button.focus();}
$items=$('[role=menu] li:not(.divider):visible',$parent);if(!$this.val()&&!/(38|40)/.test(e.keyCode)){if($items.filter('.active').length===0){$items=that.$newElement.find('li').filter(':icontains('+keyCodeMap[e.keyCode]+')');}}}
if(!$items.length)return;if(/(38|40)/.test(e.keyCode)){if(!isActive){that.$menu.parent().addClass('open');}
index=$items.index($items.filter(':focus'));first=$items.parent(':not(.disabled):visible').first().index();last=$items.parent(':not(.disabled):visible').last().index();next=$items.eq(index).parent().nextAll(':not(.disabled):visible').eq(0).index();prev=$items.eq(index).parent().prevAll(':not(.disabled):visible').eq(0).index();nextPrev=$items.eq(next).parent().prevAll(':not(.disabled):visible').eq(0).index();if(that.options.liveSearch){$items.each(function(i){if($(this).is(':not(.disabled)')){$(this).data('index',i);}});index=$items.index($items.filter('.active'));first=$items.filter(':not(.disabled):visible').first().data('index');last=$items.filter(':not(.disabled):visible').last().data('index');next=$items.eq(index).nextAll(':not(.disabled):visible').eq(0).data('index');prev=$items.eq(index).prevAll(':not(.disabled):visible').eq(0).data('index');nextPrev=$items.eq(next).prevAll(':not(.disabled):visible').eq(0).data('index');}
prevIndex=$this.data('prevIndex');if(e.keyCode==38){if(that.options.liveSearch)index-=1;if(index!=nextPrev&&index>prev)index=prev;if(index<first)index=first;if(index==prevIndex)index=last;}
if(e.keyCode==40){if(that.options.liveSearch)index+=1;if(index==-1)index=0;if(index!=nextPrev&&index<next)index=next;if(index>last)index=last;if(index==prevIndex)index=first;}
$this.data('prevIndex',index);if(!that.options.liveSearch){$items.eq(index).focus();}else{e.preventDefault();if(!$this.is('.dropdown-toggle')){$items.removeClass('active');$items.eq(index).addClass('active').find('a').focus();$this.focus();}}}else if(!$this.is('input')){var keyIndex=[],count,prevKey;$items.each(function(){if($(this).parent().is(':not(.disabled)')){if($.trim($(this).text().toLowerCase()).substring(0,1)==keyCodeMap[e.keyCode]){keyIndex.push($(this).parent().index());}}});count=$(document).data('keycount');count++;$(document).data('keycount',count);prevKey=$.trim($(':focus').text().toLowerCase()).substring(0,1);if(prevKey!=keyCodeMap[e.keyCode]){count=1;$(document).data('keycount',count);}else if(count>=keyIndex.length){$(document).data('keycount',0);if(count>keyIndex.length)count=1;}
$items.eq(keyIndex[count-1]).focus();}
if(/(13|32|^9$)/.test(e.keyCode)&&isActive){if(!/(32)/.test(e.keyCode))e.preventDefault();if(!that.options.liveSearch){$(':focus').click();}else if(!/(32)/.test(e.keyCode)){that.$menu.find('.active a').click();$this.focus();}
$(document).data('keycount',0);}
if((/(^9$|27)/.test(e.keyCode)&&isActive&&(that.multiple||that.options.liveSearch))||(/(27)/.test(e.keyCode)&&!isActive)){that.$menu.parent().removeClass('open');that.$button.focus();}},hide:function(){this.$newElement.hide();},show:function(){this.$newElement.show();},destroy:function(){this.$newElement.remove();this.$element.remove();}};$.fn.selectpicker=function(option,event){var args=arguments;var value;var chain=this.each(function(){if($(this).is('select')){var $this=$(this),data=$this.data('selectpicker'),options=typeof option=='object'&&option;if(!data){$this.data('selectpicker',(data=new Selectpicker(this,options,event)));}else if(options){for(var i in options){data.options[i]=options[i];}}
if(typeof option=='string'){var property=option;if(data[property]instanceof Function){[].shift.apply(args);value=data[property].apply(data,args);}else{value=data.options[property];}}}});if(value!==undefined){return value;}else{return chain;}};$.fn.selectpicker.defaults={style:'btn-default',size:'auto',title:null,selectedTextFormat:'values',noneSelectedText:'Nothing selected',countSelectedText:'{0} of {1} selected',width:false,container:false,hideDisabled:false,showSubtext:false,showIcon:true,showContent:true,dropupAuto:true,header:false,liveSearch:false,multipleSeparator:', ',iconBase:'glyphicon',tickIcon:'glyphicon-ok'};$(document).data('keycount',0).on('keydown','.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input',Selectpicker.prototype.keydown).on('focusin.modal','.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input',function(e){e.stopPropagation();});}(window.jQuery);

// @fileRef bootstrap-select.init.js 
(function($)
{$(window).on('load',function(){if($('.selectpicker').length)
$('.selectpicker').selectpicker();})})(jQuery);

// @fileRef sidebar.kis.init.js 
(function($)
{$('.btn-navbar-right').click(function(){$('body').toggleClass('menu-right-visible');if($('.container-fluid.menu-left-visible').length)
$('.container-fluid').addClass('menu-hidden').removeClass('menu-left-visible');resizeNiceScroll();});if($('.btn-navbar-right').length&&!$('#menu_kis').length)
$('.btn-navbar-right').parent().remove();$(window).on('load',function()
{if($('.menu-right-hidden').length)
{$('.btn-navbar-right').parent().removeClass('visible-xs');if(typeof sidebarKisInit!=='undefined')
return;$('#menu_kis').width(70);setTimeout(function(){$('#menu_kis').animate({right:'-70px'},function(){$(this).removeAttr('style');});},1000);}
window.sidebarKisInit=true;});})(jQuery);

// @fileRef bootstrap-switch.js 
!function($){"use strict";$.fn['bootstrapSwitch']=function(method){var inputSelector='input[type!="hidden"]';var methods={init:function(){return this.each(function(){var $element=$(this),$div,$switchLeft,$switchRight,$label,$form=$element.closest('form'),myClasses="",classes=$element.attr('class'),color,moving,onLabel="ON",offLabel="OFF",icon=false,textLabel=false;$.each(['switch-mini','switch-small','switch-large'],function(i,el){if(classes.indexOf(el)>=0)
myClasses=el;});$element.addClass('has-switch');if($element.data('on')!==undefined)
color="switch-"+$element.data('on');if($element.data('on-label')!==undefined)
onLabel=$element.data('on-label');if($element.data('off-label')!==undefined)
offLabel=$element.data('off-label');if($element.data('label-icon')!==undefined)
icon=$element.data('label-icon');if($element.data('text-label')!==undefined)
textLabel=$element.data('text-label');$switchLeft=$('<span>').addClass("switch-left").addClass(myClasses).addClass(color).html(onLabel);color='';if($element.data('off')!==undefined)
color="switch-"+$element.data('off');$switchRight=$('<span>').addClass("switch-right").addClass(myClasses).addClass(color).html(offLabel);$label=$('<label>').html("&nbsp;").addClass(myClasses).attr('for',$element.find(inputSelector).attr('id'));if(icon){$label.html('<i class="icon '+icon+'"></i>');}
if(textLabel){$label.html(''+textLabel+'');}
$div=$element.find(inputSelector).wrap($('<div>')).parent().data('animated',false);if($element.data('animated')!==false)
$div.addClass('switch-animate').data('animated',true);$div.append($switchLeft).append($label).append($switchRight);$element.find('>div').addClass($element.find(inputSelector).is(':checked')?'switch-on':'switch-off');if($element.find(inputSelector).is(':disabled'))
$(this).addClass('deactivate');var changeStatus=function($this){if($element.parent('label').is('.label-change-switch')){}else{$this.siblings('label').trigger('mousedown').trigger('mouseup').trigger('click');}};$element.on('keydown',function(e){if(e.keyCode===32){e.stopImmediatePropagation();e.preventDefault();changeStatus($(e.target).find('span:first'));}});$switchLeft.on('click',function(e){changeStatus($(this));});$switchRight.on('click',function(e){changeStatus($(this));});$element.find(inputSelector).on('change',function(e,skipOnChange){var $this=$(this),$element=$this.parent(),thisState=$this.is(':checked'),state=$element.is('.switch-off');e.preventDefault();$element.css('left','');if(state===thisState){if(thisState)
$element.removeClass('switch-off').addClass('switch-on');else $element.removeClass('switch-on').addClass('switch-off');if($element.data('animated')!==false)
$element.addClass("switch-animate");if(typeof skipOnChange==='boolean'&&skipOnChange)
return;$element.parent().trigger('switch-change',{'el':$this,'value':thisState})}});$element.find('label').on('mousedown touchstart',function(e){var $this=$(this);moving=false;e.preventDefault();e.stopImmediatePropagation();$this.closest('div').removeClass('switch-animate');if($this.closest('.has-switch').is('.deactivate')){$this.unbind('click');}else if($this.closest('.switch-on').parent().is('.radio-no-uncheck')){$this.unbind('click');}else{$this.on('mousemove touchmove',function(e){var $element=$(this).closest('.make-switch'),relativeX=(e.pageX||e.originalEvent.targetTouches[0].pageX)-$element.offset().left,percent=(relativeX/$element.width())*100,left=25,right=75;moving=true;if(percent<left)
percent=left;else if(percent>right)
percent=right;$element.find('>div').css('left',(percent-right)+"%")});$this.on('click touchend',function(e){var $this=$(this),$target=$(e.target),$myRadioCheckBox=$target.siblings('input');e.stopImmediatePropagation();e.preventDefault();$this.unbind('mouseleave');if(moving)
$myRadioCheckBox.prop('checked',!(parseInt($this.parent().css('left'))<-25));else
$myRadioCheckBox.prop("checked",!$myRadioCheckBox.is(":checked"));moving=false;$myRadioCheckBox.trigger('change');});$this.on('mouseleave',function(e){var $this=$(this),$myInputBox=$this.siblings('input');e.preventDefault();e.stopImmediatePropagation();$this.unbind('mouseleave');$this.trigger('mouseup');$myInputBox.prop('checked',!(parseInt($this.parent().css('left'))<-25)).trigger('change');});$this.on('mouseup',function(e){e.stopImmediatePropagation();e.preventDefault();$(this).unbind('mousemove');});}});if($form.data('bootstrapSwitch')!=='injected'){$form.bind('reset',function(){setTimeout(function(){$form.find('.make-switch').each(function(){var $input=$(this).find(inputSelector);$input.prop('checked',$input.is(':checked')).trigger('change');});},1);});$form.data('bootstrapSwitch','injected');}});},toggleActivation:function(){var $this=$(this);$this.toggleClass('deactivate');$this.find(inputSelector).prop('disabled',$this.is('.deactivate'));},isActive:function(){return!$(this).hasClass('deactivate');},setActive:function(active){var $this=$(this);if(active){$this.removeClass('deactivate');$this.find(inputSelector).removeAttr('disabled');}
else{$this.addClass('deactivate');$this.find(inputSelector).attr('disabled','disabled');}},toggleState:function(skipOnChange){var $input=$(this).find(':checkbox');$input.prop('checked',!$input.is(':checked')).trigger('change',skipOnChange);},toggleRadioState:function(skipOnChange){var $radioinput=$(this).find(':radio');$radioinput.not(':checked').prop('checked',!$radioinput.is(':checked')).trigger('change',skipOnChange);},toggleRadioStateAllowUncheck:function(uncheck,skipOnChange){var $radioinput=$(this).find(':radio');if(uncheck){$radioinput.not(':checked').trigger('change',skipOnChange);}
else{$radioinput.not(':checked').prop('checked',!$radioinput.is(':checked')).trigger('change',skipOnChange);}},setState:function(value,skipOnChange){$(this).find(inputSelector).prop('checked',value).trigger('change',skipOnChange);},setOnLabel:function(value){var $switchLeft=$(this).find(".switch-left");$switchLeft.html(value);},setOffLabel:function(value){var $switchRight=$(this).find(".switch-right");$switchRight.html(value);},setOnClass:function(value){var $switchLeft=$(this).find(".switch-left");var color='';if(value!==undefined){if($(this).attr('data-on')!==undefined){color="switch-"+$(this).attr('data-on')}
$switchLeft.removeClass(color);color="switch-"+value;$switchLeft.addClass(color);}},setOffClass:function(value){var $switchRight=$(this).find(".switch-right");var color='';if(value!==undefined){if($(this).attr('data-off')!==undefined){color="switch-"+$(this).attr('data-off')}
$switchRight.removeClass(color);color="switch-"+value;$switchRight.addClass(color);}},setAnimated:function(value){var $element=$(this).find(inputSelector).parent();if(value===undefined)value=false;$element.data('animated',value);$element.attr('data-animated',value);if($element.data('animated')!==false){$element.addClass("switch-animate");}else{$element.removeClass("switch-animate");}},setSizeClass:function(value){var $element=$(this);var $switchLeft=$element.find(".switch-left");var $switchRight=$element.find(".switch-right");var $label=$element.find("label");$.each(['switch-mini','switch-small','switch-large'],function(i,el){if(el!==value){$switchLeft.removeClass(el);$switchRight.removeClass(el);$label.removeClass(el);}else{$switchLeft.addClass(el);$switchRight.addClass(el);$label.addClass(el);}});},status:function(){return $(this).find(inputSelector).is(':checked');},destroy:function(){var $element=$(this),$div=$element.find('div'),$form=$element.closest('form'),$inputbox;$div.find(':not(input)').remove();$inputbox=$div.children();$inputbox.unwrap().unwrap();$inputbox.unbind('change');if($form){$form.unbind('reset');$form.removeData('bootstrapSwitch');}
return $inputbox;}};if(methods[method])
return methods[method].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof method==='object'||!method)
return methods.init.apply(this,arguments);else
$.error('Method '+method+' does not exist!');};}(jQuery);

// @fileRef jquery.sparkline.min.js 
(function(a,b,c){(function(a){typeof define=="function"&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.sparkline&&a(jQuery)})(function(d){"use strict";var e={},f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L=0;f=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:c,normalRangeMax:c,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:c,chartRangeMax:c,chartRangeMinX:c,chartRangeMaxX:c,tooltipFormat:new h('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:c,nullColor:c,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:c,chartRangeMin:c,chartRangeClip:!1,colorMap:c,tooltipFormat:new h('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new h('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:c,thresholdValue:0,chartRangeMax:c,chartRangeMin:c,chartRangeClip:!1,tooltipFormat:new h("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:c,tooltipFormat:new h("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new h('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:c,targetColor:"#4a2",chartRangeMax:c,chartRangeMin:c,tooltipFormat:new h("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},E='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',g=function(){var a,b;return a=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(a.prototype=d.extend(new arguments[0],arguments[arguments.length-1]),a._super=arguments[0].prototype):a.prototype=arguments[arguments.length-1],arguments.length>2&&(b=Array.prototype.slice.call(arguments,1,-1),b.unshift(a.prototype),d.extend.apply(d,b))):a.prototype=arguments[0],a.prototype.cls=a,a},d.SPFormatClass=h=g({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(a,b){this.format=a,this.fclass=b},render:function(a,b,d){var e=this,f=a,g,h,i,j,k;return this.format.replace(this.fre,function(){var a;return h=arguments[1],i=arguments[3],g=e.precre.exec(h),g?(k=g[2],h=g[1]):k=!1,j=f[h],j===c?"":i&&b&&b[i]?(a=b[i],a.get?b[i].get(j)||j:b[i][j]||j):(n(j)&&(d.get("numberFormatter")?j=d.get("numberFormatter")(j):j=s(j,k,d.get("numberDigitGroupCount"),d.get("numberDigitGroupSep"),d.get("numberDecimalMark"))),j)})}}),d.spformat=function(a,b){return new h(a,b)},i=function(a,b,c){return a<b?b:a>c?c:a},j=function(a,c){var d;return c===2?(d=b.floor(a.length/2),a.length%2?a[d]:(a[d-1]+a[d])/2):a.length%2?(d=(a.length*c+c)/4,d%1?(a[b.floor(d)]+a[b.floor(d)-1])/2:a[d-1]):(d=(a.length*c+2)/4,d%1?(a[b.floor(d)]+a[b.floor(d)-1])/2:a[d-1])},k=function(a){var b;switch(a){case"undefined":a=c;break;case"null":a=null;break;case"true":a=!0;break;case"false":a=!1;break;default:b=parseFloat(a),a==b&&(a=b)}return a},l=function(a){var b,c=[];for(b=a.length;b--;)c[b]=k(a[b]);return c},m=function(a,b){var c,d,e=[];for(c=0,d=a.length;c<d;c++)a[c]!==b&&e.push(a[c]);return e},n=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},s=function(a,b,c,e,f){var g,h;a=(b===!1?parseFloat(a).toString():a.toFixed(b)).split(""),g=(g=d.inArray(".",a))<0?a.length:g,g<a.length&&(a[g]=f);for(h=g-c;h>0;h-=c)a.splice(h,0,e);return a.join("")},o=function(a,b,c){var d;for(d=b.length;d--;){if(c&&b[d]===null)continue;if(b[d]!==a)return!1}return!0},p=function(a){var b=0,c;for(c=a.length;c--;)b+=typeof a[c]=="number"?a[c]:0;return b},r=function(a){return d.isArray(a)?a:[a]},q=function(b){var c;a.createStyleSheet?a.createStyleSheet().cssText=b:(c=a.createElement("style"),c.type="text/css",a.getElementsByTagName("head")[0].appendChild(c),c[typeof a.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=b)},d.fn.simpledraw=function(b,e,f,g){var h,i;if(f&&(h=this.data("_jqs_vcanvas")))return h;if(d.fn.sparkline.canvas===!1)return!1;if(d.fn.sparkline.canvas===c){var j=a.createElement("canvas");if(!j.getContext||!j.getContext("2d")){if(!a.namespaces||!!a.namespaces.v)return d.fn.sparkline.canvas=!1,!1;a.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),d.fn.sparkline.canvas=function(a,b,c,d){return new J(a,b,c)}}else d.fn.sparkline.canvas=function(a,b,c,d){return new I(a,b,c,d)}}return b===c&&(b=d(this).innerWidth()),e===c&&(e=d(this).innerHeight()),h=d.fn.sparkline.canvas(b,e,this,g),i=d(this).data("_jqs_mhandler"),i&&i.registerCanvas(h),h},d.fn.cleardraw=function(){var a=this.data("_jqs_vcanvas");a&&a.reset()},d.RangeMapClass=t=g({init:function(a){var b,c,d=[];for(b in a)a.hasOwnProperty(b)&&typeof b=="string"&&b.indexOf(":")>-1&&(c=b.split(":"),c[0]=c[0].length===0?-Infinity:parseFloat(c[0]),c[1]=c[1].length===0?Infinity:parseFloat(c[1]),c[2]=a[b],d.push(c));this.map=a,this.rangelist=d||!1},get:function(a){var b=this.rangelist,d,e,f;if((f=this.map[a])!==c)return f;if(b)for(d=b.length;d--;){e=b[d];if(e[0]<=a&&e[1]>=a)return e[2]}return c}}),d.range_map=function(a){return new t(a)},u=g({init:function(a,b){var c=d(a);this.$el=c,this.options=b,this.currentPageX=0,this.currentPageY=0,this.el=a,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!b.get("disableTooltips"),this.highlightEnabled=!b.get("disableHighlight")},registerSparkline:function(a){this.splist.push(a),this.over&&this.updateDisplay()},registerCanvas:function(a){var b=d(a.canvas);this.canvas=a,this.$canvas=b,b.mouseenter(d.proxy(this.mouseenter,this)),b.mouseleave(d.proxy(this.mouseleave,this)),b.click(d.proxy(this.mouseclick,this))},reset:function(a){this.splist=[],this.tooltip&&a&&(this.tooltip.remove(),this.tooltip=c)},mouseclick:function(a){var b=d.Event("sparklineClick");b.originalEvent=a,b.sparklines=this.splist,this.$el.trigger(b)},mouseenter:function(b){d(a.body).unbind("mousemove.jqs"),d(a.body).bind("mousemove.jqs",d.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=b.pageX,this.currentPageY=b.pageY,this.currentEl=b.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new v(this.options),this.tooltip.updatePosition(b.pageX,b.pageY)),this.updateDisplay()},mouseleave:function(){d(a.body).unbind("mousemove.jqs");var b=this.splist,c=b.length,e=!1,f,g;this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null);for(g=0;g<c;g++)f=b[g],f.clearRegionHighlight()&&(e=!0);e&&this.canvas.render()},mousemove:function(a){this.currentPageX=a.pageX,this.currentPageY=a.pageY,this.currentEl=a.target,this.tooltip&&this.tooltip.updatePosition(a.pageX,a.pageY),this.updateDisplay()},updateDisplay:function(){var a=this.splist,b=a.length,c=!1,e=this.$canvas.offset(),f=this.currentPageX-e.left,g=this.currentPageY-e.top,h,i,j,k,l;if(!this.over)return;for(j=0;j<b;j++)i=a[j],k=i.setRegionHighlight(this.currentEl,f,g),k&&(c=!0);if(c){l=d.Event("sparklineRegionChange"),l.sparklines=this.splist,this.$el.trigger(l);if(this.tooltip){h="";for(j=0;j<b;j++)i=a[j],h+=i.getCurrentRegionTooltip();this.tooltip.setContent(h)}this.disableHighlight||this.canvas.render()}k===null&&this.mouseleave()}}),v=g({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(b){var c=b.get("tooltipClassname","jqstooltip"),e=this.sizeStyle,f;this.container=b.get("tooltipContainer")||a.body,this.tooltipOffsetX=b.get("tooltipOffsetX",10),this.tooltipOffsetY=b.get("tooltipOffsetY",12),d("#jqssizetip").remove(),d("#jqstooltip").remove(),this.sizetip=d("<div/>",{id:"jqssizetip",style:e,"class":c}),this.tooltip=d("<div/>",{id:"jqstooltip","class":c}).appendTo(this.container),f=this.tooltip.offset(),this.offsetLeft=f.left,this.offsetTop=f.top,this.hidden=!0,d(window).unbind("resize.jqs scroll.jqs"),d(window).bind("resize.jqs scroll.jqs",d.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=d(window).scrollTop(),this.scrollLeft=d(window).scrollLeft(),this.scrollRight=this.scrollLeft+d(window).width(),this.updatePosition()},getSize:function(a){this.sizetip.html(a).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(a){if(!a){this.tooltip.css("visibility","hidden"),this.hidden=!0;return}this.getSize(a),this.tooltip.html(a).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(a,b){if(a===c){if(this.mousex===c)return;a=this.mousex-this.offsetLeft,b=this.mousey-this.offsetTop}else this.mousex=a-=this.offsetLeft,this.mousey=b-=this.offsetTop;if(!this.height||!this.width||this.hidden)return;b-=this.height+this.tooltipOffsetY,a+=this.tooltipOffsetX,b<this.scrollTop&&(b=this.scrollTop),a<this.scrollLeft?a=this.scrollLeft:a+this.width>this.scrollRight&&(a=this.scrollRight-this.width),this.tooltip.css({left:a,top:b})},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=c,d(window).unbind("resize.jqs scroll.jqs")}}),F=function(){q(E)},d(F),K=[],d.fn.sparkline=function(b,e){return this.each(function(){var f=new d.fn.sparkline.options(this,e),g=d(this),h,i;h=function(){var e,h,i,j,k,l,m;if(b==="html"||b===c){m=this.getAttribute(f.get("tagValuesAttribute"));if(m===c||m===null)m=g.html();e=m.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else e=b;h=f.get("width")==="auto"?e.length*f.get("defaultPixelsPerValue"):f.get("width");if(f.get("height")==="auto"){if(!f.get("composite")||!d.data(this,"_jqs_vcanvas"))j=a.createElement("span"),j.innerHTML="a",g.html(j),i=d(j).innerHeight()||d(j).height(),d(j).remove(),j=null}else i=f.get("height");f.get("disableInteraction")?k=!1:(k=d.data(this,"_jqs_mhandler"),k?f.get("composite")||k.reset():(k=new u(this,f),d.data(this,"_jqs_mhandler",k)));if(f.get("composite")&&!d.data(this,"_jqs_vcanvas")){d.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),d.data(this,"_jqs_errnotify",!0));return}l=new(d.fn.sparkline[f.get("type")])(this,e,f,h,i),l.render(),k&&k.registerSparkline(l)};if(d(this).html()&&!f.get("disableHiddenCheck")&&d(this).is(":hidden")||!d(this).parents("body").length){if(!f.get("composite")&&d.data(this,"_jqs_pending"))for(i=K.length;i;i--)K[i-1][0]==this&&K.splice(i-1,1);K.push([this,h]),d.data(this,"_jqs_pending",!0)}else h.call(this)})},d.fn.sparkline.defaults=f(),d.sparkline_display_visible=function(){var a,b,c,e=[];for(b=0,c=K.length;b<c;b++)a=K[b][0],d(a).is(":visible")&&!d(a).parents().is(":hidden")?(K[b][1].call(a),d.data(K[b][0],"_jqs_pending",!1),e.push(b)):!d(a).closest("html").length&&!d.data(a,"_jqs_pending")&&(d.data(K[b][0],"_jqs_pending",!1),e.push(b));for(b=e.length;b;b--)K.splice(e[b-1],1)},d.fn.sparkline.options=g({init:function(a,b){var c,f,g,h;this.userOptions=b=b||{},this.tag=a,this.tagValCache={},f=d.fn.sparkline.defaults,g=f.common,this.tagOptionsPrefix=b.enableTagOptions&&(b.tagOptionsPrefix||g.tagOptionsPrefix),h=this.getTagSetting("type"),h===e?c=f[b.type||g.type]:c=f[h],this.mergedOptions=d.extend({},g,c,b)},getTagSetting:function(a){var b=this.tagOptionsPrefix,d,f,g,h;if(b===!1||b===c)return e;if(this.tagValCache.hasOwnProperty(a))d=this.tagValCache.key;else{d=this.tag.getAttribute(b+a);if(d===c||d===null)d=e;else if(d.substr(0,1)==="["){d=d.substr(1,d.length-2).split(",");for(f=d.length;f--;)d[f]=k(d[f].replace(/(^\s*)|(\s*$)/g,""))}else if(d.substr(0,1)==="{"){g=d.substr(1,d.length-2).split(","),d={};for(f=g.length;f--;)h=g[f].split(":",2),d[h[0].replace(/(^\s*)|(\s*$)/g,"")]=k(h[1].replace(/(^\s*)|(\s*$)/g,""))}else d=k(d);this.tagValCache.key=d}return d},get:function(a,b){var d=this.getTagSetting(a),f;return d!==e?d:(f=this.mergedOptions[a])===c?b:f}}),d.fn.sparkline._base=g({disabled:!1,init:function(a,b,e,f,g){this.el=a,this.$el=d(a),this.values=b,this.options=e,this.width=f,this.height=g,this.currentRegion=c},initTarget:function(){var a=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),a))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(a,b){},setRegionHighlight:function(a,b,d){var e=this.currentRegion,f=!this.options.get("disableHighlight"),g;return b>this.canvasWidth||d>this.canvasHeight||b<0||d<0?null:(g=this.getRegion(a,b,d),e!==g?(e!==c&&f&&this.removeHighlight(),this.currentRegion=g,g!==c&&f&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==c?(this.removeHighlight(),this.currentRegion=c,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(a){},getCurrentRegionTooltip:function(){var a=this.options,b="",e=[],f,g,i,j,k,l,m,n,o,p,q,r,s,t;if(this.currentRegion===c)return"";f=this.getCurrentRegionFields(),q=a.get("tooltipFormatter");if(q)return q(this,a,f);a.get("tooltipChartTitle")&&(b+='<div class="jqs jqstitle">'+a.get("tooltipChartTitle")+"</div>\n"),g=this.options.get("tooltipFormat");if(!g)return"";d.isArray(g)||(g=[g]),d.isArray(f)||(f=[f]),m=this.options.get("tooltipFormatFieldlist"),n=this.options.get("tooltipFormatFieldlistKey");if(m&&n){o=[];for(l=f.length;l--;)p=f[l][n],(t=d.inArray(p,m))!=-1&&(o[t]=f[l]);f=o}i=g.length,s=f.length;for(l=0;l<i;l++){r=g[l],typeof r=="string"&&(r=new h(r)),j=r.fclass||"jqsfield";for(t=0;t<s;t++)if(!f[t].isNull||!a.get("tooltipSkipNull"))d.extend(f[t],{prefix:a.get("tooltipPrefix"),suffix:a.get("tooltipSuffix")}),k=r.render(f[t],a.get("tooltipValueLookups"),a),e.push('<div class="'+j+'">'+k+"</div>")}return e.length?b+e.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(a,c){var d=c.get("highlightColor"),e=c.get("highlightLighten"),f,g,h,j;if(d)return d;if(e){f=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(a);if(f){h=[],g=a.length===4?16:1;for(j=0;j<3;j++)h[j]=i(b.round(parseInt(f[j+1],16)*g*e),0,255);return"rgb("+h.join(",")+")"}}return a}}),w={changeHighlight:function(a){var b=this.currentRegion,c=this.target,e=this.regionShapes[b],f;e&&(f=this.renderRegion(b,a),d.isArray(f)||d.isArray(e)?(c.replaceWithShapes(e,f),this.regionShapes[b]=d.map(f,function(a){return a.id})):(c.replaceWithShape(e,f),this.regionShapes[b]=f.id))},render:function(){var a=this.values,b=this.target,c=this.regionShapes,e,f,g,h;if(!this.cls._super.render.call(this))return;for(g=a.length;g--;){e=this.renderRegion(g);if(e)if(d.isArray(e)){f=[];for(h=e.length;h--;)e[h].append(),f.push(e[h].id);c[g]=f}else e.append(),c[g]=e.id;else c[g]=null}b.render()}},d.fn.sparkline.line=x=g(d.fn.sparkline._base,{type:"line",init:function(a,b,c,d,e){x._super.init.call(this,a,b,c,d,e),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(a,b,d){var e,f=this.regionMap;for(e=f.length;e--;)if(f[e]!==null&&b>=f[e][0]&&b<=f[e][1])return f[e][2];return c},getCurrentRegionFields:function(){var a=this.currentRegion;return{isNull:this.yvalues[a]===null,x:this.xvalues[a],y:this.yvalues[a],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:a}},renderHighlight:function(){var a=this.currentRegion,b=this.target,d=this.vertices[a],e=this.options,f=e.get("spotRadius"),g=e.get("highlightSpotColor"),h=e.get("highlightLineColor"),i,j;if(!d)return;f&&g&&(i=b.drawCircle(d[0],d[1],f,c,g),this.highlightSpotId=i.id,b.insertAfterShape(this.lastShapeId,i)),h&&(j=b.drawLine(d[0],this.canvasTop,d[0],this.canvasTop+this.canvasHeight,h),this.highlightLineId=j.id,b.insertAfterShape(this.lastShapeId,j))},removeHighlight:function(){var a=this.target;this.highlightSpotId&&(a.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(a.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var a=this.values,c=a.length,d=this.xvalues,e=this.yvalues,f=this.yminmax,g,h,i,j,k;for(g=0;g<c;g++)h=a[g],i=typeof a[g]=="string",j=typeof a[g]=="object"&&a[g]instanceof Array,k=i&&a[g].split(":"),i&&k.length===2?(d.push(Number(k[0])),e.push(Number(k[1])),f.push(Number(k[1]))):j?(d.push(h[0]),e.push(h[1]),f.push(h[1])):(d.push(g),a[g]===null||a[g]==="null"?e.push(null):(e.push(Number(h)),f.push(Number(h))));this.options.get("xvalues")&&(d=this.options.get("xvalues")),this.maxy=this.maxyorg=b.max.apply(b,f),this.miny=this.minyorg=b.min.apply(b,f),this.maxx=b.max.apply(b,d),this.minx=b.min.apply(b,d),this.xvalues=d,this.yvalues=e,this.yminmax=f},processRangeOptions:function(){var a=this.options,b=a.get("normalRangeMin"),d=a.get("normalRangeMax");b!==c&&(b<this.miny&&(this.miny=b),d>this.maxy&&(this.maxy=d)),a.get("chartRangeMin")!==c&&(a.get("chartRangeClip")||a.get("chartRangeMin")<this.miny)&&(this.miny=a.get("chartRangeMin")),a.get("chartRangeMax")!==c&&(a.get("chartRangeClip")||a.get("chartRangeMax")>this.maxy)&&(this.maxy=a.get("chartRangeMax")),a.get("chartRangeMinX")!==c&&(a.get("chartRangeClipX")||a.get("chartRangeMinX")<this.minx)&&(this.minx=a.get("chartRangeMinX")),a.get("chartRangeMaxX")!==c&&(a.get("chartRangeClipX")||a.get("chartRangeMaxX")>this.maxx)&&(this.maxx=a.get("chartRangeMaxX"))},drawNormalRange:function(a,d,e,f,g){var h=this.options.get("normalRangeMin"),i=this.options.get("normalRangeMax"),j=d+b.round(e-e*((i-this.miny)/g)),k=b.round(e*(i-h)/g);this.target.drawRect(a,j,f,k,c,this.options.get("normalRangeColor")).append()},render:function(){var a=this.options,e=this.target,f=this.canvasWidth,g=this.canvasHeight,h=this.vertices,i=a.get("spotRadius"),j=this.regionMap,k,l,m,n,o,p,q,r,s,u,v,w,y,z,A,B,C,D,E,F,G,H,I,J,K;if(!x._super.render.call(this))return;this.scanValues(),this.processRangeOptions(),I=this.xvalues,J=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2)return;n=o=0,k=this.maxx-this.minx===0?1:this.maxx-this.minx,l=this.maxy-this.miny===0?1:this.maxy-this.miny,m=this.yvalues.length-1,i&&(f<i*4||g<i*4)&&(i=0);if(i){G=a.get("highlightSpotColor")&&!a.get("disableInteraction");if(G||a.get("minSpotColor")||a.get("spotColor")&&J[m]===this.miny)g-=b.ceil(i);if(G||a.get("maxSpotColor")||a.get("spotColor")&&J[m]===this.maxy)g-=b.ceil(i),n+=b.ceil(i);if(G||(a.get("minSpotColor")||a.get("maxSpotColor"))&&(J[0]===this.miny||J[0]===this.maxy))o+=b.ceil(i),f-=b.ceil(i);if(G||a.get("spotColor")||a.get("minSpotColor")||a.get("maxSpotColor")&&(J[m]===this.miny||J[m]===this.maxy))f-=b.ceil(i)}g--,a.get("normalRangeMin")!==c&&!a.get("drawNormalOnTop")&&this.drawNormalRange(o,n,g,f,l),q=[],r=[q],z=A=null,B=J.length;for(K=0;K<B;K++)s=I[K],v=I[K+1],u=J[K],w=o+b.round((s-this.minx)*(f/k)),y=K<B-1?o+b.round((v-this.minx)*(f/k)):f,A=w+(y-w)/2,j[K]=[z||0,A,K],z=A,u===null?K&&(J[K-1]!==null&&(q=[],r.push(q)),h.push(null)):(u<this.miny&&(u=this.miny),u>this.maxy&&(u=this.maxy),q.length||q.push([w,n+g]),p=[w,n+b.round(g-g*((u-this.miny)/l))],q.push(p),h.push(p));C=[],D=[],E=r.length;for(K=0;K<E;K++)q=r[K],q.length&&(a.get("fillColor")&&(q.push([q[q.length-1][0],n+g]),D.push(q.slice(0)),q.pop()),q.length>2&&(q[0]=[q[0][0],q[1][1]]),C.push(q));E=D.length;for(K=0;K<E;K++)e.drawShape(D[K],a.get("fillColor"),a.get("fillColor")).append();a.get("normalRangeMin")!==c&&a.get("drawNormalOnTop")&&this.drawNormalRange(o,n,g,f,l),E=C.length;for(K=0;K<E;K++)e.drawShape(C[K],a.get("lineColor"),c,a.get("lineWidth")).append();if(i&&a.get("valueSpots")){F=a.get("valueSpots"),F.get===c&&(F=new t(F));for(K=0;K<B;K++)H=F.get(J[K]),H&&e.drawCircle(o+b.round((I[K]-this.minx)*(f/k)),n+b.round(g-g*((J[K]-this.miny)/l)),i,c,H).append()}i&&a.get("spotColor")&&J[m]!==null&&e.drawCircle(o+b.round((I[I.length-1]-this.minx)*(f/k)),n+b.round(g-g*((J[m]-this.miny)/l)),i,c,a.get("spotColor")).append(),this.maxy!==this.minyorg&&(i&&a.get("minSpotColor")&&(s=I[d.inArray(this.minyorg,J)],e.drawCircle(o+b.round((s-this.minx)*(f/k)),n+b.round(g-g*((this.minyorg-this.miny)/l)),i,c,a.get("minSpotColor")).append()),i&&a.get("maxSpotColor")&&(s=I[d.inArray(this.maxyorg,J)],e.drawCircle(o+b.round((s-this.minx)*(f/k)),n+b.round(g-g*((this.maxyorg-this.miny)/l)),i,c,a.get("maxSpotColor")).append())),this.lastShapeId=e.getLastShapeId(),this.canvasTop=n,e.render()}}),d.fn.sparkline.bar=y=g(d.fn.sparkline._base,w,{type:"bar",init:function(a,e,f,g,h){var j=parseInt(f.get("barWidth"),10),n=parseInt(f.get("barSpacing"),10),o=f.get("chartRangeMin"),p=f.get("chartRangeMax"),q=f.get("chartRangeClip"),r=Infinity,s=-Infinity,u,v,w,x,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R;y._super.init.call(this,a,e,f,g,h);for(A=0,B=e.length;A<B;A++){O=e[A],u=typeof O=="string"&&O.indexOf(":")>-1;if(u||d.isArray(O))J=!0,u&&(O=e[A]=l(O.split(":"))),O=m(O,null),v=b.min.apply(b,O),w=b.max.apply(b,O),v<r&&(r=v),w>s&&(s=w)}this.stacked=J,this.regionShapes={},this.barWidth=j,this.barSpacing=n,this.totalBarWidth=j+n,this.width=g=e.length*j+(e.length-1)*n,this.initTarget(),q&&(H=o===c?-Infinity:o,I=p===c?Infinity:p),z=[],x=J?[]:z;var S=[],T=[];for(A=0,B=e.length;A<B;A++)if(J){K=e[A],e[A]=N=[],S[A]=0,x[A]=T[A]=0;for(L=0,M=K.length;L<M;L++)O=N[L]=q?i(K[L],H,I):K[L],O!==null&&(O>0&&(S[A]+=O),r<0&&s>0?O<0?T[A]+=b.abs(O):x[A]+=O:x[A]+=b.abs(O-(O<0?s:r)),z.push(O))}else O=q?i(e[A],H,I):e[A],O=e[A]=k(O),O!==null&&z.push(O);this.max=G=b.max.apply(b,z),this.min=F=b.min.apply(b,z),this.stackMax=s=J?b.max.apply(b,S):G,this.stackMin=r=J?b.min.apply(b,z):F,f.get("chartRangeMin")!==c&&(f.get("chartRangeClip")||f.get("chartRangeMin")<F)&&(F=f.get("chartRangeMin")),f.get("chartRangeMax")!==c&&(f.get("chartRangeClip")||f.get("chartRangeMax")>G)&&(G=f.get("chartRangeMax")),this.zeroAxis=D=f.get("zeroAxis",!0),F<=0&&G>=0&&D?E=0:D==0?E=F:F>0?E=F:E=G,this.xaxisOffset=E,C=J?b.max.apply(b,x)+b.max.apply(b,T):G-F,this.canvasHeightEf=D&&F<0?this.canvasHeight-2:this.canvasHeight-1,F<E?(Q=J&&G>=0?s:G,P=(Q-E)/C*this.canvasHeight,P!==b.ceil(P)&&(this.canvasHeightEf-=2,P=b.ceil(P))):P=this.canvasHeight,this.yoffset=P,d.isArray(f.get("colorMap"))?(this.colorMapByIndex=f.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=f.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===c&&(this.colorMapByValue=new t(this.colorMapByValue))),this.range=C},getRegion:function(a,d,e){var f=b.floor(d/this.totalBarWidth);return f<0||f>=this.values.length?c:f},getCurrentRegionFields:function(){var a=this.currentRegion,b=r(this.values[a]),c=[],d,e;for(e=b.length;e--;)d=b[e],c.push({isNull:d===null,value:d,color:this.calcColor(e,d,a),offset:a});return c},calcColor:function(a,b,e){var f=this.colorMapByIndex,g=this.colorMapByValue,h=this.options,i,j;return this.stacked?i=h.get("stackedBarColor"):i=b<0?h.get("negBarColor"):h.get("barColor"),b===0&&h.get("zeroColor")!==c&&(i=h.get("zeroColor")),g&&(j=g.get(b))?i=j:f&&f.length>e&&(i=f[e]),d.isArray(i)?i[a%i.length]:i},renderRegion:function(a,e){var f=this.values[a],g=this.options,h=this.xaxisOffset,i=[],j=this.range,k=this.stacked,l=this.target,m=a*this.totalBarWidth,n=this.canvasHeightEf,p=this.yoffset,q,r,s,t,u,v,w,x,y,z;f=d.isArray(f)?f:[f],w=f.length,x=f[0],t=o(null,f),z=o(h,f,!0);if(t)return g.get("nullColor")?(s=e?g.get("nullColor"):this.calcHighlightColor(g.get("nullColor"),g),q=p>0?p-1:p,l.drawRect(m,q,this.barWidth-1,0,s,s)):c;u=p;for(v=0;v<w;v++){x=f[v];if(k&&x===h){if(!z||y)continue;y=!0}j>0?r=b.floor(n*(b.abs(x-h)/j))+1:r=1,x<h||x===h&&p===0?(q=u,u+=r):(q=p-r,p-=r),s=this.calcColor(v,x,a),e&&(s=this.calcHighlightColor(s,g)),i.push(l.drawRect(m,q,this.barWidth-1,r-1,s,s))}return i.length===1?i[0]:i}}),d.fn.sparkline.tristate=z=g(d.fn.sparkline._base,w,{type:"tristate",init:function(a,b,e,f,g){var h=parseInt(e.get("barWidth"),10),i=parseInt(e.get("barSpacing"),10);z._super.init.call(this,a,b,e,f,g),this.regionShapes={},this.barWidth=h,this.barSpacing=i,this.totalBarWidth=h+i,this.values=d.map(b,Number),this.width=f=b.length*h+(b.length-1)*i,d.isArray(e.get("colorMap"))?(this.colorMapByIndex=e.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=e.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===c&&(this.colorMapByValue=new t(this.colorMapByValue))),this.initTarget()},getRegion:function(a,c,d){return b.floor(c/this.totalBarWidth)},getCurrentRegionFields:function(){var a=this.currentRegion;return{isNull:this.values[a]===c,value:this.values[a],color:this.calcColor(this.values[a],a),offset:a}},calcColor:function(a,b){var c=this.values,d=this.options,e=this.colorMapByIndex,f=this.colorMapByValue,g,h;return f&&(h=f.get(a))?g=h:e&&e.length>b?g=e[b]:c[b]<0?g=d.get("negBarColor"):c[b]>0?g=d.get("posBarColor"):g=d.get("zeroBarColor"),g},renderRegion:function(a,c){var d=this.values,e=this.options,f=this.target,g,h,i,j,k,l;g=f.pixelHeight,i=b.round(g/2),j=a*this.totalBarWidth,d[a]<0?(k=i,h=i-1):d[a]>0?(k=0,h=i-1):(k=i-1,h=2),l=this.calcColor(d[a],a);if(l===null)return;return c&&(l=this.calcHighlightColor(l,e)),f.drawRect(j,k,this.barWidth-1,h-1,l,l)}}),d.fn.sparkline.discrete=A=g(d.fn.sparkline._base,w,{type:"discrete",init:function(a,e,f,g,h){A._super.init.call(this,a,e,f,g,h),this.regionShapes={},this.values=e=d.map(e,Number),this.min=b.min.apply(b,e),this.max=b.max.apply(b,e),this.range=this.max-this.min,this.width=g=f.get("width")==="auto"?e.length*2:this.width,this.interval=b.floor(g/e.length),this.itemWidth=g/e.length,f.get("chartRangeMin")!==c&&(f.get("chartRangeClip")||f.get("chartRangeMin")<this.min)&&(this.min=f.get("chartRangeMin")),f.get("chartRangeMax")!==c&&(f.get("chartRangeClip")||f.get("chartRangeMax")>this.max)&&(this.max=f.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight=f.get("lineHeight")==="auto"?b.round(this.canvasHeight*.3):f.get("lineHeight"))},getRegion:function(a,c,d){return b.floor(c/this.itemWidth)},getCurrentRegionFields:function(){var a=this.currentRegion;return{isNull:this.values[a]===c,value:this.values[a],offset:a}},renderRegion:function(a,c){var d=this.values,e=this.options,f=this.min,g=this.max,h=this.range,j=this.interval,k=this.target,l=this.canvasHeight,m=this.lineHeight,n=l-m,o,p,q,r;return p=i(d[a],f,g),r=a*j,o=b.round(n-n*((p-f)/h)),q=e.get("thresholdColor")&&p<e.get("thresholdValue")?e.get("thresholdColor"):e.get("lineColor"),c&&(q=this.calcHighlightColor(q,e)),k.drawLine(r,o,r,o+m,q)}}),d.fn.sparkline.bullet=B=g(d.fn.sparkline._base,{type:"bullet",init:function(a,d,e,f,g){var h,i,j;B._super.init.call(this,a,d,e,f,g),this.values=d=l(d),j=d.slice(),j[0]=j[0]===null?j[2]:j[0],j[1]=d[1]===null?j[2]:j[1],h=b.min.apply(b,d),i=b.max.apply(b,d),e.get("base")===c?h=h<0?h:0:h=e.get("base"),this.min=h,this.max=i,this.range=i-h,this.shapes={},this.valueShapes={},this.regiondata={},this.width=f=e.get("width")==="auto"?"4.0em":f,this.target=this.$el.simpledraw(f,g,e.get("composite")),d.length||(this.disabled=!0),this.initTarget()},getRegion:function(a,b,d){var e=this.target.getShapeAt(a,b,d);return e!==c&&this.shapes[e]!==c?this.shapes[e]:c},getCurrentRegionFields:function(){var a=this.currentRegion;return{fieldkey:a.substr(0,1),value:this.values[a.substr(1)],region:a}},changeHighlight:function(a){var b=this.currentRegion,c=this.valueShapes[b],d;delete this.shapes[c];switch(b.substr(0,1)){case"r":d=this.renderRange(b.substr(1),a);break;case"p":d=this.renderPerformance(a);break;case"t":d=this.renderTarget(a)}this.valueShapes[b]=d.id,this.shapes[d.id]=b,this.target.replaceWithShape(c,d)},renderRange:function(a,c){var d=this.values[a],e=b.round(this.canvasWidth*((d-this.min)/this.range)),f=this.options.get("rangeColors")[a-2];return c&&(f=this.calcHighlightColor(f,this.options)),this.target.drawRect(0,0,e-1,this.canvasHeight-1,f,f)},renderPerformance:function(a){var c=this.values[1],d=b.round(this.canvasWidth*((c-this.min)/this.range)),e=this.options.get("performanceColor");return a&&(e=this.calcHighlightColor(e,this.options)),this.target.drawRect(0,b.round(this.canvasHeight*.3),d-1,b.round(this.canvasHeight*.4)-1,e,e)},renderTarget:function(a){var c=this.values[0],d=b.round(this.canvasWidth*((c-this.min)/this.range)-this.options.get("targetWidth")/2),e=b.round(this.canvasHeight*.1),f=this.canvasHeight-e*2,g=this.options.get("targetColor");return a&&(g=this.calcHighlightColor(g,this.options)),this.target.drawRect(d,e,this.options.get("targetWidth")-1,f-1,g,g)},render:function(){var a=this.values.length,b=this.target,c,d;if(!B._super.render.call(this))return;for(c=2;c<a;c++)d=this.renderRange(c).append(),this.shapes[d.id]="r"+c,this.valueShapes["r"+c]=d.id;this.values[1]!==null&&(d=this.renderPerformance().append(),this.shapes[d.id]="p1",this.valueShapes.p1=d.id),this.values[0]!==null&&(d=this.renderTarget().append(),this.shapes[d.id]="t0",this.valueShapes.t0=d.id),b.render()}}),d.fn.sparkline.pie=C=g(d.fn.sparkline._base,{type:"pie",init:function(a,c,e,f,g){var h=0,i;C._super.init.call(this,a,c,e,f,g),this.shapes={},this.valueShapes={},this.values=c=d.map(c,Number),e.get("width")==="auto"&&(this.width=this.height);if(c.length>0)for(i=c.length;i--;)h+=c[i];this.total=h,this.initTarget(),this.radius=b.floor(b.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(a,b,d){var e=this.target.getShapeAt(a,b,d);return e!==c&&this.shapes[e]!==c?this.shapes[e]:c},getCurrentRegionFields:function(){var a=this.currentRegion;return{isNull:this.values[a]===c,value:this.values[a],percent:this.values[a]/this.total*100,color:this.options.get("sliceColors")[a%this.options.get("sliceColors").length],offset:a}},changeHighlight:function(a){var b=this.currentRegion,c=this.renderSlice(b,a),d=this.valueShapes[b];delete this.shapes[d],this.target.replaceWithShape(d,c),this.valueShapes[b]=c.id,this.shapes[c.id]=b},renderSlice:function(a,d){var e=this.target,f=this.options,g=this.radius,h=f.get("borderWidth"),i=f.get("offset"),j=2*b.PI,k=this.values,l=this.total,m=i?2*b.PI*(i/360):0,n,o,p,q,r;q=k.length;for(p=0;p<q;p++){n=m,o=m,l>0&&(o=m+j*(k[p]/l));if(a===p)return r=f.get("sliceColors")[p%f.get("sliceColors").length],d&&(r=this.calcHighlightColor(r,f)),e.drawPieSlice(g,g,g-h,n,o,c,r);m=o}},render:function(){var a=this.target,d=this.values,e=this.options,f=this.radius,g=e.get("borderWidth"),h,i;if(!C._super.render.call(this))return;g&&a.drawCircle(f,f,b.floor(f-g/2),e.get("borderColor"),c,g).append();for(i=d.length;i--;)d[i]&&(h=this.renderSlice(i).append(),this.valueShapes[i]=h.id,this.shapes[h.id]=i);a.render()}}),d.fn.sparkline.box=D=g(d.fn.sparkline._base,{type:"box",init:function(a,b,c,e,f){D._super.init.call(this,a,b,c,e,f),this.values=d.map(b,Number),this.width=c.get("width")==="auto"?"4.0em":e,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var a=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles
[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==c&&a.push({field:"lo",value:this.loutlier}),this.routlier!==c&&a.push({field:"ro",value:this.routlier}),this.lwhisker!==c&&a.push({field:"lw",value:this.lwhisker}),this.rwhisker!==c&&a.push({field:"rw",value:this.rwhisker}),a},render:function(){var a=this.target,d=this.values,e=d.length,f=this.options,g=this.canvasWidth,h=this.canvasHeight,i=f.get("chartRangeMin")===c?b.min.apply(b,d):f.get("chartRangeMin"),k=f.get("chartRangeMax")===c?b.max.apply(b,d):f.get("chartRangeMax"),l=0,m,n,o,p,q,r,s,t,u,v,w;if(!D._super.render.call(this))return;if(f.get("raw"))f.get("showOutliers")&&d.length>5?(n=d[0],m=d[1],p=d[2],q=d[3],r=d[4],s=d[5],t=d[6]):(m=d[0],p=d[1],q=d[2],r=d[3],s=d[4]);else{d.sort(function(a,b){return a-b}),p=j(d,1),q=j(d,2),r=j(d,3),o=r-p;if(f.get("showOutliers")){m=s=c;for(u=0;u<e;u++)m===c&&d[u]>p-o*f.get("outlierIQR")&&(m=d[u]),d[u]<r+o*f.get("outlierIQR")&&(s=d[u]);n=d[0],t=d[e-1]}else m=d[0],s=d[e-1]}this.quartiles=[p,q,r],this.lwhisker=m,this.rwhisker=s,this.loutlier=n,this.routlier=t,w=g/(k-i+1),f.get("showOutliers")&&(l=b.ceil(f.get("spotRadius")),g-=2*b.ceil(f.get("spotRadius")),w=g/(k-i+1),n<m&&a.drawCircle((n-i)*w+l,h/2,f.get("spotRadius"),f.get("outlierLineColor"),f.get("outlierFillColor")).append(),t>s&&a.drawCircle((t-i)*w+l,h/2,f.get("spotRadius"),f.get("outlierLineColor"),f.get("outlierFillColor")).append()),a.drawRect(b.round((p-i)*w+l),b.round(h*.1),b.round((r-p)*w),b.round(h*.8),f.get("boxLineColor"),f.get("boxFillColor")).append(),a.drawLine(b.round((m-i)*w+l),b.round(h/2),b.round((p-i)*w+l),b.round(h/2),f.get("lineColor")).append(),a.drawLine(b.round((m-i)*w+l),b.round(h/4),b.round((m-i)*w+l),b.round(h-h/4),f.get("whiskerColor")).append(),a.drawLine(b.round((s-i)*w+l),b.round(h/2),b.round((r-i)*w+l),b.round(h/2),f.get("lineColor")).append(),a.drawLine(b.round((s-i)*w+l),b.round(h/4),b.round((s-i)*w+l),b.round(h-h/4),f.get("whiskerColor")).append(),a.drawLine(b.round((q-i)*w+l),b.round(h*.1),b.round((q-i)*w+l),b.round(h*.9),f.get("medianColor")).append(),f.get("target")&&(v=b.ceil(f.get("spotRadius")),a.drawLine(b.round((f.get("target")-i)*w+l),b.round(h/2-v),b.round((f.get("target")-i)*w+l),b.round(h/2+v),f.get("targetColor")).append(),a.drawLine(b.round((f.get("target")-i)*w+l-v),b.round(h/2),b.round((f.get("target")-i)*w+l+v),b.round(h/2),f.get("targetColor")).append()),a.render()}}),G=g({init:function(a,b,c,d){this.target=a,this.id=b,this.type=c,this.args=d},append:function(){return this.target.appendShape(this),this}}),H=g({_pxregex:/(\d+)(px)?\s*$/i,init:function(a,b,c){if(!a)return;this.width=a,this.height=b,this.target=c,this.lastShapeId=null,c[0]&&(c=c[0]),d.data(c,"_jqs_vcanvas",this)},drawLine:function(a,b,c,d,e,f){return this.drawShape([[a,b],[c,d]],e,f)},drawShape:function(a,b,c,d){return this._genShape("Shape",[a,b,c,d])},drawCircle:function(a,b,c,d,e,f){return this._genShape("Circle",[a,b,c,d,e,f])},drawPieSlice:function(a,b,c,d,e,f,g){return this._genShape("PieSlice",[a,b,c,d,e,f,g])},drawRect:function(a,b,c,d,e,f){return this._genShape("Rect",[a,b,c,d,e,f])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(a,b){d(b).html(a)},_calculatePixelDims:function(a,b,c){var e;e=this._pxregex.exec(b),e?this.pixelHeight=e[1]:this.pixelHeight=d(c).height(),e=this._pxregex.exec(a),e?this.pixelWidth=e[1]:this.pixelWidth=d(c).width()},_genShape:function(a,b){var c=L++;return b.unshift(c),new G(this,c,a,b)},appendShape:function(a){alert("appendShape not implemented")},replaceWithShape:function(a,b){alert("replaceWithShape not implemented")},insertAfterShape:function(a,b){alert("insertAfterShape not implemented")},removeShapeId:function(a){alert("removeShapeId not implemented")},getShapeAt:function(a,b,c){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),I=g(H,{init:function(b,e,f,g){I._super.init.call(this,b,e,f),this.canvas=a.createElement("canvas"),f[0]&&(f=f[0]),d.data(f,"_jqs_vcanvas",this),d(this.canvas).css({display:"inline-block",width:b,height:e,verticalAlign:"top"}),this._insert(this.canvas,f),this._calculatePixelDims(b,e,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=g,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=c,d(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(a,b,d){var e=this.canvas.getContext("2d");return a!==c&&(e.strokeStyle=a),e.lineWidth=d===c?1:d,b!==c&&(e.fillStyle=b),e},reset:function(){var a=this._getContext();a.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=c},_drawShape:function(a,b,d,e,f){var g=this._getContext(d,e,f),h,i;g.beginPath(),g.moveTo(b[0][0]+.5,b[0][1]+.5);for(h=1,i=b.length;h<i;h++)g.lineTo(b[h][0]+.5,b[h][1]+.5);d!==c&&g.stroke(),e!==c&&g.fill(),this.targetX!==c&&this.targetY!==c&&g.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=a)},_drawCircle:function(a,d,e,f,g,h,i){var j=this._getContext(g,h,i);j.beginPath(),j.arc(d,e,f,0,2*b.PI,!1),this.targetX!==c&&this.targetY!==c&&j.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=a),g!==c&&j.stroke(),h!==c&&j.fill()},_drawPieSlice:function(a,b,d,e,f,g,h,i){var j=this._getContext(h,i);j.beginPath(),j.moveTo(b,d),j.arc(b,d,e,f,g,!1),j.lineTo(b,d),j.closePath(),h!==c&&j.stroke(),i&&j.fill(),this.targetX!==c&&this.targetY!==c&&j.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=a)},_drawRect:function(a,b,c,d,e,f,g){return this._drawShape(a,[[b,c],[b+d,c],[b+d,c+e],[b,c+e],[b,c]],f,g)},appendShape:function(a){return this.shapes[a.id]=a,this.shapeseq.push(a.id),this.lastShapeId=a.id,a.id},replaceWithShape:function(a,b){var c=this.shapeseq,d;this.shapes[b.id]=b;for(d=c.length;d--;)c[d]==a&&(c[d]=b.id);delete this.shapes[a]},replaceWithShapes:function(a,b){var c=this.shapeseq,d={},e,f,g;for(f=a.length;f--;)d[a[f]]=!0;for(f=c.length;f--;)e=c[f],d[e]&&(c.splice(f,1),delete this.shapes[e],g=f);for(f=b.length;f--;)c.splice(g,0,b[f].id),this.shapes[b[f].id]=b[f]},insertAfterShape:function(a,b){var c=this.shapeseq,d;for(d=c.length;d--;)if(c[d]===a){c.splice(d+1,0,b.id),this.shapes[b.id]=b;return}},removeShapeId:function(a){var b=this.shapeseq,c;for(c=b.length;c--;)if(b[c]===a){b.splice(c,1);break}delete this.shapes[a]},getShapeAt:function(a,b,c){return this.targetX=b,this.targetY=c,this.render(),this.currentTargetShapeId},render:function(){var a=this.shapeseq,b=this.shapes,c=a.length,d=this._getContext(),e,f,g;d.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(g=0;g<c;g++)e=a[g],f=b[e],this["_draw"+f.type].apply(this,f.args);this.interact||(this.shapes={},this.shapeseq=[])}}),J=g(H,{init:function(b,c,e){var f;J._super.init.call(this,b,c,e),e[0]&&(e=e[0]),d.data(e,"_jqs_vcanvas",this),this.canvas=a.createElement("span"),d(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:b,height:c,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,e),this._calculatePixelDims(b,c,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,f='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"'+' style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",f),this.group=d(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(a,b,d,e,f){var g=[],h,i,j,k,l,m,n;for(n=0,m=b.length;n<m;n++)g[n]=""+b[n][0]+","+b[n][1];return h=g.splice(0,1),f=f===c?1:f,i=d===c?' stroked="false" ':' strokeWeight="'+f+'px" strokeColor="'+d+'" ',j=e===c?' filled="false"':' fillColor="'+e+'" filled="true" ',k=g[0]===g[g.length-1]?"x ":"",l='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+a+'" '+i+j+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+h+" l "+g.join(", ")+" "+k+'e">'+" </v:shape>",l},_drawCircle:function(a,b,d,e,f,g,h){var i,j,k;return b-=e,d-=e,i=f===c?' stroked="false" ':' strokeWeight="'+h+'px" strokeColor="'+f+'" ',j=g===c?' filled="false"':' fillColor="'+g+'" filled="true" ',k='<v:oval  id="jqsshape'+a+'" '+i+j+' style="position:absolute;top:'+d+"px; left:"+b+"px; width:"+e*2+"px; height:"+e*2+'px"></v:oval>',k},_drawPieSlice:function(a,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r;if(g===h)return"";h-g===2*b.PI&&(g=0,h=2*b.PI),l=d+b.round(b.cos(g)*f),m=e+b.round(b.sin(g)*f),n=d+b.round(b.cos(h)*f),o=e+b.round(b.sin(h)*f);if(l===n&&m===o){if(h-g<b.PI)return"";l=n=d+f,m=o=e}return l===n&&m===o&&h-g<b.PI?"":(k=[d-f,e-f,d+f,e+f,l,m,n,o],p=i===c?' stroked="false" ':' strokeWeight="1px" strokeColor="'+i+'" ',q=j===c?' filled="false"':' fillColor="'+j+'" filled="true" ',r='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+a+'" '+p+q+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+d+","+e+" wa "+k.join(", ")+' x e">'+" </v:shape>",r)},_drawRect:function(a,b,c,d,e,f,g){return this._drawShape(a,[[b,c],[b,c+e],[b+d,c+e],[b+d,c],[b,c]],f,g)},reset:function(){this.group.innerHTML=""},appendShape:function(a){var b=this["_draw"+a.type].apply(this,a.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",b):this.prerender+=b,this.lastShapeId=a.id,a.id},replaceWithShape:function(a,b){var c=d("#jqsshape"+a),e=this["_draw"+b.type].apply(this,b.args);c[0].outerHTML=e},replaceWithShapes:function(a,b){var c=d("#jqsshape"+a[0]),e="",f=b.length,g;for(g=0;g<f;g++)e+=this["_draw"+b[g].type].apply(this,b[g].args);c[0].outerHTML=e;for(g=1;g<a.length;g++)d("#jqsshape"+a[g]).remove()},insertAfterShape:function(a,b){var c=d("#jqsshape"+a),e=this["_draw"+b.type].apply(this,b.args);c[0].insertAdjacentHTML("afterEnd",e)},removeShapeId:function(a){var b=d("#jqsshape"+a);this.group.removeChild(b[0])},getShapeAt:function(a,b,c){var d=a.id.substr(8);return d},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})})(document,Math);

// @fileRef bootstrap-datepicker.js 
(function($){var $window=$(window);function UTCDate(){return new Date(Date.UTC.apply(Date,arguments));}
function UTCToday(){var today=new Date();return UTCDate(today.getUTCFullYear(),today.getUTCMonth(),today.getUTCDate());}
var Datepicker=function(element,options){var that=this;this._process_options(options);this.element=$(element);this.isInline=false;this.isInput=this.element.is('input');this.component=this.element.is('.date')?this.element.find('.input-group-addon, .btn-group-addon'):false;this.hasInput=this.component&&this.element.find('input').length;if(this.component&&this.component.length===0)
this.component=false;this.picker=$(DPGlobal.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass('datepicker-inline').appendTo(this.element);}else{this.picker.addClass('datepicker-dropdown dropdown-menu');}
if(this.o.rtl){this.picker.addClass('datepicker-rtl');this.picker.find('.prev i, .next i').toggleClass('icon-arrow-left icon-arrow-right');}
this.viewMode=this.o.startView;if(this.o.calendarWeeks)
this.picker.find('tfoot th.today').attr('colspan',function(i,val){return parseInt(val)+1;});this._allow_update=false;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show();}};Datepicker.prototype={constructor:Datepicker,_process_options:function(opts){this._o=$.extend({},this._o,opts);var o=this.o=$.extend({},this._o);var lang=o.language;if(!dates[lang]){lang=lang.split('-')[0];if(!dates[lang])
lang=defaults.language;}
o.language=lang;switch(o.startView){case 2:case'decade':o.startView=2;break;case 1:case'year':o.startView=1;break;default:o.startView=0;}
switch(o.minViewMode){case 1:case'months':o.minViewMode=1;break;case 2:case'years':o.minViewMode=2;break;default:o.minViewMode=0;}
o.startView=Math.max(o.startView,o.minViewMode);o.weekStart%=7;o.weekEnd=((o.weekStart+6)%7);var format=DPGlobal.parseFormat(o.format);if(o.startDate!==-Infinity){if(!!o.startDate){if(o.startDate instanceof Date)
o.startDate=this._local_to_utc(this._zero_time(o.startDate));else
o.startDate=DPGlobal.parseDate(o.startDate,format,o.language);}else{o.startDate=-Infinity;}}
if(o.endDate!==Infinity){if(!!o.endDate){if(o.endDate instanceof Date)
o.endDate=this._local_to_utc(this._zero_time(o.endDate));else
o.endDate=DPGlobal.parseDate(o.endDate,format,o.language);}else{o.endDate=Infinity;}}
o.daysOfWeekDisabled=o.daysOfWeekDisabled||[];if(!$.isArray(o.daysOfWeekDisabled))
o.daysOfWeekDisabled=o.daysOfWeekDisabled.split(/[,\s]*/);o.daysOfWeekDisabled=$.map(o.daysOfWeekDisabled,function(d){return parseInt(d,10);});var plc=String(o.orientation).toLowerCase().split(/\s+/g),_plc=o.orientation.toLowerCase();plc=$.grep(plc,function(word){return(/^auto|left|right|top|bottom$/).test(word);});o.orientation={x:'auto',y:'auto'};if(!_plc||_plc==='auto');else if(plc.length===1){switch(plc[0]){case'top':case'bottom':o.orientation.y=plc[0];break;case'left':case'right':o.orientation.x=plc[0];break;}}
else{_plc=$.grep(plc,function(word){return(/^left|right$/).test(word);});o.orientation.x=_plc[0]||'auto';_plc=$.grep(plc,function(word){return(/^top|bottom$/).test(word);});o.orientation.y=_plc[0]||'auto';}},_events:[],_secondaryEvents:[],_applyEvents:function(evs){for(var i=0,el,ev;i<evs.length;i++){el=evs[i][0];ev=evs[i][1];el.on(ev);}},_unapplyEvents:function(evs){for(var i=0,el,ev;i<evs.length;i++){el=evs[i][0];ev=evs[i][1];el.off(ev);}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:$.proxy(this.show,this),keyup:$.proxy(this.update,this),keydown:$.proxy(this.keydown,this)}]];}
else if(this.component&&this.hasInput){this._events=[[this.element.find('input'),{focus:$.proxy(this.show,this),keyup:$.proxy(this.update,this),keydown:$.proxy(this.keydown,this)}],[this.component,{click:$.proxy(this.show,this)}]];}
else if(this.element.is('div')){this.isInline=true;}
else{this._events=[[this.element,{click:$.proxy(this.show,this)}]];}
this._secondaryEvents=[[this.picker,{click:$.proxy(this.click,this)}],[$(window),{resize:$.proxy(this.place,this)}],[$(document),{'mousedown touchstart':$.proxy(function(e){if(!(this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length)){this.hide();}},this)}]];},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events);},_detachEvents:function(){this._unapplyEvents(this._events);},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents);},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents);},_trigger:function(event,altdate){var date=altdate||this.date,local_date=this._utc_to_local(date);this.element.trigger({type:event,date:local_date,format:$.proxy(function(altformat){var format=altformat||this.o.format;return DPGlobal.formatDate(date,format,this.o.language);},this)});},show:function(e){if(!this.isInline)
this.picker.appendTo('body');this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();if(e){e.preventDefault();}
this._trigger('show');},hide:function(e){if(this.isInline)return;if(!this.picker.is(':visible'))return;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find('input').val()))
this.setValue();this._trigger('hide');},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date;}},_utc_to_local:function(utc){return new Date(utc.getTime()+(utc.getTimezoneOffset()*60000));},_local_to_utc:function(local){return new Date(local.getTime()-(local.getTimezoneOffset()*60000));},_zero_time:function(local){return new Date(local.getFullYear(),local.getMonth(),local.getDate());},_zero_utc_time:function(utc){return new Date(Date.UTC(utc.getUTCFullYear(),utc.getUTCMonth(),utc.getUTCDate()));},getDate:function(){return this._utc_to_local(this.getUTCDate());},getUTCDate:function(){return this.date;},setDate:function(d){this.setUTCDate(this._local_to_utc(d));},setUTCDate:function(d){this.date=d;this.setValue();},setValue:function(){var formatted=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find('input').val(formatted).change();}}else{this.element.val(formatted).change();}},getFormattedDate:function(format){if(format===undefined)
format=this.o.format;return DPGlobal.formatDate(this.date,format,this.o.language);},setStartDate:function(startDate){this._process_options({startDate:startDate});this.update();this.updateNavArrows();},setEndDate:function(endDate){this._process_options({endDate:endDate});this.update();this.updateNavArrows();},setDaysOfWeekDisabled:function(daysOfWeekDisabled){this._process_options({daysOfWeekDisabled:daysOfWeekDisabled});this.update();this.updateNavArrows();},place:function(){if(this.isInline)return;var calendarWidth=this.picker.outerWidth(),calendarHeight=this.picker.outerHeight(),visualPadding=10,windowWidth=$window.width(),windowHeight=$window.height(),scrollTop=$window.scrollTop();var zIndex=parseInt(this.element.parents().filter(function(){return $(this).css('z-index')!='auto';}).first().css('z-index'))+10;var offset=this.component?this.component.parent().offset():this.element.offset();var height=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var width=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var left=offset.left,top=offset.top;this.picker.removeClass('datepicker-orient-top datepicker-orient-bottom '+'datepicker-orient-right datepicker-orient-left');if(this.o.orientation.x!=='auto'){this.picker.addClass('datepicker-orient-'+this.o.orientation.x);if(this.o.orientation.x==='right')
left-=calendarWidth-width;}
else{this.picker.addClass('datepicker-orient-left');if(offset.left<0)
left-=offset.left-visualPadding;else if(offset.left+calendarWidth>windowWidth)
left=windowWidth-calendarWidth-visualPadding;}
var yorient=this.o.orientation.y,top_overflow,bottom_overflow;if(yorient==='auto'){top_overflow=-scrollTop+offset.top-calendarHeight;bottom_overflow=scrollTop+windowHeight-(offset.top+height+calendarHeight);if(Math.max(top_overflow,bottom_overflow)===bottom_overflow)
yorient='top';else
yorient='bottom';}
this.picker.addClass('datepicker-orient-'+yorient);if(yorient==='top')
top+=height;else
top-=calendarHeight+parseInt(this.picker.css('padding-top'));this.picker.css({top:top,left:left,zIndex:zIndex});},_allow_update:true,update:function(){if(!this._allow_update)return;var oldDate=new Date(this.date),date,fromArgs=false;if(arguments&&arguments.length&&(typeof arguments[0]==='string'||arguments[0]instanceof Date)){date=arguments[0];if(date instanceof Date)
date=this._local_to_utc(date);fromArgs=true;}else{date=this.isInput?this.element.val():this.element.data('date')||this.element.find('input').val();delete this.element.data().date;}
this.date=DPGlobal.parseDate(date,this.o.format,this.o.language);if(fromArgs){this.setValue();}else if(date){if(oldDate.getTime()!==this.date.getTime())
this._trigger('changeDate');}else{this._trigger('clearDate');}
if(this.date<this.o.startDate){this.viewDate=new Date(this.o.startDate);this.date=new Date(this.o.startDate);}else if(this.date>this.o.endDate){this.viewDate=new Date(this.o.endDate);this.date=new Date(this.o.endDate);}else{this.viewDate=new Date(this.date);this.date=new Date(this.date);}
this.fill();},fillDow:function(){var dowCnt=this.o.weekStart,html='<tr>';if(this.o.calendarWeeks){var cell='<th class="cw">&nbsp;</th>';html+=cell;this.picker.find('.datepicker-days thead tr:first-child').prepend(cell);}
while(dowCnt<this.o.weekStart+7){html+='<th class="dow">'+dates[this.o.language].daysMin[(dowCnt++)%7]+'</th>';}
html+='</tr>';this.picker.find('.datepicker-days thead').append(html);},fillMonths:function(){var html='',i=0;while(i<12){html+='<span class="month">'+dates[this.o.language].monthsShort[i++]+'</span>';}
this.picker.find('.datepicker-months td').html(html);},setRange:function(range){if(!range||!range.length)
delete this.range;else
this.range=$.map(range,function(d){return d.valueOf();});this.fill();},getClassNames:function(date){var cls=[],year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth(),currentDate=this.date.valueOf(),today=new Date();if(date.getUTCFullYear()<year||(date.getUTCFullYear()==year&&date.getUTCMonth()<month)){cls.push('old');}else if(date.getUTCFullYear()>year||(date.getUTCFullYear()==year&&date.getUTCMonth()>month)){cls.push('new');}
if(this.o.todayHighlight&&date.getUTCFullYear()==today.getFullYear()&&date.getUTCMonth()==today.getMonth()&&date.getUTCDate()==today.getDate()){cls.push('today');}
if(date.valueOf()==currentDate){cls.push('active');}
if(date.valueOf()<this.o.startDate||date.valueOf()>this.o.endDate||$.inArray(date.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){cls.push('disabled');}
if(this.range){if(date>this.range[0]&&date<this.range[this.range.length-1]){cls.push('range');}
if($.inArray(date.valueOf(),this.range)!=-1){cls.push('selected');}}
return cls;},fill:function(){var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth(),startYear=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,startMonth=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,endYear=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,endMonth=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,currentDate=this.date&&this.date.valueOf(),tooltip;this.picker.find('.datepicker-days thead th.datepicker-switch').text(dates[this.o.language].months[month]+' '+year);this.picker.find('tfoot th.today').text(dates[this.o.language].today).toggle(this.o.todayBtn!==false);this.picker.find('tfoot th.clear').text(dates[this.o.language].clear).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var prevMonth=UTCDate(year,month-1,28,0,0,0,0),day=DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(),prevMonth.getUTCMonth());prevMonth.setUTCDate(day);prevMonth.setUTCDate(day-(prevMonth.getUTCDay()-this.o.weekStart+7)%7);var nextMonth=new Date(prevMonth);nextMonth.setUTCDate(nextMonth.getUTCDate()+42);nextMonth=nextMonth.valueOf();var html=[];var clsName;while(prevMonth.valueOf()<nextMonth){if(prevMonth.getUTCDay()==this.o.weekStart){html.push('<tr>');if(this.o.calendarWeeks){var
ws=new Date(+prevMonth+(this.o.weekStart-prevMonth.getUTCDay()-7)%7*864e5),th=new Date(+ws+(7+4-ws.getUTCDay())%7*864e5),yth=new Date(+(yth=UTCDate(th.getUTCFullYear(),0,1))+(7+4-yth.getUTCDay())%7*864e5),calWeek=(th-yth)/864e5/7+1;html.push('<td class="cw">'+calWeek+'</td>');}}
clsName=this.getClassNames(prevMonth);clsName.push('day');if(this.o.beforeShowDay!==$.noop){var before=this.o.beforeShowDay(this._utc_to_local(prevMonth));if(before===undefined)
before={};else if(typeof(before)==='boolean')
before={enabled:before};else if(typeof(before)==='string')
before={classes:before};if(before.enabled===false)
clsName.push('disabled');if(before.classes)
clsName=clsName.concat(before.classes.split(/\s+/));if(before.tooltip)
tooltip=before.tooltip;}
clsName=$.unique(clsName);html.push('<td class="'+clsName.join(' ')+'"'+(tooltip?' title="'+tooltip+'"':'')+'>'+prevMonth.getUTCDate()+'</td>');if(prevMonth.getUTCDay()==this.o.weekEnd){html.push('</tr>');}
prevMonth.setUTCDate(prevMonth.getUTCDate()+1);}
this.picker.find('.datepicker-days tbody').empty().append(html.join(''));var currentYear=this.date&&this.date.getUTCFullYear();var months=this.picker.find('.datepicker-months').find('th:eq(1)').text(year).end().find('span').removeClass('active');if(currentYear&&currentYear==year){months.eq(this.date.getUTCMonth()).addClass('active');}
if(year<startYear||year>endYear){months.addClass('disabled');}
if(year==startYear){months.slice(0,startMonth).addClass('disabled');}
if(year==endYear){months.slice(endMonth+1).addClass('disabled');}
html='';year=parseInt(year/10,10)*10;var yearCont=this.picker.find('.datepicker-years').find('th:eq(1)').text(year+'-'+(year+9)).end().find('td');year-=1;for(var i=-1;i<11;i++){html+='<span class="year'+(i==-1?' old':i==10?' new':'')+(currentYear==year?' active':'')+(year<startYear||year>endYear?' disabled':'')+'">'+year+'</span>';year+=1;}
yearCont.html(html);},updateNavArrows:function(){if(!this._allow_update)return;var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&year<=this.o.startDate.getUTCFullYear()&&month<=this.o.startDate.getUTCMonth()){this.picker.find('.prev').css({visibility:'hidden'});}else{this.picker.find('.prev').css({visibility:'visible'});}
if(this.o.endDate!==Infinity&&year>=this.o.endDate.getUTCFullYear()&&month>=this.o.endDate.getUTCMonth()){this.picker.find('.next').css({visibility:'hidden'});}else{this.picker.find('.next').css({visibility:'visible'});}
break;case 1:case 2:if(this.o.startDate!==-Infinity&&year<=this.o.startDate.getUTCFullYear()){this.picker.find('.prev').css({visibility:'hidden'});}else{this.picker.find('.prev').css({visibility:'visible'});}
if(this.o.endDate!==Infinity&&year>=this.o.endDate.getUTCFullYear()){this.picker.find('.next').css({visibility:'hidden'});}else{this.picker.find('.next').css({visibility:'visible'});}
break;}},click:function(e){e.preventDefault();var target=$(e.target).closest('span, td, th');if(target.length==1){switch(target[0].nodeName.toLowerCase()){case'th':switch(target[0].className){case'datepicker-switch':this.showMode(1);break;case'prev':case'next':var dir=DPGlobal.modes[this.viewMode].navStep*(target[0].className=='prev'?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,dir);this._trigger('changeMonth',this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,dir);if(this.viewMode===1)
this._trigger('changeYear',this.viewDate);break;}
this.fill();break;case'today':var date=new Date();date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0);this.showMode(-2);var which=this.o.todayBtn=='linked'?null:'view';this._setDate(date,which);break;case'clear':var element;if(this.isInput)
element=this.element;else if(this.component)
element=this.element.find('input');if(element)
element.val("").change();this._trigger('changeDate');this.update();if(this.o.autoclose)
this.hide();break;}
break;case'span':if(!target.is('.disabled')){this.viewDate.setUTCDate(1);if(target.is('.month')){var day=1;var month=target.parent().find('span').index(target);var year=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(month);this._trigger('changeMonth',this.viewDate);if(this.o.minViewMode===1){this._setDate(UTCDate(year,month,day,0,0,0,0));}}else{var year=parseInt(target.text(),10)||0;var day=1;var month=0;this.viewDate.setUTCFullYear(year);this._trigger('changeYear',this.viewDate);if(this.o.minViewMode===2){this._setDate(UTCDate(year,month,day,0,0,0,0));}}
this.showMode(-1);this.fill();}
break;case'td':if(target.is('.day')&&!target.is('.disabled')){var day=parseInt(target.text(),10)||1;var year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth();if(target.is('.old')){if(month===0){month=11;year-=1;}else{month-=1;}}else if(target.is('.new')){if(month==11){month=0;year+=1;}else{month+=1;}}
this._setDate(UTCDate(year,month,day,0,0,0,0));}
break;}}},_setDate:function(date,which){if(!which||which=='date')
this.date=new Date(date);if(!which||which=='view')
this.viewDate=new Date(date);this.fill();this.setValue();this._trigger('changeDate');var element;if(this.isInput){element=this.element;}else if(this.component){element=this.element.find('input');}
if(element){element.change();}
if(this.o.autoclose&&(!which||which=='date')){this.hide();}},moveMonth:function(date,dir){if(!dir)return date;var new_date=new Date(date.valueOf()),day=new_date.getUTCDate(),month=new_date.getUTCMonth(),mag=Math.abs(dir),new_month,test;dir=dir>0?1:-1;if(mag==1){test=dir==-1?function(){return new_date.getUTCMonth()==month;}:function(){return new_date.getUTCMonth()!=new_month;};new_month=month+dir;new_date.setUTCMonth(new_month);if(new_month<0||new_month>11)
new_month=(new_month+12)%12;}else{for(var i=0;i<mag;i++)
new_date=this.moveMonth(new_date,dir);new_month=new_date.getUTCMonth();new_date.setUTCDate(day);test=function(){return new_month!=new_date.getUTCMonth();};}
while(test()){new_date.setUTCDate(--day);new_date.setUTCMonth(new_month);}
return new_date;},moveYear:function(date,dir){return this.moveMonth(date,dir*12);},dateWithinRange:function(date){return date>=this.o.startDate&&date<=this.o.endDate;},keydown:function(e){if(this.picker.is(':not(:visible)')){if(e.keyCode==27)
this.show();return;}
var dateChanged=false,dir,day,month,newDate,newViewDate;switch(e.keyCode){case 27:this.hide();e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;dir=e.keyCode==37?-1:1;if(e.ctrlKey){newDate=this.moveYear(this.date,dir);newViewDate=this.moveYear(this.viewDate,dir);this._trigger('changeYear',this.viewDate);}else if(e.shiftKey){newDate=this.moveMonth(this.date,dir);newViewDate=this.moveMonth(this.viewDate,dir);this._trigger('changeMonth',this.viewDate);}else{newDate=new Date(this.date);newDate.setUTCDate(this.date.getUTCDate()+dir);newViewDate=new Date(this.viewDate);newViewDate.setUTCDate(this.viewDate.getUTCDate()+dir);}
if(this.dateWithinRange(newDate)){this.date=newDate;this.viewDate=newViewDate;this.setValue();this.update();e.preventDefault();dateChanged=true;}
break;case 38:case 40:if(!this.o.keyboardNavigation)break;dir=e.keyCode==38?-1:1;if(e.ctrlKey){newDate=this.moveYear(this.date,dir);newViewDate=this.moveYear(this.viewDate,dir);this._trigger('changeYear',this.viewDate);}else if(e.shiftKey){newDate=this.moveMonth(this.date,dir);newViewDate=this.moveMonth(this.viewDate,dir);this._trigger('changeMonth',this.viewDate);}else{newDate=new Date(this.date);newDate.setUTCDate(this.date.getUTCDate()+dir*7);newViewDate=new Date(this.viewDate);newViewDate.setUTCDate(this.viewDate.getUTCDate()+dir*7);}
if(this.dateWithinRange(newDate)){this.date=newDate;this.viewDate=newViewDate;this.setValue();this.update();e.preventDefault();dateChanged=true;}
break;case 13:this.hide();e.preventDefault();break;case 9:this.hide();break;}
if(dateChanged){this._trigger('changeDate');var element;if(this.isInput){element=this.element;}else if(this.component){element=this.element.find('input');}
if(element){element.change();}}},showMode:function(dir){if(dir){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+dir));}
this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).css('display','block');this.updateNavArrows();}};var DateRangePicker=function(element,options){this.element=$(element);this.inputs=$.map(options.inputs,function(i){return i.jquery?i[0]:i;});delete options.inputs;$(this.inputs).datepicker(options).bind('changeDate',$.proxy(this.dateUpdated,this));this.pickers=$.map(this.inputs,function(i){return $(i).data('datepicker');});this.updateDates();};DateRangePicker.prototype={updateDates:function(){this.dates=$.map(this.pickers,function(i){return i.date;});this.updateRanges();},updateRanges:function(){var range=$.map(this.dates,function(d){return d.valueOf();});$.each(this.pickers,function(i,p){p.setRange(range);});},dateUpdated:function(e){var dp=$(e.target).data('datepicker'),new_date=dp.getUTCDate(),i=$.inArray(e.target,this.inputs),l=this.inputs.length;if(i==-1)return;if(new_date<this.dates[i]){while(i>=0&&new_date<this.dates[i]){this.pickers[i--].setUTCDate(new_date);}}
else if(new_date>this.dates[i]){while(i<l&&new_date>this.dates[i]){this.pickers[i++].setUTCDate(new_date);}}
this.updateDates();},remove:function(){$.map(this.pickers,function(p){p.remove();});delete this.element.data().datepicker;}};function opts_from_el(el,prefix){var data=$(el).data(),out={},inkey,replace=new RegExp('^'+prefix.toLowerCase()+'([A-Z])'),prefix=new RegExp('^'+prefix.toLowerCase());for(var key in data)
if(prefix.test(key)){inkey=key.replace(replace,function(_,a){return a.toLowerCase();});out[inkey]=data[key];}
return out;}
function opts_from_locale(lang){var out={};if(!dates[lang]){lang=lang.split('-')[0]
if(!dates[lang])
return;}
var d=dates[lang];$.each(locale_opts,function(i,k){if(k in d)
out[k]=d[k];});return out;}
var old=$.fn.datepicker;$.fn.datepicker=function(option){var args=Array.apply(null,arguments);args.shift();var internal_return,this_return;this.each(function(){var $this=$(this),data=$this.data('datepicker'),options=typeof option=='object'&&option;if(!data){var elopts=opts_from_el(this,'date'),xopts=$.extend({},defaults,elopts,options),locopts=opts_from_locale(xopts.language),opts=$.extend({},defaults,locopts,elopts,options);if($this.is('.input-daterange')||opts.inputs){var ropts={inputs:opts.inputs||$this.find('input').toArray()};$this.data('datepicker',(data=new DateRangePicker(this,$.extend(opts,ropts))));}
else{$this.data('datepicker',(data=new Datepicker(this,opts)));}}
if(typeof option=='string'&&typeof data[option]=='function'){internal_return=data[option].apply(data,args);if(internal_return!==undefined)
return false;}});if(internal_return!==undefined)
return internal_return;else
return this;};var defaults=$.fn.datepicker.defaults={autoclose:false,beforeShowDay:$.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:'mm/dd/yyyy',keyboardNavigation:true,language:'en',minViewMode:0,orientation:"auto",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var locale_opts=$.fn.datepicker.locale_opts=['format','rtl','weekStart'];$.fn.datepicker.Constructor=Datepicker;var dates=$.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};var DPGlobal={modes:[{clsName:'days',navFnc:'Month',navStep:1},{clsName:'months',navFnc:'FullYear',navStep:1},{clsName:'years',navFnc:'FullYear',navStep:10}],isLeapYear:function(year){return(((year%4===0)&&(year%100!==0))||(year%400===0));},getDaysInMonth:function(year,month){return[31,(DPGlobal.isLeapYear(year)?29:28),31,30,31,30,31,31,30,31,30,31][month];},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(format){var separators=format.replace(this.validParts,'\0').split('\0'),parts=format.match(this.validParts);if(!separators||!separators.length||!parts||parts.length===0){throw new Error("Invalid date format.");}
return{separators:separators,parts:parts};},parseDate:function(date,format,language){if(date instanceof Date)return date;if(typeof format==='string')
format=DPGlobal.parseFormat(format);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(date)){var part_re=/([\-+]\d+)([dmwy])/,parts=date.match(/([\-+]\d+)([dmwy])/g),part,dir;date=new Date();for(var i=0;i<parts.length;i++){part=part_re.exec(parts[i]);dir=parseInt(part[1]);switch(part[2]){case'd':date.setUTCDate(date.getUTCDate()+dir);break;case'm':date=Datepicker.prototype.moveMonth.call(Datepicker.prototype,date,dir);break;case'w':date.setUTCDate(date.getUTCDate()+dir*7);break;case'y':date=Datepicker.prototype.moveYear.call(Datepicker.prototype,date,dir);break;}}
return UTCDate(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),0,0,0);}
var parts=date&&date.match(this.nonpunctuation)||[],date=new Date(),parsed={},setters_order=['yyyy','yy','M','MM','m','mm','d','dd'],setters_map={yyyy:function(d,v){return d.setUTCFullYear(v);},yy:function(d,v){return d.setUTCFullYear(2000+v);},m:function(d,v){if(isNaN(d))
return d;v-=1;while(v<0)v+=12;v%=12;d.setUTCMonth(v);while(d.getUTCMonth()!=v)
d.setUTCDate(d.getUTCDate()-1);return d;},d:function(d,v){return d.setUTCDate(v);}},val,filtered,part;setters_map['M']=setters_map['MM']=setters_map['mm']=setters_map['m'];setters_map['dd']=setters_map['d'];date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0);var fparts=format.parts.slice();if(parts.length!=fparts.length){fparts=$(fparts).filter(function(i,p){return $.inArray(p,setters_order)!==-1;}).toArray();}
if(parts.length==fparts.length){for(var i=0,cnt=fparts.length;i<cnt;i++){val=parseInt(parts[i],10);part=fparts[i];if(isNaN(val)){switch(part){case'MM':filtered=$(dates[language].months).filter(function(){var m=this.slice(0,parts[i].length),p=parts[i].slice(0,m.length);return m==p;});val=$.inArray(filtered[0],dates[language].months)+1;break;case'M':filtered=$(dates[language].monthsShort).filter(function(){var m=this.slice(0,parts[i].length),p=parts[i].slice(0,m.length);return m==p;});val=$.inArray(filtered[0],dates[language].monthsShort)+1;break;}}
parsed[part]=val;}
for(var i=0,_date,s;i<setters_order.length;i++){s=setters_order[i];if(s in parsed&&!isNaN(parsed[s])){_date=new Date(date);setters_map[s](_date,parsed[s]);if(!isNaN(_date))
date=_date;}}}
return date;},formatDate:function(date,format,language){if(typeof format==='string')
format=DPGlobal.parseFormat(format);var val={d:date.getUTCDate(),D:dates[language].daysShort[date.getUTCDay()],DD:dates[language].days[date.getUTCDay()],m:date.getUTCMonth()+1,M:dates[language].monthsShort[date.getUTCMonth()],MM:dates[language].months[date.getUTCMonth()],yy:date.getUTCFullYear().toString().substring(2),yyyy:date.getUTCFullYear()};val.dd=(val.d<10?'0':'')+val.d;val.mm=(val.m<10?'0':'')+val.m;var date=[],seps=$.extend([],format.separators);for(var i=0,cnt=format.parts.length;i<=cnt;i++){if(seps.length)
date.push(seps.shift());date.push(val[format.parts[i]]);}
return date.join('');},headTemplate:'<thead>'+'<tr>'+'<th class="prev">&laquo;</th>'+'<th colspan="5" class="datepicker-switch"></th>'+'<th class="next">&raquo;</th>'+'</tr>'+'</thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};DPGlobal.template='<div class="datepicker">'+'<div class="datepicker-days">'+'<table class=" table-condensed">'+
DPGlobal.headTemplate+'<tbody></tbody>'+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datepicker-months">'+'<table class="table-condensed">'+
DPGlobal.headTemplate+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datepicker-years">'+'<table class="table-condensed">'+
DPGlobal.headTemplate+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'</div>';$.fn.datepicker.DPGlobal=DPGlobal;$.fn.datepicker.noConflict=function(){$.fn.datepicker=old;return this;};$(document).on('focus.datepicker.data-api click.datepicker.data-api','[data-provide="datepicker"]',function(e){var $this=$(this);if($this.data('datepicker'))return;e.preventDefault();$this.datepicker('show');});}(window.jQuery));

// @fileRef sparkline.init.js 
(function($){$(window).on('load',function(){setTimeout(function(){$(".sparkline").each(function()
{var d=$(this).data('data')||"html";$(this).sparkline(d,{type:'bar',height:'70',barWidth:10,barSpacing:8,zeroAxis:false,stackedBarColor:[primaryColor,"#dedede"],colorMap:$(this).data('colors')?$(this).data('colors').split(","):[],enableTagOptions:true});});},100);});})(jQuery);

// @fileRef core.init.js 
if(window.location!=window.parent.location)
top.location.href=document.location.href;(function($,window)
{window.onunload=function(){};$.expr[':'].scrollable=function(elem)
{var scrollable=false,props=['','-x','-y'],re=/^(?:auto|scroll)$/i,elem=$(elem);$.each(props,function(i,v){return!(scrollable=scrollable||re.test(elem.css('overflow'+v)));});return scrollable;};window.beautify=function(source)
{var output,opts={};opts.preserve_newlines=false;output=html_beautify(source,opts);return output;}
window.mt_rand=function(min,max)
{var argc=arguments.length;if(argc===0){min=0;max=2147483647;}
else if(argc===1){throw new Error('Warning: mt_rand() expects exactly 2 parameters, 1 given');}
else{min=parseInt(min,10);max=parseInt(max,10);}
return Math.floor(Math.random()*(max-min+1))+min;}
function scrollTo(id)
{if($(id).length)
{var ns=$(id).closest('.hasNiceScroll');if(ns.length)
{var nso=ns.getNiceScroll();if(nso.length)
{var e=nso[0]
idOffset=$(id).offset().top,nsOffset=ns.offset().top,eOffset=e.getScrollTop(),scrollDown=idOffset-nsOffset+eOffset;nso[0].doScrollTop(scrollDown);}}
else
$('html,body').animate({scrollTop:$(id).offset().top},'slow');}}
window.resizeNiceScroll=function()
{if(typeof $.fn.niceScroll=='undefined')
return;setTimeout(function(){$('.hasNiceScroll, #menu_kis, #menu').getNiceScroll().show().resize();if($('.container-fluid').is('.menu-hidden'))
$('#menu_kis, #menu').getNiceScroll().hide();},100);}
$('#content .modal').appendTo('body');$('body').tooltip({selector:'[data-toggle="tooltip"]'});$('[data-toggle="popover"]').popover();$('[data-toggle="print"]').click(function(e)
{e.preventDefault();window.print();});$('.carousel').carousel();if($('.prettyprint').length&&typeof prettyPrint!='undefined')
prettyPrint();$('[data-toggle="scrollTo"]').on('click',function(e){e.preventDefault();scrollTo($(this).attr('href'));});$('ul.collapse').on('show.bs.collapse',function(e)
{e.stopPropagation();$(this).closest('li').addClass('active');}).on('hidden.bs.collapse',function(e)
{e.stopPropagation();$(this).closest('li').removeClass('active');});window.enableContentNiceScroll=function(hide)
{if($('html').is('.ie')||Modernizr.touch)
return;if(typeof $.fn.niceScroll=='undefined')
return;if(typeof hide=='undefined')
var hide=true;$('#content .col-app, .col-separator, .applyNiceScroll').filter(':scrollable').not('.col-unscrollable').filter(function(){return!$(this).find('> .col-table').length;}).addClass('hasNiceScroll').each(function()
{$(this).niceScroll({horizrailenabled:false,zindex:2,cursorborder:"none",cursorborderradius:"0",cursorcolor:primaryColor});if(hide==true)
$(this).getNiceScroll().hide();else
$(this).getNiceScroll().resize().show();});}
window.disableContentNiceScroll=function()
{if(typeof $.fn.niceScroll=='undefined')
return;$('#content .hasNiceScroll').getNiceScroll().remove();}
enableContentNiceScroll();if($('html').is('.ie'))
$('html').removeClass('app');if(typeof $.fn.niceScroll!='undefined')
{$('#menu > div').add('#menu_kis > div').addClass('hasNiceScroll').niceScroll({horizrailenabled:false,zindex:2,cursorborder:"none",cursorborderradius:"0",cursorcolor:primaryColor}).hide();}
if(typeof coreInit=='undefined')
{$('body').on('mouseenter','[data-toggle="dropdown"].dropdown-hover',function()
{if(!$(this).parent('.dropdown').is('.open'))
$(this).click();});}
else{$('[data-toggle="dropdown"]').dropdown();}
$('.navbar.main').add('#menu-top').on('mouseleave',function(){$(this).find('.dropdown.open').find('> [data-toggle="dropdown"]').click();});$('[data-height]').each(function(){$(this).css({'height':$(this).data('height')});});if(typeof $.fn.niceScroll!=='undefined')
{$('.app [data-toggle="tab"]').on('shown.bs.tab',function(e)
{$('.hasNiceScroll').getNiceScroll().resize();});}
window.enableNavbarMenusHover=function(){$('.navbar.main [data-toggle="dropdown"]').add('#menu-top [data-toggle="dropdown"]').addClass('dropdown-hover');}
window.disableNavbarMenusHover=function(){$('.navbar.main [data-toggle="dropdown"]').add('#menu-top [data-toggle="dropdown"]').removeClass('dropdown-hover');}
window.enableResponsiveNavbarSubmenus=function(){$('.navbar .dropdown-submenu > a').on('click',function(e){e.preventDefault();e.stopPropagation();$(this).parent().toggleClass('open');});}
window.disableResponsiveNavbarSubmenus=function(){$('.navbar .dropdown-submenu > a').off('click').parent().removeClass('open');}
if(typeof $.fn.setBreakpoints!=='undefined')
{$(window).setBreakpoints({distinct:false,breakpoints:[768,992]});$(window).bind('exitBreakpoint768',function(){$('.container-fluid').addClass('menu-hidden');disableNavbarMenusHover();enableResponsiveNavbarSubmenus();});$(window).bind('enterBreakpoint768',function(){$('.container-fluid').removeClass('menu-hidden');enableNavbarMenusHover();disableResponsiveNavbarSubmenus();});$(window).bind('exitBreakpoint992',function(){disableContentNiceScroll();});$(window).bind('enterBreakpoint992',function(){enableContentNiceScroll(false);});}
window.coreInit=true;$(window).on('load',function()
{window.loadTriggered=true;if($(window).width()<992&&typeof $.fn.niceScroll!=='undefined')
$('.hasNiceScroll').getNiceScroll().stop();if($(window).width()<768)
enableResponsiveNavbarSubmenus();else
enableNavbarMenusHover();if(typeof animations=='undefined'&&typeof $.fn.niceScroll!=='undefined')
$('.hasNiceScroll, #menu_kis, #menu').getNiceScroll().show().resize();if(typeof Holder!='undefined')
{Holder.add_theme("dark",{background:"#424242",foreground:"#aaa",size:9}).run();Holder.add_theme("white",{background:"#fff",foreground:"#c9c9c9",size:9}).run();}
if($('.scripts-async').length)
$('.scripts-async .container-fluid').css('visibility','visible');});setTimeout(function(){if(!window.loadTriggered)
$(window).trigger('load');},2000);})(jQuery,window);

// @fileRef jquery.base64.js 
jQuery.base64=(function($){var _PADCHAR="=",_ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_VERSION="1.0";function _getbyte64(s,i){var idx=_ALPHA.indexOf(s.charAt(i));if(idx===-1){throw"Cannot decode base64";}
return idx;}
function _decode(s){var pads=0,i,b10,imax=s.length,x=[];s=String(s);if(imax===0){return s;}
if(imax%4!==0){throw"Cannot decode base64";}
if(s.charAt(imax-1)===_PADCHAR){pads=1;if(s.charAt(imax-2)===_PADCHAR){pads=2;}
imax-=4;}
for(i=0;i<imax;i+=4){b10=(_getbyte64(s,i)<<18)|(_getbyte64(s,i+1)<<12)|(_getbyte64(s,i+2)<<6)|_getbyte64(s,i+3);x.push(String.fromCharCode(b10>>16,(b10>>8)&0xff,b10&0xff));}
switch(pads){case 1:b10=(_getbyte64(s,i)<<18)|(_getbyte64(s,i+1)<<12)|(_getbyte64(s,i+2)<<6);x.push(String.fromCharCode(b10>>16,(b10>>8)&0xff));break;case 2:b10=(_getbyte64(s,i)<<18)|(_getbyte64(s,i+1)<<12);x.push(String.fromCharCode(b10>>16));break;}
return x.join("");}
function _getbyte(s,i){var x=s.charCodeAt(i);if(x>255){throw"INVALID_CHARACTER_ERR: DOM Exception 5";}
return x;}
function _encode(s){if(arguments.length!==1){throw"SyntaxError: exactly one argument required";}
s=String(s);var i,b10,x=[],imax=s.length-s.length%3;if(s.length===0){return s;}
for(i=0;i<imax;i+=3){b10=(_getbyte(s,i)<<16)|(_getbyte(s,i+1)<<8)|_getbyte(s,i+2);x.push(_ALPHA.charAt(b10>>18));x.push(_ALPHA.charAt((b10>>12)&0x3F));x.push(_ALPHA.charAt((b10>>6)&0x3f));x.push(_ALPHA.charAt(b10&0x3f));}
switch(s.length-imax){case 1:b10=_getbyte(s,i)<<16;x.push(_ALPHA.charAt(b10>>18)+_ALPHA.charAt((b10>>12)&0x3F)+_PADCHAR+_PADCHAR);break;case 2:b10=(_getbyte(s,i)<<16)|(_getbyte(s,i+1)<<8);x.push(_ALPHA.charAt(b10>>18)+_ALPHA.charAt((b10>>12)&0x3F)+_ALPHA.charAt((b10>>6)&0x3f)+_PADCHAR);break;}
return x.join("");}
return{decode:_decode,encode:_encode,VERSION:_VERSION};}(jQuery));

// @fileRef tableExport.js 
(function($){$.fn.extend({tableExport:function(options){var defaults={separator:',',ignoreColumn:[],tableName:'yourTableName',type:'csv',pdfFontSize:14,pdfLeftMargin:20,escape:'true',htmlContent:'false',consoleLog:'false'};var options=$.extend(defaults,options);var el=this;if(defaults.type=='csv'||defaults.type=='txt'){var tdData="";$(el).find('thead').find('tr').each(function(){tdData+="\n";$(this).filter(':visible').find('th').each(function(index,data){if($(this).css('display')!='none'){if(defaults.ignoreColumn.indexOf(index)==-1){tdData+='"'+parseString($(this))+'"'+defaults.separator;}}});tdData=$.trim(tdData);tdData=$.trim(tdData).substring(0,tdData.length-1);});$(el).find('tbody').find('tr').each(function(){tdData+="\n";$(this).filter(':visible').find('td').each(function(index,data){if($(this).css('display')!='none'){if(defaults.ignoreColumn.indexOf(index)==-1){tdData+='"'+parseString($(this))+'"'+defaults.separator;}}});tdData=$.trim(tdData).substring(0,tdData.length-1);});if(defaults.consoleLog=='true'){console.log(tdData);}
var base64data="base64,"+$.base64.encode(tdData);window.open('data:application/'+defaults.type+';filename=exportData;'+base64data);}else if(defaults.type=='sql'){var tdData="INSERT INTO `"+defaults.tableName+"` (";$(el).find('thead').find('tr').each(function(){$(this).filter(':visible').find('th').each(function(index,data){if($(this).css('display')!='none'){if(defaults.ignoreColumn.indexOf(index)==-1){tdData+='`'+parseString($(this))+'`,';}}});tdData=$.trim(tdData);tdData=$.trim(tdData).substring(0,tdData.length-1);});tdData+=") VALUES ";$(el).find('tbody').find('tr').each(function(){tdData+="(";$(this).filter(':visible').find('td').each(function(index,data){if($(this).css('display')!='none'){if(defaults.ignoreColumn.indexOf(index)==-1){tdData+='"'+parseString($(this))+'",';}}});tdData=$.trim(tdData).substring(0,tdData.length-1);tdData+="),";});tdData=$.trim(tdData).substring(0,tdData.length-1);tdData+=";";if(defaults.consoleLog=='true'){console.log(tdData);}
var base64data="base64,"+$.base64.encode(tdData);window.open('data:application/sql;filename=exportData;'+base64data);}else if(defaults.type=='json'){var jsonHeaderArray=[];$(el).find('thead').find('tr').each(function(){var tdData="";var jsonArrayTd=[];$(this).filter(':visible').find('th').each(function(index,data){if($(this).css('display')!='none'){if(defaults.ignoreColumn.indexOf(index)==-1){jsonArrayTd.push(parseString($(this)));}}});jsonHeaderArray.push(jsonArrayTd);});var jsonArray=[];$(el).find('tbody').find('tr').each(function(){var tdData="";var jsonArrayTd=[];$(this).filter(':visible').find('td').each(function(index,data){if($(this).css('display')!='none'){if(defaults.ignoreColumn.indexOf(index)==-1){jsonArrayTd.push(parseString($(this)));}}});jsonArray.push(jsonArrayTd);});var jsonExportArray=[];jsonExportArray.push({header:jsonHeaderArray,data:jsonArray});if(defaults.consoleLog=='true'){console.log(JSON.stringify(jsonExportArray));}
var base64data="base64,"+$.base64.encode(JSON.stringify(jsonExportArray));window.open('data:application/json;filename=exportData;'+base64data);}else if(defaults.type=='xml'){var xml='<?xml version="1.0" encoding="utf-8"?>';xml+='<tabledata><fields>';$(el).find('thead').find('tr').each(function(){$(this).filter(':visible').find('th').each(function(index,data){if($(this).css('display')!='none'){if(defaults.ignoreColumn.indexOf(index)==-1){xml+="<field>"+parseString($(this))+"</field>";}}});});xml+='</fields><data>';var rowCount=1;$(el).find('tbody').find('tr').each(function(){xml+='<row id="'+rowCount+'">';var colCount=0;$(this).filter(':visible').find('td').each(function(index,data){if($(this).css('display')!='none'){if(defaults.ignoreColumn.indexOf(index)==-1){xml+="<column-"+colCount+">"+parseString($(this))+"</column-"+colCount+">";}}
colCount++;});rowCount++;xml+='</row>';});xml+='</data></tabledata>'
if(defaults.consoleLog=='true'){console.log(xml);}
var base64data="base64,"+$.base64.encode(xml);window.open('data:application/xml;filename=exportData;'+base64data);}else if(defaults.type=='excel'||defaults.type=='doc'||defaults.type=='powerpoint'){var excel="<table>";$(el).find('thead').find('tr').each(function(){excel+="<tr>";$(this).filter(':visible').find('th').each(function(index,data){if($(this).css('display')!='none'){if(defaults.ignoreColumn.indexOf(index)==-1){excel+="<td>"+parseString($(this))+"</td>";}}});excel+='</tr>';});var rowCount=1;$(el).find('tbody').find('tr').each(function(){excel+="<tr>";var colCount=0;$(this).filter(':visible').find('td').each(function(index,data){if($(this).css('display')!='none'){if(defaults.ignoreColumn.indexOf(index)==-1){excel+="<td>"+parseString($(this))+"</td>";}}
colCount++;});rowCount++;excel+='</tr>';});excel+='</table>'
if(defaults.consoleLog=='true'){console.log(excel);}
var excelFile="<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:x='urn:schemas-microsoft-com:office:"+defaults.type+"' xmlns='http://www.w3.org/TR/REC-html40'>";excelFile+="<head>";excelFile+="<!--[if gte mso 9]>";excelFile+="<xml>";excelFile+="<x:ExcelWorkbook>";excelFile+="<x:ExcelWorksheets>";excelFile+="<x:ExcelWorksheet>";excelFile+="<x:Name>";excelFile+="{worksheet}";excelFile+="</x:Name>";excelFile+="<x:WorksheetOptions>";excelFile+="<x:DisplayGridlines/>";excelFile+="</x:WorksheetOptions>";excelFile+="</x:ExcelWorksheet>";excelFile+="</x:ExcelWorksheets>";excelFile+="</x:ExcelWorkbook>";excelFile+="</xml>";excelFile+="<![endif]-->";excelFile+="</head>";excelFile+="<body>";excelFile+=excel;excelFile+="</body>";excelFile+="</html>";var base64data="base64,"+$.base64.encode(excelFile);window.open('data:application/vnd.ms-'+defaults.type+';filename=exportData.doc;'+base64data);}else if(defaults.type=='png'){html2canvas($(el),{onrendered:function(canvas){var img=canvas.toDataURL("image/png");window.open(img);}});}else if(defaults.type=='pdf'){var doc=new jsPDF('p','pt','a4',true);doc.setFontSize(defaults.pdfFontSize);var startColPosition=defaults.pdfLeftMargin;$(el).find('thead').find('tr').each(function(){$(this).filter(':visible').find('th').each(function(index,data){if($(this).css('display')!='none'){if(defaults.ignoreColumn.indexOf(index)==-1){var colPosition=startColPosition+(index*50);doc.text(colPosition,20,parseString($(this)));}}});});var startRowPosition=20;var page=1;var rowPosition=0;$(el).find('tbody').find('tr').each(function(index,data){rowCalc=index+1;if(rowCalc%26==0){doc.addPage();page++;startRowPosition=startRowPosition+10;}
rowPosition=(startRowPosition+(rowCalc*10))-((page-1)*280);$(this).filter(':visible').find('td').each(function(index,data){if($(this).css('display')!='none'){if(defaults.ignoreColumn.indexOf(index)==-1){var colPosition=startColPosition+(index*50);doc.text(colPosition,rowPosition,parseString($(this)));}}});});doc.output('datauri');}
function parseString(data){if(defaults.htmlContent=='true'){content_data=data.html().trim();}else{content_data=data.text().trim();}
if(defaults.escape=='true'){content_data=escape(content_data);}
return content_data;}}});})(jQuery);

// @fileRef jn_gapi.js 
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//apis.google.com/js/client.js?onload=jnGapiInit';s.parentNode.insertBefore(g,s);}(document,'script'));function jnGapiInit(){gapi.client.setApiKey(jnGapi.apiKey);if($('#my-google-account').val()){jnGapi.myGoogleAccout=$('#my-google-account').val();jnGapi.login();}else{if(confirm('아직 연결된 구글 계정이 없습니다.\n'
+'구글 계정 연동을 시작합니다. \n'
+'한번 연동된 구글 계정은 결제 진행 후 변경이 불가하오니 신중하게 선택해주세요.')){jnGapi.login();}else{$('a.connection').show();}}}
var jnGapi={clientId:'264752365528-anfr0unhnrjafqbithimn8a979bhqdrs.apps.googleusercontent.com',apiKey:'AIzaSyBiH5ObpEoh3GPirVLXsyP-D27cQMnO-io',scopes:'https://www.googleapis.com/auth/analytics.readonly \
            https://www.googleapis.com/auth/userinfo.email',data:[],accounts:null,properties:null,profiles:null,isConnected:false,myGoogleAccout:null,loginCallback:null,login:function(){gapi.auth.authorize({client_id:jnGapi.clientId,scope:jnGapi.scopes,immediate:true},function(authResult){if(authResult.error){gapi.auth.authorize({client_id:jnGapi.clientId,scope:jnGapi.scopes,immediate:false},jnGapi._checkGoogleAccount);$('a.connection').show();}else{jnGapi._checkGoogleAccount();}});},_checkGoogleAccount:function(){gapi.client.load('oauth2','v2',function(){gapi.client.oauth2.userinfo.get().execute(function(userResult){var param={'googleAccount':userResult.email};$.get(basePath+'gt/ajaxCheckGoogleAccount',param,function(resp){resp=JSON.parse(resp);if(resp.response!=200){alert('G-Tracer의 계정은 한개의 구글 계정과 연동됩니다.\n올바른 구글 계정으로 로그인해 주세요.');$('#popup_msg').hide();$('#wrong_id').show();jnGapi.isConnected=false;$('a.btn-google').hide();$('a.logout').show();}else{jnGapi.isConnected=true;$('a.btn-google').hide();$('a.site-update').show();gapi.client.load('analytics','v3',function(){jnGapi.loginCallback();});}});});});},siteUpdate:function(){gapi.client.load('analytics','v3',function(){gapi.client.analytics.management.accounts.list().then(function(resp){jnGapi.accounts=resp.result;chk_finish();},function(reson){console.log('Error: '+reason.result.error.message);});gapi.client.analytics.management.webproperties.list({'accountId':'~all'}).then(function(webpropertiesResults){if(webpropertiesResults){jnGapi.properties=webpropertiesResults.result;chk_finish();}else{setTimeout(jnGapi._handleAuthorized(),1000);}},function(reson){console.log('Error: '+reason.result.error.message);});gapi.client.analytics.management.profiles.list({'accountId':'~all','webPropertyId':'~all'}).then(function(profilesResults){if(profilesResults){jnGapi.profiles=profilesResults.result;chk_finish();}else{setTimeout(jnGapi._handleAuthorized(),1000);}},function(reson){console.log('Error: '+reason.result.error.message);});var chk_finish=function(){if(jnGapi.accounts!=null&&jnGapi.properties!=null&&jnGapi.profiles!=null){for(i in jnGapi.accounts.items){jnGapi.data[jnGapi.accounts.items[i].id]=jnGapi.accounts.items[i];jnGapi.data[jnGapi.accounts.items[i].id].properties=[];}
for(i in jnGapi.properties.items){jnGapi.data[jnGapi.properties.items[i].accountId].properties[jnGapi.properties.items[i].id]=jnGapi.properties.items[i];jnGapi.data[jnGapi.properties.items[i].accountId].properties[jnGapi.properties.items[i].id].profiles=[];}
for(i in jnGapi.profiles.items){jnGapi.data[jnGapi.profiles.items[i].accountId].properties[jnGapi.profiles.items[i].webPropertyId].profiles[jnGapi.profiles.items[i].id]=jnGapi.profiles.items[i];}
jnGapi._onload();}}});},_onload:function(){var convArrToObj=function(array){var thisEleObj=new Object();if(typeof array=="object"){for(var i in array){var thisEle=convArrToObj(array[i]);thisEleObj[i]=thisEle;}}else{thisEleObj=array;}
return thisEleObj;};var param={};param[$('#csrf_token').attr('name')]=$('#csrf_token').val();param['sites']=JSON.stringify(convArrToObj(jnGapi.data));param['username']=jnGapi.accounts.username;$.post(basePath+'gt/ajaxCreateSites',param,function(resp){location.reload();});},makeQuery:function(id,origin,compare,data,actionParam){var param=jnGapi._setParam(id,origin,data);gapi.client.analytics.data.ga.get(param).then(function(result){var originResult=result;param=jnGapi._setParam(id,compare,data);gapi.client.analytics.data.ga.get(param).then(function(result){actionParam.callback(originResult.result,result.result,actionParam);});});},_setParam:function(id,date,data){var param={'ids':id,'start-date':date.startDate,'end-date':date.endDate,'metrics':data.metrics};if(data.dimensions){param['dimensions']=data.dimensions}
if(data.filters){param['filters']=data.filters}
if(data.maxresults){param['max-results']=data.maxresults}
if(data.output){param['output']=data.output}
if(data.samplinglevel){param['samplingLevel']=data.samplinglevel}
if(data.segment){param['segment']=data.segment}
if(data.sort&&typeof(data.sort)!="function"){param['sort']=data.sort}
if(data.startindex){param['start-index']=data.startindex}
if(data.fields){param['fields']=data.fields}
return param;}};

// @fileRef view.js 


// @fileRef core.js 
$(document).ready(function(){chart.init();});var getRevenue=function(){var origin={'startDate':'2014-10-01','endDate':'2014-10-31'};var compare={'startDate':'2014-09-01','endDate':'2014-09-30'};var data={'metrics':'ga:transactionRevenue','dimensions':'ga:date'};var actionParam={'callback':chart.makeLineChart,'target':'#revenue-chart'}
jnGapi.makeQuery('ga:72087850',origin,compare,data,actionParam);}
var getProduct=function(){var origin={'startDate':'2014-11-01','endDate':'2014-11-30'};var compare={'startDate':'2014-10-01','endDate':'2014-10-31'};var data={'metrics':'ga:itemRevenue','dimensions':'ga:productName','maxResults':'10','sort':'-ga:itemRevenue'};var actionParam={'callback':chart.makeRank,'target':'#product-rank'}
jnGapi.makeQuery('ga:72087850',origin,compare,data,actionParam);}
var numberWithCommas=function(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}

// @fileRef constants.js 
var siteStatus={"notActivated":"NOT ACTIVATED","pending":"PENDING","activated":"ACTIVATED","activatedPending":"ACTIVATED PENDING",};var hourLabel=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"];var dateLabel=["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"];var weekLabel=["01","02","03","04","05"];var monthLabel=["01","02","03","04","05","06","07","08","09","10","11","12"];var datepickerMonthOption={'viewMode':1,'minViewMode':1,'format':'yyyy-mm'}
var datepickerWeekOption={'viewMode':0,'minViewMode':0,'format':'yyyy-mm-dd'}
var datepickerDayOption={'viewMode':0,'minViewMode':0,'format':'yyyy-mm-dd'}
var defaultRankHtml='\
<tr class="selectable"> \
<td class="center">{{rank}}</td> \
<td class="strong">{{name}}</td> \
<td class="center">{{icon}}{{changed}}</td> \
<td class="center">{{value}}</td> \
<td class="center">{{value1}}</td> \
</tr> \
';var rankUpIcon='<i class="fa fa-fw fa-arrow-up text-success"></i>';var rankDownIcon='<i class="fa fa-fw fa-arrow-down text-danger"></i>';var rankEqualIcon='<i class="fa fa-fw fa-minus text-primary"></i>';var rankNewIcon='<span class="label label-primary">new</span>';var krwIcon='<i class="fa fa-krw"></i>';

// @fileRef chart.js 
var chart={charts:[],destory:function(){for(i in chart.charts){chart.charts[i].destroy();}
chart.charts=[];},init:function(){Chart.defaults.global={animation:true,animationSteps:60,animationEasing:"easeOutQuart",showScale:true,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleIntegersOnly:true,scaleBeginAtZero:false,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:true,maintainAspectRatio:true,showTooltips:true,tooltipEvents:["mousemove","touchstart","touchmove"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= numberWithCommas(value) %>",multiTooltipTemplate:"<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= numberWithCommas(value) %>",onAnimationProgress:function(){},onAnimationComplete:function(){}}},makeRank:function(originResult,compareResult,actionParam){var $table=$(actionParam.target);$table=$('tbody',$table);$table.html('');var tableData=[];var originRows=originResult.rows;var compareRows=compareResult.rows;for(i in originRows){var data={'name':originRows[i][0],'rank':parseInt(i)+1,'value1':parseInt(originRows[i][2])};switch(actionParam.valueType){case'won':data['value']=krwIcon+numberWithCommas(parseFloat(originRows[i][1]));break;case'percent':data['value']=parseFloat(originRows[i][1]).toFixed(2)+'%';break;}
for(j in compareRows){data['changed']=-9999;if(originRows[i][0]==compareRows[j][0]){data['changed']=j-i;data['changedRank']=j-i;break;}}
if(data.changed==-9999){data['changed']='';data['icon']=rankNewIcon;}else if(data.changed>0){data['changed']=data.changed+' 상승';;data['icon']=rankUpIcon;}else if(data.changed<0){data['changed']=Math.abs(data.changed)+' 하락';data['icon']=rankDownIcon;}else{data['changed']='유지';data['icon']=rankEqualIcon;}
tableData.push(data);}
if(actionParam.report&&tableData.length>0){var minI=[0,0];var maxI=[0,0];for(i in tableData){if(tableData[i].changedRank<minI[1]){minI[0]=i;minI[1]=tableData[i].changedRank;}
if(tableData[i].changedRank>maxI[1]){maxI[0]=i;maxI[1]=tableData[i].changedRank;}}
var reportObject={'name1':tableData[maxI[0]].name?tableData[maxI[0]].name:'','value1':maxI[1],'name2':tableData[minI[0]].name?tableData[minI[0]].name:'','value2':Math.abs(minI[1])}
var reportString=actionParam.report;for(key in reportObject){reportString=reportString.replace("{{"+key+"}}",reportObject[key]);}
makeReport(reportString,actionParam.reportIndex);}else if(tableData.length==0){makeReport("데이터 없음.",actionParam.reportIndex);}
for(i in tableData){if(i>9)break;var trHtml=actionParam.trHtml?actionParam.trHtml:defaultRankHtml;for(key in tableData[i]){trHtml=trHtml.replace("{{"+key+"}}",tableData[i][key]);}
$table.append(trHtml);}
$(actionParam.target).show();},makeLineChart:function(originResult,compareResult,actionParam){var ctx=$(actionParam.target).get(0).getContext("2d");var originData=[];var compareData=[];var labels=[];var isSetLabels=false;if(actionParam['labels']=='month'){labels=dateLabel;isSetLabels=true;}else if(actionParam['labels']=='day'){labels=hourLabel;isSetLabels=true;}
for(i in originResult.rows){originData.push(parseFloat(originResult.rows[i][1]));if(!isSetLabels){labels.push(originResult.rows[i][0].substring(4)
+" / "
+compareResult.rows[i][0].substring(4));}}
for(i in compareResult.rows){compareData.push(parseFloat(compareResult.rows[i][1]));}
if(actionParam.report){var originValue=0;var compareValue=0;for(i in originData){originValue+=originData[i];}
for(i in compareData){compareValue+=compareData[i];}
var reportObject={'value1':numberWithCommas(originValue),'value2':originValue-compareValue>0?(((originValue-compareValue)/compareValue)*100).toFixed(2):(((compareValue-originValue)/compareValue)*100).toFixed(2),'updown':originValue-compareValue>0?"증가":"감소"};var reportString=actionParam.report;for(key in reportObject){reportString=reportString.replace("{{"+key+"}}",reportObject[key]);}
makeReport(reportString,actionParam.reportIndex);}
var $excelTable=$('#'+actionParam.forExcel);$excelTable=$('tbody',$excelTable);$excelTable.html('');for(i=0;i<originData.length||i<compareData.length;i++){var trHtml='<tr><td>'+(parseInt(i)+1)+'</td><td>'+labels[i]+'</td>';if(originData[i]){trHtml=trHtml
+'<td>'+actionParam.originLabel+'</td>'
+'<td>'+originData[i]+'</td>';}else{trHtml=trHtml
+'<td>'+actionParam.originLabel+'</td>'
+'<td>0</td>';}
if(compareData[i]){trHtml=trHtml
+'<td>'+actionParam.compareLabel+'</td>'
+'<td>'+compareData[i]+'</td>';}else{trHtml=trHtml
+'<td>'+actionParam.compareLabel+'</td>'
+'<td>0</td>';}
trHtml+="</tr>";$excelTable.append(trHtml);}
var data={labels:labels,datasets:[{label:actionParam.originLabel,fillColor:"rgba(235,106,90,0.2)",strokeColor:"rgba(235,106,90,1)",pointColor:"rgba(235,106,90,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(235,106,90,1)",data:originData},{label:actionParam.compareLabel,fillColor:"rgba(220,220,220,0.2)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:compareData}]};var myLineChart=new Chart(ctx).Line(data,Chart.defaults.Line);chart.charts.push(myLineChart);$(actionParam.target).show();},makeTable:function(originResult,compareResult,actionParam){var $table=$(actionParam.target);var viewMode=[];$('th',$table).each(function(idx,th){if($(th).data('view-mode')){viewMode[idx]=$(th).data('view-mode');}else{viewMode[idx]='default';}});$table=$('tbody',$table);$table.html('');var originRows=originResult.rows;var countColumns;if($(actionParam.target).attr('data-roi')){var param={'sid':$("#menu_switch option:selected").data('sid')}
$.get(basePath+'gt/ajaxGetProducts',param,function(resp){resp=JSON.parse(resp);if(resp&&resp.response=='200'){for(i in originRows){var trHtml='<tr><td>'+(parseInt(i)+1)+'</td>';countColumns=1;var j=1;for(key in originRows[i]){trHtml=trHtml+"<td>";switch(viewMode[j++]){case'won':trHtml=trHtml
+krwIcon
+numberWithCommas(parseFloat(originRows[i][key]))
+"</td>";break;case'second':trHtml=trHtml
+parseFloat(originRows[i][key]).toFixed(2)
+"초</td>";break;case'percent':trHtml=trHtml
+parseFloat(originRows[i][key]).toFixed(2)
+"%</td>";break;case'fixed2':trHtml=trHtml
+parseFloat(originRows[i][key]).toFixed(2)
+"</td>";break;default:trHtml=trHtml
+originRows[i][key];+"</td>";}
countColumns++;}
trHtml=trHtml+"<td>";for(key in resp.products){if(resp.products[key].name==originRows[i][0]){trHtml=trHtml
+krwIcon
+numberWithCommas(parseFloat(resp.products[key].roi))
+"</td><td>";var roi=parseFloat(originRows[i][2])
-(parseFloat(resp.products[key].roi)*parseFloat(originRows[i][1]))
trHtml=trHtml
+krwIcon
+numberWithCommas(parseFloat(roi))
+"</td>";break;}}
trHtml+="</tr>";$table.append(trHtml);}}else{alert('원가 정보를 불러오는데 실패했습니다.');}});}else{for(i in originRows){var trHtml='<tr><td>'+(parseInt(i)+1)+'</td>';countColumns=1;var j=1;for(key in originRows[i]){trHtml=trHtml+"<td>";switch(viewMode[j++]){case'won':trHtml=trHtml
+krwIcon
+numberWithCommas(parseFloat(originRows[i][key]).toFixed(2))
+"</td>";break;case'second':trHtml=trHtml
+parseFloat(originRows[i][key]).toFixed(2)
+"초</td>";break;case'percent':trHtml=trHtml
+parseFloat(originRows[i][key]).toFixed(2)
+"%</td>";break;case'fixed2':trHtml=trHtml
+parseFloat(originRows[i][key]).toFixed(2)
+"</td>";break;default:trHtml=trHtml
+originRows[i][key];+"</td>";}
countColumns++;}
trHtml+="</tr>";$table.append(trHtml);}}
$(actionParam.target).show();if($(actionParam.target).data('subchart')){$('tr',$table).on('click',function(e){var $this=$(e.currentTarget);if($this.hasClass('opened')){$this.removeClass('opened');$this.next().hide().remove();}else{var duration=makeDuration();var origin=duration.origin;var profileId=$("#menu_switch option:selected").data('ga');var gaData=makeQueryParam($(actionParam.target).data(),'subchart',8);if(gaData.filters){gaData.filters=gaData.filters
+$('td',$this).eq($(actionParam.target).data('subchart-filter-index')).html().replace('<br>','<BR />');}
var param=jnGapi._setParam(profileId,origin,gaData);gapi.client.analytics.data.ga.get(param).then(function(result){var headers=$(actionParam.target).data('subchart-column-header').split(',');var types=$(actionParam.target).data('subchart-column-type').split(',');html='<tr class="subchart">'
+' <td colspan="'+countColumns+'">'
+'  <table class="table margin-none">'
+'   <thead>'
+'              <tr class="subchart">';for(i in headers){html=html+'    <th>'+headers[i]+'</th>';}
html=html
+'      </tr>'
+'          </thead>'
+'   <tbody>';for(i=0;i<result.result.rows.length;i++){html=html+'    <tr class="subchart">';for(j=0;j<result.result.rows[i].length;j++){switch(types[j]){case'won':html=html
+'<td>'
+krwIcon
+numberWithCommas(parseFloat(result.result.rows[i][j]))
+'</td>';break;case'num':html=html
+'<td>'
+numberWithCommas(parseFloat(result.result.rows[i][j]))
+'</td>';break;case'str':html=html
+'<td>'
+result.result.rows[i][j]
+'</td>';break;}}
html=html+'    </tr>';}
html=html+'   </tbody>'
+'  </table>'
+' </td>'
+'</tr>';$(html).insertAfter($this);$this.addClass('opened');});}});}}};

// @fileRef string.js 
var activateRequestModalTitle="사이트 활성화 요청";var activateRequestModalMsg="사이트 활성화를 위해서 결제를 진행해야 합니다. \
    abc@abc.com 혹은 010-1234-5678로 문의바랍니다. 추후 PG로 교체";var activateRequestModalSubmitBtn="요청";var activateRequestModalAlert="활성화 요청이 완료되었습니다.";var activateRequestModalChangeBtn="요청 취소";var activatedPendingRequestModalTitle="사이트 활성화 연장 요청";var activatedPendingRequestModalMsg="사이트 활성화를 연장하기 위해서 결제를 진행해야 합니다. \
    abc@abc.com 혹은 010-1234-5678로 문의바랍니다. 추후 PG로 교체";var activatedPendingRequestModalSubmitBtn="요청";var activatedPendingRequestModalAlert="활성화 연장 요청이 완료되었습니다."
var activatedPendingRequestModalChangeBtn="연장 요청 취소";var activateRequestCancelModalTitle="사이트 활성화 요청 취소";var activateRequestCancelModalMsg="사이트 활성화 요청을 취소합니다.";var activateRequestCancelModalSubmitBtn="취소";var activateRequestCancelModalAlert="활성화 요청이 취소되었습니다."
var activateRequestCancelModalChangeBtn="활성화";var activatedPendingRequestCancelModalTitle="사이트 활성화 연장 요청 취소";var activatedPendingRequestCancelModalMsg="사이트 활성화 연장 요청을 취소합니다.";var activatedPendingRequestCancelModalSubmitBtn="취소";var activatedPendingRequestCancelModalAlert="활성화 연장 요청이 취소되었습니다."
var activatedPendingRequestCancelModalChangeBtn="연장";var siteUpdateAlert="GT 계정에 연결된 구글 계정과 현재 로그인 하고 있는 구글 계정이 다릅니다.";var defaultSwitchAlert="기본값은 꼭 존재해야 합니다.";var clickViewReportAlert="기간을 선택해주세요.";var selectDatepickerAlert="기간을 정확히 입력해주세요.";

// @fileRef sites.js 
$(document).ready(function(){$('a.btn-google').hide();$('#modal-change').on('show.bs.modal',openRequestModal);$('a.site-update').on('click',clickSiteUpdate);$('a.connection').on('click',clickConnection);$('.make-switch:not(.has-switch)').bootstrapSwitch();$('.make-switch').on('switch-change',switchChanged);});var openRequestModal=function(e){var self=$(this);var btn=$(e.relatedTarget);var sid=btn.parent().parent().data('sid');var dialogType=btn.data('dialog-type');self.find('form').hide();self.find('form #sid').val(sid);switch(dialogType){case'activate':self.find('.modal-title').text(activateRequestModalTitle);self.find('#msg').text(activateRequestModalMsg);self.find('#btn-submit').text(activateRequestModalSubmitBtn);self.find('form #status').val(siteStatus.pending);break;case'activate-pending':self.find('.modal-title').text(activatedPendingRequestModalTitle);self.find('#msg').text(activatedPendingRequestModalMsg);self.find('#btn-submit').text(activatedPendingRequestModalSubmitBtn);self.find('form #status').val(siteStatus.activatedPending);break;case'cancel-activate':self.find('.modal-title').text(activateRequestCancelModalTitle);self.find('#msg').text(activateRequestCancelModalMsg);self.find('#btn-submit').text(activateRequestCancelModalSubmitBtn);self.find('form #status').val(siteStatus.notActivated);break;case'cancel-activate-pending':self.find('.modal-title').text(activatedPendingRequestCancelModalTitle);self.find('#msg').text(activatedPendingRequestCancelModalMsg);self.find('#btn-submit').text(activatedPendingRequestCancelModalSubmitBtn);self.find('form #status').val(siteStatus.activated);break;default:break;}
self.find('form').unbind('submit');self.find('form').on('submit',function(e){e.preventDefault();$.post($(this).attr('action'),$(this).serialize(),function(resp){resp=JSON.parse(resp);if(resp.response==200){switch(dialogType){case'activate':alert(activateRequestModalAlert);btn.data('dialog-type','cancel-activate');btn.removeClass('btn-primary');btn.addClass('btn-success');btn.text(activateRequestModalChangeBtn);break;case'activate-pending':alert(activatedPendingRequestModalAlert);btn.data('dialog-type','cancel-activate-pending');btn.removeClass('btn-primary');btn.addClass('btn-success');btn.text(activatedPendingRequestModalChangeBtn);break;case'cancel-activate':alert(activateRequestCancelModalAlert);btn.data('dialog-type','activate');btn.removeClass('btn-success');btn.addClass('btn-primary');btn.text(activateRequestCancelModalChangeBtn);break;case'cancel-activate-pending':alert(activatedPendingRequestCancelModalAlert);btn.data('dialog-type','activate-pending');btn.removeClass('btn-success');btn.addClass('btn-primary');btn.text(activatedPendingRequestCancelModalChangeBtn);break;default:break;}}else{alert(resp.message);}
self.modal('hide');});});self.find('form').show();}
var clickSiteUpdate=function(){if(jnGapi.isConnected){jnGapi.siteUpdate();}else{alert(siteUpdateAlert);}}
var clickConnection=function(){jnGapi.login();}
var switchChanged=function(e,data){$('.make-switch').bootstrapSwitch('setActive',false);$this=$(e.currentTarget);sid=$this.parent().parent().data('sid');if(data.value){var param={'sid':sid,'isDefault':1,};param[$('#csrf_token').attr('name')]=$('#csrf_token').val();$.post('ajax-set-default-site',param,function(resp){$('.make-switch').each(function(){if($(this)!=$this){$(this).bootstrapSwitch('setState',false,true);}});$this.bootstrapSwitch('setState',true,true);$("[data-status="+siteStatus.activated+"] .make-switch").bootstrapSwitch('setActive',true);});}else{alert(defaultSwitchAlert);$this.bootstrapSwitch('setState',true);$("[data-status="+siteStatus.activated+"] .make-switch").bootstrapSwitch('setActive',true);}}

// @fileRef common.js 
var report=['','',''];$(document).ready(function(){$('.goals').hide();$('.goals > ul > li').hide();jnGapi.loginCallback=loginCallback;$('#datepicker-month').datepicker(datepickerMonthOption);$('#datepicker-day').datepicker(datepickerDayOption);$('#datepicker-select-origin-from').datepicker(datepickerDayOption);$('#datepicker-select-origin-to').datepicker(datepickerDayOption);$('#report-tab').hide();$('#report').hide();$('.report-type-details').hide();$('#report-type').on('change',changeReportType);$('#device-type').on('change',clickViewReport);$('#menu_switch').on('change',linkClick);$('#view-report').on('click',clickViewReport);$('#navigation_current_page .hasSubmenu a').not('[data-toggle=collapse]').on('click',linkClick);$('.btn-excel-export').on('click',excelExport);$('#get_product').on('click',getProductList);$('#save_product').on('click',saveProduct);});var excelExport=function(e){e.preventDefault();var $this=$(e.currentTarget);var tableId=$this.data('table');var param={filename:$this.data('filename'),data:JSON.stringify(htmlUtil.tableToArray(tableId))};param[$('#csrf_token').attr('name')]=$('#csrf_token').val();$.post(basePath+'gt/ajaxExcelDownload',param,function(resp){resp=JSON.parse(resp);if(resp&&resp.response=='200'){window.open(resp.url);}});};var linkClick=function(e){e.preventDefault();var $this=$(e.currentTarget);var url=$this.attr('href')?$this.attr('href'):$(location).attr('href');var dType=$('#report-type').val();if(url.indexOf("?")>-1){url=url.substr(0,url.indexOf("?"));}
url=url+'?select='+$("#menu_switch option:selected").data('ga');url=url+'&device='+$("#device-type").val();switch(dType){case'day':url=url+'&dtype='+dType
+'&start-date='+$('#datepicker-day').val()
+'&end-date='+$('#datepicker-day').val();break;case'month':url=url+'&dtype='+dType
+'&start-date='+$('#datepicker-month').val()
+'&end-date='+$('#datepicker-month').val();break;case'select':url=url+'&dtype='+dType
+'&start-date='+$('#datepicker-select-origin-from').val()
+'&end-date='+$('#datepicker-select-origin-to').val();break;default:break;}
$(location).attr('href',url);};var changeReportType=function(e){var $this=$(e.currentTarget);$('.report-type-details').hide();switch($this.val()){case'month':$('#report-type-month').show();$('#datepicker-month').datepicker().on('changeDate',function(ev){$('#datepicker-month').datepicker('hide');clickViewReport();});break;case'day':$('#report-type-day').show();$('#datepicker-day').datepicker().on('changeDate',function(ev){$('#datepicker-day').datepicker('hide');clickViewReport();});break;case'select':$('#report-type-select').show();$('#datepicker-select-origin-from').datepicker().on('changeDate',function(ev){$('#datepicker-select-origin-from').datepicker('hide');clickViewReport();});$('#datepicker-select-origin-to').datepicker().on('changeDate',function(ev){$('#datepicker-select-origin-to').datepicker('hide');clickViewReport();});}
clickViewReport();};var clickViewReport=function(){if($('#report-type').val()=='month'&&!$('#datepicker-month').val()){alert(clickViewReportAlert);return false;}
if($('#report-type').val()=='day'&&!$('#datepicker-day').val()){alert(clickViewReportAlert);return false;}
if($('#report-type').val()=='select'&&(!$('#datepicker-select-origin-from').val()||!$('#datepicker-select-origin-to').val())){alert(clickViewReportAlert);return false;}
chart.destory();report=['','',''];$('.chart').hide();var duration=makeDuration();var origin=duration.origin;var compare=duration.compare;var originLabel=duration.originLabel;var compareLabel=duration.compareLabel;var profileId=$("#menu_switch option:selected").data('ga');$('.chart').each(function(){var data={};var gaData=$(this).data();var searchWord='ga';var substringNum=2;var actionParam={'originLabel':originLabel,'compareLabel':compareLabel};if($(this).data('dayormonth')){searchWord='ga'
+($('#report-type').val()=='day'?'Day':'Month');substringNum=$('#report-type').val()=='day'?5:7;actionParam['labels']=$('#report-type').val();}
data=makeQueryParam(gaData,searchWord,substringNum);switch($(this).data('chart-type')){case'line':actionParam['callback']=chart.makeLineChart;actionParam['forExcel']=$(this).data('for-excel-table');break;case'rank':actionParam['callback']=chart.makeRank;actionParam['valueType']=$(this).data('ap-value-type');break;case'table':actionParam['callback']=chart.makeTable;}
actionParam['target']='#'+$(this).attr('id');actionParam['report']=$(this).data('report');actionParam['reportIndex']=$(this).data('report-index');jnGapi.makeQuery(profileId,origin,compare,data,actionParam);});$('#report-tab').show();};var makeDuration=function(){var origin={};var compare={};var originLabel='';var compareLabel='';switch($('#report-type').val()){case'month':origin=dateUtil.getMonthStartEndDate($('#datepicker-month').val(),'yyyy-mm','yyyy-mm-dd');compare=dateUtil.getMonthStartEndDate(dateUtil.add($('#datepicker-month').val(),{'month':-1},'yyyy-mm','yyyy-mm'),'yyyy-mm','yyyy-mm-dd');originLabel=origin['startDate'].substring(5,7)+'월';compareLabel=compare['startDate'].substring(5,7)+'월';break;case'day':origin['startDate']=$('#datepicker-day').val();origin['endDate']=$('#datepicker-day').val();compare['startDate']=dateUtil.add($('#datepicker-day').val(),{'date':-1},'yyyy-mm-dd','yyyy-mm-dd');compare['endDate']=compare['startDate'];originLabel=origin['startDate'];compareLabel=compare['startDate'];break;case'select':origin['startDate']=$('#datepicker-select-origin-from').val();origin['endDate']=$('#datepicker-select-origin-to').val();var originStartDate=dateUtil.dateStringToDate(origin['startDate'],'yyyy-mm-dd');var originEndDate=dateUtil.dateStringToDate(origin['endDate'],'yyyy-mm-dd');var diff=originEndDate-originStartDate;if(diff<0){alert(selectDatepickerAlert);return false;}
var compareStartDate=dateUtil.dateStringToDate(dateUtil.add(origin['startDate'],{'date':-1},'yyyy-mm-dd','yyyy-mm-dd'),'yyyy-mm-dd');var compareEndDate=dateUtil.dateStringToDate(dateUtil.add(origin['endDate'],{'date':-1},'yyyy-mm-dd','yyyy-mm-dd'),'yyyy-mm-dd');compare['startDate']=dateUtil.dateToDateString(new Date(compareStartDate.getTime()-diff),'yyyy-mm-dd');compare['endDate']=dateUtil.dateToDateString(new Date(compareEndDate.getTime()-diff),'yyyy-mm-dd');originLabel=origin['startDate']+'~'+origin['endDate'];compareLabel=compare['startDate']+'~'+compare['endDate'];}
return{'origin':origin,'compare':compare,'originLabel':originLabel,'compareLabel':compareLabel};};var makeQueryParam=function(gaData,searchWord,substringNum){var data=[];for(key in gaData){if(key.search(searchWord)!=-1){data[key.substring(substringNum).toLowerCase()]=gaData[key];}}
switch($('#device-type').val()){case'pc':data['segment']='sessions::condition::ga:deviceCategory==desktop,ga:deviceCategory==tablet';break;case'mobile':data['segment']='sessions::condition::ga:deviceCategory==mobile';break;default:break;}
return data;};var makeReport=function(string,idx){report[parseInt(idx)]=string;for(var i=0;i<4;i++){if(report[i]=='')return false;}
if($('#report-type').val()=='month'){$('#report-title').html('전월 대비 보고서');}else if($('#report-type').val()=='day'){$('#report-title').html('전일 대비 보고서');}else{$('#report-title').html('기간 대비 보고서');}
for(i in report){$('#report'+i).html(report[i]);}
$('#report').show();};var loginCallback=function(){$('#alert-message').hide();$('.datepicker').datepicker('setValue',new Date());switch(fromDType){case'day':$('#datepicker-day').val(fromStartDate);break;case'month':$('#datepicker-month').val(fromStartDate);break;case'select':$('#datepicker-select-origin-from').val(fromStartDate);$('#datepicker-select-origin-to').val(fromEndDate);break;default:fromDType='day';break;}
$('#report-type').val(fromDType).change();var sid=$("#menu_switch option:selected").data('sid');if($('li[data-sid='+sid+']').length>0){$('.goals').show();$('li[data-sid='+sid+']').show();}
var $menu=$('ul.collapse.in');$menu.collapse('hide');};var getProductList=function(){var origin={'startDate':'365daysAgo','endDate':'today'};var compare={'startDate':'today','endDate':'today'};var profileId=$("#menu_switch option:selected").data('ga');jnGapi.makeQuery(profileId,origin,compare,{'metrics':'ga:ItemRevenue','dimensions':'ga:productName','sort':'ga:productName','filters':'ga:productName!@(not;ga:productName!@개인결제','maxresults':'10000'},{'callback':callbackProductList});};var callbackProductList=function(origin,compare,param){$('#product-list').html('');for(i in origin.rows){var trHtml="<tr name='product'>"
+"<td name='product_name'>"+origin.rows[i][0]+"</td>"
+"<td><input name='product_roi' type='text' value='0'></input></td>"
+"</tr>";$('#product-list').append(trHtml);}};var saveProduct=function(){var $product=$('[name=product]');var productList=[];$product.each(function(){var product={};product['name']=$('[name=product_name]',$(this)).text();product['roi']=$('[name=product_roi]',$(this)).val();productList.push(product);});var param={'productList':JSON.stringify(productList),'sid':$('#menu_switch option:selected').attr('data-sid')};param[$('#csrf_token').attr('name')]=$('#csrf_token').val();$.post(basePath+'gt/ajaxSetProductList',param,function(resp){resp=JSON.parse(resp);if(resp&&resp.response=='200'){alert('상품 원가 정보가 업로드 되었습니다.');}});};

// @fileRef jnutil.js 
var dateUtil={dateStringToDate:function(dateString,format){if(format=='yyyy-mm-dd'){return new Date(dateString.substring(0,4),dateString.substring(5,7)-1,dateString.substring(8,10));}else if(format=='yyyy-mm'){return new Date(dateString.substring(0,4),dateString.substring(5,7)-1);}},dateToDateString:function(date,returnFormat){var m=(date.getMonth()+1)<10?'0'+(date.getMonth()+1):(date.getMonth()+1);var d=date.getDate()<10?'0'+date.getDate():date.getDate();return dateUtil._changeFormat(date.getFullYear()+'-'+m+'-'+d,'yyyy-mm-dd',returnFormat);},getMonthStartEndDate:function(dateString,format,returnFormat){var dateObject={};if(format=='yyyy-mm'){var year=dateString.substring(0,4);var month=dateString.substring(5,7);dateObject={'startDate':dateString+'-01','endDate':dateString+'-'
+(new Date(year,month,0)).getDate()}}
return{'startDate':dateUtil._changeFormat(dateObject.startDate,'yyyy-mm-dd',returnFormat),'endDate':dateUtil._changeFormat(dateObject.endDate,'yyyy-mm-dd',returnFormat)}},add:function(dateString,val,format,returnFormat){var date=dateUtil.dateStringToDate(dateString,format);if(val.year){date.setFullYear(date.getFullYear()+val.year);}
if(val.month){date.setMonth(date.getMonth()+val.month);}
if(val.date){date.setDate(date.getDate()+val.date);}
return dateUtil.dateToDateString(date,returnFormat);},_changeFormat:function(dateString,format,returnFormat){if(format==returnFormat)return dateString;else if(returnFormat=='yyyy-mm'){return dateString.substring(0,7);}}}
var numberUtil={isNumber:function(n){return!isNaN(parseFloat(n))&&isFinite(n);},isInt:function(n){return Number(n)===parseInt(n)&&n%1===0;}}
var htmlUtil={tableToArray:function(tableId){var returnArr=[];$('#'+tableId+' tr').not('.subchart').each(function(i,v){var tdArr=[];$('th, td',$(v)).each(function(i2,v2){if($('input',$(v2)).length){tdArr.push($('input',$(v2)).val());}else{tdArr.push($(v2).text());}});returnArr.push(tdArr);});return returnArr;}}
